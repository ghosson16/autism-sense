function PS(e,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qh={exports:{}},Ma={},qh={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=Symbol.for("react.element"),RS=Symbol.for("react.portal"),xS=Symbol.for("react.fragment"),LS=Symbol.for("react.strict_mode"),jS=Symbol.for("react.profiler"),AS=Symbol.for("react.provider"),DS=Symbol.for("react.context"),IS=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),NS=Symbol.for("react.memo"),$S=Symbol.for("react.lazy"),Nd=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=Nd&&e[Nd]||e["@@iterator"],typeof e=="function"?e:null)}var Kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gh=Object.assign,Yh={};function jn(e,r,t){this.props=e,this.context=r,this.refs=Yh,this.updater=t||Kh}jn.prototype.isReactComponent={};jn.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};jn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jh(){}Jh.prototype=jn.prototype;function Zu(e,r,t){this.props=e,this.context=r,this.refs=Yh,this.updater=t||Kh}var Xu=Zu.prototype=new Jh;Xu.constructor=Zu;Gh(Xu,jn.prototype);Xu.isPureReactComponent=!0;var $d=Array.isArray,Zh=Object.prototype.hasOwnProperty,el={current:null},Xh={key:!0,ref:!0,__self:!0,__source:!0};function ev(e,r,t){var n,i={},o=null,a=null;if(r!=null)for(n in r.ref!==void 0&&(a=r.ref),r.key!==void 0&&(o=""+r.key),r)Zh.call(r,n)&&!Xh.hasOwnProperty(n)&&(i[n]=r[n]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:zi,type:e,key:o,ref:a,props:i,_owner:el.current}}function US(e,r){return{$$typeof:zi,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function tl(e){return typeof e=="object"&&e!==null&&e.$$typeof===zi}function VS(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return r[t]})}var Fd=/\/+/g;function bs(e,r){return typeof e=="object"&&e!==null&&e.key!=null?VS(""+e.key):r.toString(36)}function Mo(e,r,t,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zi:case RS:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+bs(a,0):n,$d(i)?(t="",e!=null&&(t=e.replace(Fd,"$&/")+"/"),Mo(i,r,t,"",function(u){return u})):i!=null&&(tl(i)&&(i=US(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Fd,"$&/")+"/")+e)),r.push(i)),1;if(a=0,n=n===""?".":n+":",$d(e))for(var s=0;s<e.length;s++){o=e[s];var c=n+bs(o,s);a+=Mo(o,r,t,c,i)}else if(c=FS(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=n+bs(o,s++),a+=Mo(o,r,t,c,i);else if(o==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return a}function io(e,r,t){if(e==null)return e;var n=[],i=0;return Mo(e,n,"","",function(o){return r.call(t,o,i++)}),n}function BS(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Ie={current:null},No={transition:null},zS={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:No,ReactCurrentOwner:el};function tv(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:io,forEach:function(e,r,t){io(e,function(){r.apply(this,arguments)},t)},count:function(e){var r=0;return io(e,function(){r++}),r},toArray:function(e){return io(e,function(r){return r})||[]},only:function(e){if(!tl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=jn;X.Fragment=xS;X.Profiler=jS;X.PureComponent=Zu;X.StrictMode=LS;X.Suspense=MS;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zS;X.act=tv;X.cloneElement=function(e,r,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Gh({},e.props),i=e.key,o=e.ref,a=e._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,a=el.current),r.key!==void 0&&(i=""+r.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in r)Zh.call(r,c)&&!Xh.hasOwnProperty(c)&&(n[c]=r[c]===void 0&&s!==void 0?s[c]:r[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:zi,type:e.type,key:i,ref:o,props:n,_owner:a}};X.createContext=function(e){return e={$$typeof:DS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AS,_context:e},e.Consumer=e};X.createElement=ev;X.createFactory=function(e){var r=ev.bind(null,e);return r.type=e,r};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:IS,render:e}};X.isValidElement=tl;X.lazy=function(e){return{$$typeof:$S,_payload:{_status:-1,_result:e},_init:BS}};X.memo=function(e,r){return{$$typeof:NS,type:e,compare:r===void 0?null:r}};X.startTransition=function(e){var r=No.transition;No.transition={};try{e()}finally{No.transition=r}};X.unstable_act=tv;X.useCallback=function(e,r){return Ie.current.useCallback(e,r)};X.useContext=function(e){return Ie.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Ie.current.useDeferredValue(e)};X.useEffect=function(e,r){return Ie.current.useEffect(e,r)};X.useId=function(){return Ie.current.useId()};X.useImperativeHandle=function(e,r,t){return Ie.current.useImperativeHandle(e,r,t)};X.useInsertionEffect=function(e,r){return Ie.current.useInsertionEffect(e,r)};X.useLayoutEffect=function(e,r){return Ie.current.useLayoutEffect(e,r)};X.useMemo=function(e,r){return Ie.current.useMemo(e,r)};X.useReducer=function(e,r,t){return Ie.current.useReducer(e,r,t)};X.useRef=function(e){return Ie.current.useRef(e)};X.useState=function(e){return Ie.current.useState(e)};X.useSyncExternalStore=function(e,r,t){return Ie.current.useSyncExternalStore(e,r,t)};X.useTransition=function(){return Ie.current.useTransition()};X.version="18.3.1";qh.exports=X;var P=qh.exports;const jt=OS(P),WS=PS({__proto__:null,default:jt},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS=P,QS=Symbol.for("react.element"),qS=Symbol.for("react.fragment"),KS=Object.prototype.hasOwnProperty,GS=HS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YS={key:!0,ref:!0,__self:!0,__source:!0};function rv(e,r,t){var n,i={},o=null,a=null;t!==void 0&&(o=""+t),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(a=r.ref);for(n in r)KS.call(r,n)&&!YS.hasOwnProperty(n)&&(i[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps,r)i[n]===void 0&&(i[n]=r[n]);return{$$typeof:QS,type:e,key:o,ref:a,props:i,_owner:GS.current}}Ma.Fragment=qS;Ma.jsx=rv;Ma.jsxs=rv;Qh.exports=Ma;var k=Qh.exports,jc={},nv={exports:{}},Xe={},iv={exports:{}},ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(x,M){var B=x.length;x.push(M);e:for(;0<B;){var K=B-1>>>1,Q=x[K];if(0<i(Q,M))x[K]=M,x[B]=Q,B=K;else break e}}function t(x){return x.length===0?null:x[0]}function n(x){if(x.length===0)return null;var M=x[0],B=x.pop();if(B!==M){x[0]=B;e:for(var K=0,Q=x.length,G=Q>>>1;K<G;){var oe=2*(K+1)-1,J=x[oe],ee=oe+1,_e=x[ee];if(0>i(J,B))ee<Q&&0>i(_e,J)?(x[K]=_e,x[ee]=B,K=ee):(x[K]=J,x[oe]=B,K=oe);else if(ee<Q&&0>i(_e,B))x[K]=_e,x[ee]=B,K=ee;else break e}}return M}function i(x,M){var B=x.sortIndex-M.sortIndex;return B!==0?B:x.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],u=[],l=1,d=null,f=3,g=!1,v=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(x){for(var M=t(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=x)n(u),M.sortIndex=M.expirationTime,r(c,M);else break;M=t(u)}}function S(x){if(_=!1,h(x),!v)if(t(c)!==null)v=!0,D(T);else{var M=t(u);M!==null&&q(S,M.startTime-x)}}function T(x,M){v=!1,_&&(_=!1,y(C),C=-1),g=!0;var B=f;try{for(h(M),d=t(c);d!==null&&(!(d.expirationTime>M)||x&&!Z());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var Q=K(d.expirationTime<=M);M=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===t(c)&&n(c),h(M)}else n(c);d=t(c)}if(d!==null)var G=!0;else{var oe=t(u);oe!==null&&q(S,oe.startTime-M),G=!1}return G}finally{d=null,f=B,g=!1}}var b=!1,E=null,C=-1,A=5,I=-1;function Z(){return!(e.unstable_now()-I<A)}function L(){if(E!==null){var x=e.unstable_now();I=x;var M=!0;try{M=E(!0,x)}finally{M?$():(b=!1,E=null)}}else b=!1}var $;if(typeof p=="function")$=function(){p(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,N=R.port2;R.port1.onmessage=L,$=function(){N.postMessage(null)}}else $=function(){w(L,0)};function D(x){E=x,b||(b=!0,$())}function q(x,M){C=w(function(){x(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,D(T))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return t(c)},e.unstable_next=function(x){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var B=f;f=M;try{return x()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,M){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var B=f;f=x;try{return M()}finally{f=B}},e.unstable_scheduleCallback=function(x,M,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,x){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,x={id:l++,callback:M,priorityLevel:x,startTime:B,expirationTime:Q,sortIndex:-1},B>K?(x.sortIndex=B,r(u,x),t(c)===null&&x===t(u)&&(_?(y(C),C=-1):_=!0,q(S,B-K))):(x.sortIndex=Q,r(c,x),v||g||(v=!0,D(T))),x},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(x){var M=f;return function(){var B=f;f=M;try{return x.apply(this,arguments)}finally{f=B}}}})(ov);iv.exports=ov;var JS=iv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=P,Ze=JS;function j(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)r+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var av=new Set,gi={};function $r(e,r){Sn(e,r),Sn(e+"Capture",r)}function Sn(e,r){for(gi[e]=r,e=0;e<r.length;e++)av.add(r[e])}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ac=Object.prototype.hasOwnProperty,XS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ud={},Vd={};function ek(e){return Ac.call(Vd,e)?!0:Ac.call(Ud,e)?!1:XS.test(e)?Vd[e]=!0:(Ud[e]=!0,!1)}function tk(e,r,t,n){if(t!==null&&t.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rk(e,r,t,n){if(r===null||typeof r>"u"||tk(e,r,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Me(e,r,t,n,i,o,a){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=e,this.type=r,this.sanitizeURL=o,this.removeEmptyString=a}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];Pe[r]=new Me(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var rl=/[\-:]([a-z])/g;function nl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(rl,nl);Pe[r]=new Me(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(rl,nl);Pe[r]=new Me(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(rl,nl);Pe[r]=new Me(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function il(e,r,t,n){var i=Pe.hasOwnProperty(r)?Pe[r]:null;(i!==null?i.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(rk(r,t,i,n)&&(t=null),n||i===null?ek(r)&&(t===null?e.removeAttribute(r):e.setAttribute(r,""+t)):i.mustUseProperty?e[i.propertyName]=t===null?i.type===3?!1:"":t:(r=i.attributeName,n=i.attributeNamespace,t===null?e.removeAttribute(r):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?e.setAttributeNS(n,r,t):e.setAttribute(r,t))))}var $t=ZS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oo=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),en=Symbol.for("react.fragment"),ol=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),sv=Symbol.for("react.provider"),cv=Symbol.for("react.context"),al=Symbol.for("react.forward_ref"),Ic=Symbol.for("react.suspense"),Mc=Symbol.for("react.suspense_list"),sl=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),uv=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function zn(e){return e===null||typeof e!="object"?null:(e=Bd&&e[Bd]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Es;function ti(e){if(Es===void 0)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);Es=r&&r[1]||""}return`
`+Es+e}var Cs=!1;function Ps(e,r){if(!e||Cs)return"";Cs=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(u){var n=u}Reflect.construct(e,[],r)}else{try{r.call()}catch(u){n=u}e.call(r.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{Cs=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?ti(e):""}function nk(e){switch(e.tag){case 5:return ti(e.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 2:case 15:return e=Ps(e.type,!1),e;case 11:return e=Ps(e.type.render,!1),e;case 1:return e=Ps(e.type,!0),e;default:return""}}function Nc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case en:return"Fragment";case Xr:return"Portal";case Dc:return"Profiler";case ol:return"StrictMode";case Ic:return"Suspense";case Mc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cv:return(e.displayName||"Context")+".Consumer";case sv:return(e._context.displayName||"Context")+".Provider";case al:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sl:return r=e.displayName||null,r!==null?r:Nc(e.type)||"Memo";case qt:r=e._payload,e=e._init;try{return Nc(e(r))}catch{}}return null}function ik(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nc(r);case 8:return r===ol?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lv(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ok(e){var r=lv(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),n=""+e[r];if(!e.hasOwnProperty(r)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,r,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ao(e){e._valueTracker||(e._valueTracker=ok(e))}function dv(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var t=r.getValue(),n="";return e&&(n=lv(e)?e.checked?"true":"false":e.value),e=n,e!==t?(r.setValue(e),!0):!1}function ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $c(e,r){var t=r.checked;return he({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function zd(e,r){var t=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;t=lr(r.value!=null?r.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function fv(e,r){r=r.checked,r!=null&&il(e,"checked",r,!1)}function Fc(e,r){fv(e,r);var t=lr(r.value),n=r.type;if(t!=null)n==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Uc(e,r.type,t):r.hasOwnProperty("defaultValue")&&Uc(e,r.type,lr(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Wd(e,r,t){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,t||r===e.value||(e.value=r),e.defaultValue=r}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function Uc(e,r,t){(r!=="number"||ea(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ri=Array.isArray;function pn(e,r,t,n){if(e=e.options,r){r={};for(var i=0;i<t.length;i++)r["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=r.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&n&&(e[t].defaultSelected=!0)}else{for(t=""+lr(t),r=null,i=0;i<e.length;i++){if(e[i].value===t){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}r!==null||e[i].disabled||(r=e[i])}r!==null&&(r.selected=!0)}}function Vc(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(j(91));return he({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hd(e,r){var t=r.value;if(t==null){if(t=r.children,r=r.defaultValue,t!=null){if(r!=null)throw Error(j(92));if(ri(t)){if(1<t.length)throw Error(j(93));t=t[0]}r=t}r==null&&(r=""),t=r}e._wrapperState={initialValue:lr(t)}}function pv(e,r){var t=lr(r.value),n=lr(r.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),r.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),n!=null&&(e.defaultValue=""+n)}function Qd(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function hv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bc(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?hv(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var so,vv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,t,n,i){MSApp.execUnsafeLocalFunction(function(){return e(r,t,n,i)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(so=so||document.createElement("div"),so.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=so.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function _i(e,r){if(r){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=r;return}}e.textContent=r}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ak=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(e){ak.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),ci[r]=ci[e]})});function mv(e,r,t){return r==null||typeof r=="boolean"||r===""?"":t||typeof r!="number"||r===0||ci.hasOwnProperty(e)&&ci[e]?(""+r).trim():r+"px"}function yv(e,r){e=e.style;for(var t in r)if(r.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=mv(t,r[t],n);t==="float"&&(t="cssFloat"),n?e.setProperty(t,i):e[t]=i}}var sk=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zc(e,r){if(r){if(sk[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(j(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(j(61))}if(r.style!=null&&typeof r.style!="object")throw Error(j(62))}}function Wc(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=null;function cl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qc=null,hn=null,vn=null;function qd(e){if(e=Qi(e)){if(typeof Qc!="function")throw Error(j(280));var r=e.stateNode;r&&(r=Va(r),Qc(e.stateNode,e.type,r))}}function gv(e){hn?vn?vn.push(e):vn=[e]:hn=e}function _v(){if(hn){var e=hn,r=vn;if(vn=hn=null,qd(e),r)for(e=0;e<r.length;e++)qd(r[e])}}function wv(e,r){return e(r)}function Sv(){}var Os=!1;function kv(e,r,t){if(Os)return e(r,t);Os=!0;try{return wv(e,r,t)}finally{Os=!1,(hn!==null||vn!==null)&&(Sv(),_v())}}function wi(e,r){var t=e.stateNode;if(t===null)return null;var n=Va(t);if(n===null)return null;t=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(j(231,r,typeof t));return t}var qc=!1;if(Dt)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{qc=!1}function ck(e,r,t,n,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{r.apply(t,u)}catch(l){this.onError(l)}}var ui=!1,ta=null,ra=!1,Kc=null,uk={onError:function(e){ui=!0,ta=e}};function lk(e,r,t,n,i,o,a,s,c){ui=!1,ta=null,ck.apply(uk,arguments)}function dk(e,r,t,n,i,o,a,s,c){if(lk.apply(this,arguments),ui){if(ui){var u=ta;ui=!1,ta=null}else throw Error(j(198));ra||(ra=!0,Kc=u)}}function Fr(e){var r=e,t=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,r.flags&4098&&(t=r.return),e=r.return;while(e)}return r.tag===3?t:null}function Tv(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Kd(e){if(Fr(e)!==e)throw Error(j(188))}function fk(e){var r=e.alternate;if(!r){if(r=Fr(e),r===null)throw Error(j(188));return r!==e?null:e}for(var t=e,n=r;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return Kd(i),e;if(o===n)return Kd(i),r;o=o.sibling}throw Error(j(188))}if(t.return!==n.return)t=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===t){a=!0,t=i,n=o;break}if(s===n){a=!0,n=i,t=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===t){a=!0,t=o,n=i;break}if(s===n){a=!0,n=o,t=i;break}s=s.sibling}if(!a)throw Error(j(189))}}if(t.alternate!==n)throw Error(j(190))}if(t.tag!==3)throw Error(j(188));return t.stateNode.current===t?e:r}function bv(e){return e=fk(e),e!==null?Ev(e):null}function Ev(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Ev(e);if(r!==null)return r;e=e.sibling}return null}var Cv=Ze.unstable_scheduleCallback,Gd=Ze.unstable_cancelCallback,pk=Ze.unstable_shouldYield,hk=Ze.unstable_requestPaint,me=Ze.unstable_now,vk=Ze.unstable_getCurrentPriorityLevel,ul=Ze.unstable_ImmediatePriority,Pv=Ze.unstable_UserBlockingPriority,na=Ze.unstable_NormalPriority,mk=Ze.unstable_LowPriority,Ov=Ze.unstable_IdlePriority,Na=null,kt=null;function yk(e){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Na,e,void 0,(e.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:wk,gk=Math.log,_k=Math.LN2;function wk(e){return e>>>=0,e===0?32:31-(gk(e)/_k|0)|0}var co=64,uo=4194304;function ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ia(e,r){var t=e.pendingLanes;if(t===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=t&268435455;if(a!==0){var s=a&~i;s!==0?n=ni(s):(o&=a,o!==0&&(n=ni(o)))}else a=t&~i,a!==0?n=ni(a):o!==0&&(n=ni(o));if(n===0)return 0;if(r!==0&&r!==n&&!(r&i)&&(i=n&-n,o=r&-r,i>=o||i===16&&(o&4194240)!==0))return r;if(n&4&&(n|=t&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=n;0<r;)t=31-ft(r),i=1<<t,n|=e[t],r&=~i;return n}function Sk(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kk(e,r){for(var t=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ft(o),s=1<<a,c=i[a];c===-1?(!(s&t)||s&n)&&(i[a]=Sk(s,r)):c<=r&&(e.expiredLanes|=s),o&=~s}}function Gc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rv(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function Rs(e){for(var r=[],t=0;31>t;t++)r.push(e);return r}function Wi(e,r,t){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-ft(r),e[r]=t}function Tk(e,r){var t=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var i=31-ft(t),o=1<<i;r[i]=0,n[i]=-1,e[i]=-1,t&=~o}}function ll(e,r){var t=e.entangledLanes|=r;for(e=e.entanglements;t;){var n=31-ft(t),i=1<<n;i&r|e[n]&r&&(e[n]|=r),t&=~i}}var ne=0;function xv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lv,dl,jv,Av,Dv,Yc=!1,lo=[],tr=null,rr=null,nr=null,Si=new Map,ki=new Map,Gt=[],bk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(e,r){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Si.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(r.pointerId)}}function Hn(e,r,t,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:r,domEventName:t,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},r!==null&&(r=Qi(r),r!==null&&dl(r)),e):(e.eventSystemFlags|=n,r=e.targetContainers,i!==null&&r.indexOf(i)===-1&&r.push(i),e)}function Ek(e,r,t,n,i){switch(r){case"focusin":return tr=Hn(tr,e,r,t,n,i),!0;case"dragenter":return rr=Hn(rr,e,r,t,n,i),!0;case"mouseover":return nr=Hn(nr,e,r,t,n,i),!0;case"pointerover":var o=i.pointerId;return Si.set(o,Hn(Si.get(o)||null,e,r,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ki.set(o,Hn(ki.get(o)||null,e,r,t,n,i)),!0}return!1}function Iv(e){var r=Tr(e.target);if(r!==null){var t=Fr(r);if(t!==null){if(r=t.tag,r===13){if(r=Tv(t),r!==null){e.blockedOn=r,Dv(e.priority,function(){jv(t)});return}}else if(r===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $o(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var t=Jc(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);Hc=n,t.target.dispatchEvent(n),Hc=null}else return r=Qi(t),r!==null&&dl(r),e.blockedOn=t,!1;r.shift()}return!0}function Jd(e,r,t){$o(e)&&t.delete(r)}function Ck(){Yc=!1,tr!==null&&$o(tr)&&(tr=null),rr!==null&&$o(rr)&&(rr=null),nr!==null&&$o(nr)&&(nr=null),Si.forEach(Jd),ki.forEach(Jd)}function Qn(e,r){e.blockedOn===r&&(e.blockedOn=null,Yc||(Yc=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,Ck)))}function Ti(e){function r(i){return Qn(i,e)}if(0<lo.length){Qn(lo[0],e);for(var t=1;t<lo.length;t++){var n=lo[t];n.blockedOn===e&&(n.blockedOn=null)}}for(tr!==null&&Qn(tr,e),rr!==null&&Qn(rr,e),nr!==null&&Qn(nr,e),Si.forEach(r),ki.forEach(r),t=0;t<Gt.length;t++)n=Gt[t],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gt.length&&(t=Gt[0],t.blockedOn===null);)Iv(t),t.blockedOn===null&&Gt.shift()}var mn=$t.ReactCurrentBatchConfig,oa=!0;function Pk(e,r,t,n){var i=ne,o=mn.transition;mn.transition=null;try{ne=1,fl(e,r,t,n)}finally{ne=i,mn.transition=o}}function Ok(e,r,t,n){var i=ne,o=mn.transition;mn.transition=null;try{ne=4,fl(e,r,t,n)}finally{ne=i,mn.transition=o}}function fl(e,r,t,n){if(oa){var i=Jc(e,r,t,n);if(i===null)Fs(e,r,n,aa,t),Yd(e,n);else if(Ek(i,e,r,t,n))n.stopPropagation();else if(Yd(e,n),r&4&&-1<bk.indexOf(e)){for(;i!==null;){var o=Qi(i);if(o!==null&&Lv(o),o=Jc(e,r,t,n),o===null&&Fs(e,r,n,aa,t),o===i)break;i=o}i!==null&&n.stopPropagation()}else Fs(e,r,n,null,t)}}var aa=null;function Jc(e,r,t,n){if(aa=null,e=cl(n),e=Tr(e),e!==null)if(r=Fr(e),r===null)e=null;else if(t=r.tag,t===13){if(e=Tv(r),e!==null)return e;e=null}else if(t===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return aa=e,null}function Mv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vk()){case ul:return 1;case Pv:return 4;case na:case mk:return 16;case Ov:return 536870912;default:return 16}default:return 16}}var Jt=null,pl=null,Fo=null;function Nv(){if(Fo)return Fo;var e,r=pl,t=r.length,n,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<t&&r[e]===i[e];e++);var a=t-e;for(n=1;n<=a&&r[t-n]===i[o-n];n++);return Fo=i.slice(e,1<n?1-n:void 0)}function Uo(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function fo(){return!0}function Zd(){return!1}function et(e){function r(t,n,i,o,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fo:Zd,this.isPropagationStopped=Zd,this}return he(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),r}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=et(An),Hi=he({},An,{view:0,detail:0}),Rk=et(Hi),xs,Ls,qn,$a=he({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qn&&(qn&&e.type==="mousemove"?(xs=e.screenX-qn.screenX,Ls=e.screenY-qn.screenY):Ls=xs=0,qn=e),xs)},movementY:function(e){return"movementY"in e?e.movementY:Ls}}),Xd=et($a),xk=he({},$a,{dataTransfer:0}),Lk=et(xk),jk=he({},Hi,{relatedTarget:0}),js=et(jk),Ak=he({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=et(Ak),Ik=he({},An,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mk=et(Ik),Nk=he({},An,{data:0}),ef=et(Nk),$k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vk(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Uk[e])?!!r[e]:!1}function vl(){return Vk}var Bk=he({},Hi,{key:function(e){if(e.key){var r=$k[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(e){return e.type==="keypress"?Uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zk=et(Bk),Wk=he({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tf=et(Wk),Hk=he({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Qk=et(Hk),qk=he({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kk=et(qk),Gk=he({},$a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yk=et(Gk),Jk=[9,13,27,32],ml=Dt&&"CompositionEvent"in window,li=null;Dt&&"documentMode"in document&&(li=document.documentMode);var Zk=Dt&&"TextEvent"in window&&!li,$v=Dt&&(!ml||li&&8<li&&11>=li),rf=" ",nf=!1;function Fv(e,r){switch(e){case"keyup":return Jk.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tn=!1;function Xk(e,r){switch(e){case"compositionend":return Uv(r);case"keypress":return r.which!==32?null:(nf=!0,rf);case"textInput":return e=r.data,e===rf&&nf?null:e;default:return null}}function eT(e,r){if(tn)return e==="compositionend"||!ml&&Fv(e,r)?(e=Nv(),Fo=pl=Jt=null,tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return $v&&r.locale!=="ko"?null:r.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function of(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!tT[e.type]:r==="textarea"}function Vv(e,r,t,n){gv(n),r=sa(r,"onChange"),0<r.length&&(t=new hl("onChange","change",null,t,n),e.push({event:t,listeners:r}))}var di=null,bi=null;function rT(e){Zv(e,0)}function Fa(e){var r=on(e);if(dv(r))return e}function nT(e,r){if(e==="change")return r}var Bv=!1;if(Dt){var As;if(Dt){var Ds="oninput"in document;if(!Ds){var af=document.createElement("div");af.setAttribute("oninput","return;"),Ds=typeof af.oninput=="function"}As=Ds}else As=!1;Bv=As&&(!document.documentMode||9<document.documentMode)}function sf(){di&&(di.detachEvent("onpropertychange",zv),bi=di=null)}function zv(e){if(e.propertyName==="value"&&Fa(bi)){var r=[];Vv(r,bi,e,cl(e)),kv(rT,r)}}function iT(e,r,t){e==="focusin"?(sf(),di=r,bi=t,di.attachEvent("onpropertychange",zv)):e==="focusout"&&sf()}function oT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(bi)}function aT(e,r){if(e==="click")return Fa(r)}function sT(e,r){if(e==="input"||e==="change")return Fa(r)}function cT(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ht=typeof Object.is=="function"?Object.is:cT;function Ei(e,r){if(ht(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!Ac.call(r,i)||!ht(e[i],r[i]))return!1}return!0}function cf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uf(e,r){var t=cf(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=r&&n>=r)return{node:t,offset:r-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=cf(t)}}function Wv(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Wv(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Hv(){for(var e=window,r=ea();r instanceof e.HTMLIFrameElement;){try{var t=typeof r.contentWindow.location.href=="string"}catch{t=!1}if(t)e=r.contentWindow;else break;r=ea(e.document)}return r}function yl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function uT(e){var r=Hv(),t=e.focusedElem,n=e.selectionRange;if(r!==t&&t&&t.ownerDocument&&Wv(t.ownerDocument.documentElement,t)){if(n!==null&&yl(t)){if(r=n.start,e=n.end,e===void 0&&(e=r),"selectionStart"in t)t.selectionStart=r,t.selectionEnd=Math.min(e,t.value.length);else if(e=(r=t.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var i=t.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=uf(t,o);var a=uf(t,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(r=r.createRange(),r.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(r),e.extend(a.node,a.offset)):(r.setEnd(a.node,a.offset),e.addRange(r)))}}for(r=[],e=t;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<r.length;t++)e=r[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lT=Dt&&"documentMode"in document&&11>=document.documentMode,rn=null,Zc=null,fi=null,Xc=!1;function lf(e,r,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Xc||rn==null||rn!==ea(n)||(n=rn,"selectionStart"in n&&yl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fi&&Ei(fi,n)||(fi=n,n=sa(Zc,"onSelect"),0<n.length&&(r=new hl("onSelect","select",null,r,t),e.push({event:r,listeners:n}),r.target=rn)))}function po(e,r){var t={};return t[e.toLowerCase()]=r.toLowerCase(),t["Webkit"+e]="webkit"+r,t["Moz"+e]="moz"+r,t}var nn={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},Is={},Qv={};Dt&&(Qv=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function Ua(e){if(Is[e])return Is[e];if(!nn[e])return e;var r=nn[e],t;for(t in r)if(r.hasOwnProperty(t)&&t in Qv)return Is[e]=r[t];return e}var qv=Ua("animationend"),Kv=Ua("animationiteration"),Gv=Ua("animationstart"),Yv=Ua("transitionend"),Jv=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,r){Jv.set(e,r),$r(r,[e])}for(var Ms=0;Ms<df.length;Ms++){var Ns=df[Ms],dT=Ns.toLowerCase(),fT=Ns[0].toUpperCase()+Ns.slice(1);fr(dT,"on"+fT)}fr(qv,"onAnimationEnd");fr(Kv,"onAnimationIteration");fr(Gv,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Yv,"onTransitionEnd");Sn("onMouseEnter",["mouseout","mouseover"]);Sn("onMouseLeave",["mouseout","mouseover"]);Sn("onPointerEnter",["pointerout","pointerover"]);Sn("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function ff(e,r,t){var n=e.type||"unknown-event";e.currentTarget=t,dk(n,r,void 0,e),e.currentTarget=null}function Zv(e,r){r=(r&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],i=n.event;n=n.listeners;e:{var o=void 0;if(r)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;ff(i,s,u),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;ff(i,s,u),o=c}}}if(ra)throw e=Kc,ra=!1,Kc=null,e}function ue(e,r){var t=r[iu];t===void 0&&(t=r[iu]=new Set);var n=e+"__bubble";t.has(n)||(Xv(r,e,2,!1),t.add(n))}function $s(e,r,t){var n=0;r&&(n|=4),Xv(t,e,n,r)}var ho="_reactListening"+Math.random().toString(36).slice(2);function Ci(e){if(!e[ho]){e[ho]=!0,av.forEach(function(t){t!=="selectionchange"&&(pT.has(t)||$s(t,!1,e),$s(t,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[ho]||(r[ho]=!0,$s("selectionchange",!1,r))}}function Xv(e,r,t,n){switch(Mv(r)){case 1:var i=Pk;break;case 4:i=Ok;break;default:i=fl}t=i.bind(null,r,t,e),i=void 0,!qc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(r,t,{capture:!0,passive:i}):e.addEventListener(r,t,!0):i!==void 0?e.addEventListener(r,t,{passive:i}):e.addEventListener(r,t,!1)}function Fs(e,r,t,n,i){var o=n;if(!(r&1)&&!(r&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Tr(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}kv(function(){var u=o,l=cl(t),d=[];e:{var f=Jv.get(e);if(f!==void 0){var g=hl,v=e;switch(e){case"keypress":if(Uo(t)===0)break e;case"keydown":case"keyup":g=zk;break;case"focusin":v="focus",g=js;break;case"focusout":v="blur",g=js;break;case"beforeblur":case"afterblur":g=js;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Qk;break;case qv:case Kv:case Gv:g=Dk;break;case Yv:g=Kk;break;case"scroll":g=Rk;break;case"wheel":g=Yk;break;case"copy":case"cut":case"paste":g=Mk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=tf}var _=(r&4)!==0,w=!_&&e==="scroll",y=_?f!==null?f+"Capture":null:f;_=[];for(var p=u,h;p!==null;){h=p;var S=h.stateNode;if(h.tag===5&&S!==null&&(h=S,y!==null&&(S=wi(p,y),S!=null&&_.push(Pi(p,S,h)))),w)break;p=p.return}0<_.length&&(f=new g(f,v,null,t,l),d.push({event:f,listeners:_}))}}if(!(r&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&t!==Hc&&(v=t.relatedTarget||t.fromElement)&&(Tr(v)||v[It]))break e;if((g||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=u,v=v?Tr(v):null,v!==null&&(w=Fr(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=Xd,S="onMouseLeave",y="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(_=tf,S="onPointerLeave",y="onPointerEnter",p="pointer"),w=g==null?f:on(g),h=v==null?f:on(v),f=new _(S,p+"leave",g,t,l),f.target=w,f.relatedTarget=h,S=null,Tr(l)===u&&(_=new _(y,p+"enter",v,t,l),_.target=h,_.relatedTarget=w,S=_),w=S,g&&v)t:{for(_=g,y=v,p=0,h=_;h;h=Qr(h))p++;for(h=0,S=y;S;S=Qr(S))h++;for(;0<p-h;)_=Qr(_),p--;for(;0<h-p;)y=Qr(y),h--;for(;p--;){if(_===y||y!==null&&_===y.alternate)break t;_=Qr(_),y=Qr(y)}_=null}else _=null;g!==null&&pf(d,f,g,_,!1),v!==null&&w!==null&&pf(d,w,v,_,!0)}}e:{if(f=u?on(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var T=nT;else if(of(f))if(Bv)T=sT;else{T=oT;var b=iT}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=aT);if(T&&(T=T(e,u))){Vv(d,T,t,l);break e}b&&b(e,f,u),e==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Uc(f,"number",f.value)}switch(b=u?on(u):window,e){case"focusin":(of(b)||b.contentEditable==="true")&&(rn=b,Zc=u,fi=null);break;case"focusout":fi=Zc=rn=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,lf(d,t,l);break;case"selectionchange":if(lT)break;case"keydown":case"keyup":lf(d,t,l)}var E;if(ml)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else tn?Fv(e,t)&&(C="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&($v&&t.locale!=="ko"&&(tn||C!=="onCompositionStart"?C==="onCompositionEnd"&&tn&&(E=Nv()):(Jt=l,pl="value"in Jt?Jt.value:Jt.textContent,tn=!0)),b=sa(u,C),0<b.length&&(C=new ef(C,e,null,t,l),d.push({event:C,listeners:b}),E?C.data=E:(E=Uv(t),E!==null&&(C.data=E)))),(E=Zk?Xk(e,t):eT(e,t))&&(u=sa(u,"onBeforeInput"),0<u.length&&(l=new ef("onBeforeInput","beforeinput",null,t,l),d.push({event:l,listeners:u}),l.data=E))}Zv(d,r)})}function Pi(e,r,t){return{instance:e,listener:r,currentTarget:t}}function sa(e,r){for(var t=r+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=wi(e,t),o!=null&&n.unshift(Pi(e,o,i)),o=wi(e,r),o!=null&&n.push(Pi(e,o,i))),e=e.return}return n}function Qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pf(e,r,t,n,i){for(var o=r._reactName,a=[];t!==null&&t!==n;){var s=t,c=s.alternate,u=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&u!==null&&(s=u,i?(c=wi(t,o),c!=null&&a.unshift(Pi(t,c,s))):i||(c=wi(t,o),c!=null&&a.push(Pi(t,c,s)))),t=t.return}a.length!==0&&e.push({event:r,listeners:a})}var hT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function hf(e){return(typeof e=="string"?e:""+e).replace(hT,`
`).replace(vT,"")}function vo(e,r,t){if(r=hf(r),hf(e)!==r&&t)throw Error(j(425))}function ca(){}var eu=null,tu=null;function ru(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0,vf=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof vf<"u"?function(e){return vf.resolve(null).then(e).catch(gT)}:nu;function gT(e){setTimeout(function(){throw e})}function Us(e,r){var t=r,n=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){e.removeChild(i),Ti(r);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Ti(r)}function ir(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function mf(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(r===0)return e;r--}else t==="/$"&&r++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Dn,Oi="__reactProps$"+Dn,It="__reactContainer$"+Dn,iu="__reactEvents$"+Dn,_T="__reactListeners$"+Dn,wT="__reactHandles$"+Dn;function Tr(e){var r=e[wt];if(r)return r;for(var t=e.parentNode;t;){if(r=t[It]||t[wt]){if(t=r.alternate,r.child!==null||t!==null&&t.child!==null)for(e=mf(e);e!==null;){if(t=e[wt])return t;e=mf(e)}return r}e=t,t=e.parentNode}return null}function Qi(e){return e=e[wt]||e[It],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function on(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Va(e){return e[Oi]||null}var ou=[],an=-1;function pr(e){return{current:e}}function le(e){0>an||(e.current=ou[an],ou[an]=null,an--)}function ce(e,r){an++,ou[an]=e.current,e.current=r}var dr={},Le=pr(dr),Ve=pr(!1),Lr=dr;function kn(e,r){var t=e.type.contextTypes;if(!t)return dr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=r[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),i}function Be(e){return e=e.childContextTypes,e!=null}function ua(){le(Ve),le(Le)}function yf(e,r,t){if(Le.current!==dr)throw Error(j(168));ce(Le,r),ce(Ve,t)}function em(e,r,t){var n=e.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in r))throw Error(j(108,ik(e)||"Unknown",i));return he({},t,n)}function la(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Lr=Le.current,ce(Le,e),ce(Ve,Ve.current),!0}function gf(e,r,t){var n=e.stateNode;if(!n)throw Error(j(169));t?(e=em(e,r,Lr),n.__reactInternalMemoizedMergedChildContext=e,le(Ve),le(Le),ce(Le,e)):le(Ve),ce(Ve,t)}var Ot=null,Ba=!1,Vs=!1;function tm(e){Ot===null?Ot=[e]:Ot.push(e)}function ST(e){Ba=!0,tm(e)}function hr(){if(!Vs&&Ot!==null){Vs=!0;var e=0,r=ne;try{var t=Ot;for(ne=1;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}Ot=null,Ba=!1}catch(i){throw Ot!==null&&(Ot=Ot.slice(e+1)),Cv(ul,hr),i}finally{ne=r,Vs=!1}}return null}var sn=[],cn=0,da=null,fa=0,tt=[],rt=0,jr=null,Rt=1,xt="";function wr(e,r){sn[cn++]=fa,sn[cn++]=da,da=e,fa=r}function rm(e,r,t){tt[rt++]=Rt,tt[rt++]=xt,tt[rt++]=jr,jr=e;var n=Rt;e=xt;var i=32-ft(n)-1;n&=~(1<<i),t+=1;var o=32-ft(r)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Rt=1<<32-ft(r)+i|t<<i|n,xt=o+e}else Rt=1<<o|t<<i|n,xt=e}function gl(e){e.return!==null&&(wr(e,1),rm(e,1,0))}function _l(e){for(;e===da;)da=sn[--cn],sn[cn]=null,fa=sn[--cn],sn[cn]=null;for(;e===jr;)jr=tt[--rt],tt[rt]=null,xt=tt[--rt],tt[rt]=null,Rt=tt[--rt],tt[rt]=null}var Ye=null,Ge=null,de=!1,dt=null;function nm(e,r){var t=nt(5,null,null,0);t.elementType="DELETED",t.stateNode=r,t.return=e,r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)}function _f(e,r){switch(e.tag){case 5:var t=e.type;return r=r.nodeType!==1||t.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Ye=e,Ge=ir(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Ye=e,Ge=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(t=jr!==null?{id:Rt,overflow:xt}:null,e.memoizedState={dehydrated:r,treeContext:t,retryLane:1073741824},t=nt(18,null,null,0),t.stateNode=r,t.return=e,e.child=t,Ye=e,Ge=null,!0):!1;default:return!1}}function au(e){return(e.mode&1)!==0&&(e.flags&128)===0}function su(e){if(de){var r=Ge;if(r){var t=r;if(!_f(e,r)){if(au(e))throw Error(j(418));r=ir(t.nextSibling);var n=Ye;r&&_f(e,r)?nm(n,t):(e.flags=e.flags&-4097|2,de=!1,Ye=e)}}else{if(au(e))throw Error(j(418));e.flags=e.flags&-4097|2,de=!1,Ye=e}}}function wf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function mo(e){if(e!==Ye)return!1;if(!de)return wf(e),de=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!ru(e.type,e.memoizedProps)),r&&(r=Ge)){if(au(e))throw im(),Error(j(418));for(;r;)nm(e,r),r=ir(r.nextSibling)}if(wf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(r===0){Ge=ir(e.nextSibling);break e}r--}else t!=="$"&&t!=="$!"&&t!=="$?"||r++}e=e.nextSibling}Ge=null}}else Ge=Ye?ir(e.stateNode.nextSibling):null;return!0}function im(){for(var e=Ge;e;)e=ir(e.nextSibling)}function Tn(){Ge=Ye=null,de=!1}function wl(e){dt===null?dt=[e]:dt.push(e)}var kT=$t.ReactCurrentBatchConfig;function Kn(e,r,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(j(309));var n=t.stateNode}if(!n)throw Error(j(147,e));var i=n,o=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},r._stringRef=o,r)}if(typeof e!="string")throw Error(j(284));if(!t._owner)throw Error(j(290,e))}return e}function yo(e,r){throw e=Object.prototype.toString.call(r),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Sf(e){var r=e._init;return r(e._payload)}function om(e){function r(y,p){if(e){var h=y.deletions;h===null?(y.deletions=[p],y.flags|=16):h.push(p)}}function t(y,p){if(!e)return null;for(;p!==null;)r(y,p),p=p.sibling;return null}function n(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function i(y,p){return y=cr(y,p),y.index=0,y.sibling=null,y}function o(y,p,h){return y.index=h,e?(h=y.alternate,h!==null?(h=h.index,h<p?(y.flags|=2,p):h):(y.flags|=2,p)):(y.flags|=1048576,p)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,p,h,S){return p===null||p.tag!==6?(p=Ks(h,y.mode,S),p.return=y,p):(p=i(p,h),p.return=y,p)}function c(y,p,h,S){var T=h.type;return T===en?l(y,p,h.props.children,S,h.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===qt&&Sf(T)===p.type)?(S=i(p,h.props),S.ref=Kn(y,p,h),S.return=y,S):(S=qo(h.type,h.key,h.props,null,y.mode,S),S.ref=Kn(y,p,h),S.return=y,S)}function u(y,p,h,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==h.containerInfo||p.stateNode.implementation!==h.implementation?(p=Gs(h,y.mode,S),p.return=y,p):(p=i(p,h.children||[]),p.return=y,p)}function l(y,p,h,S,T){return p===null||p.tag!==7?(p=Or(h,y.mode,S,T),p.return=y,p):(p=i(p,h),p.return=y,p)}function d(y,p,h){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ks(""+p,y.mode,h),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case oo:return h=qo(p.type,p.key,p.props,null,y.mode,h),h.ref=Kn(y,null,p),h.return=y,h;case Xr:return p=Gs(p,y.mode,h),p.return=y,p;case qt:var S=p._init;return d(y,S(p._payload),h)}if(ri(p)||zn(p))return p=Or(p,y.mode,h,null),p.return=y,p;yo(y,p)}return null}function f(y,p,h,S){var T=p!==null?p.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return T!==null?null:s(y,p,""+h,S);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case oo:return h.key===T?c(y,p,h,S):null;case Xr:return h.key===T?u(y,p,h,S):null;case qt:return T=h._init,f(y,p,T(h._payload),S)}if(ri(h)||zn(h))return T!==null?null:l(y,p,h,S,null);yo(y,h)}return null}function g(y,p,h,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(h)||null,s(p,y,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case oo:return y=y.get(S.key===null?h:S.key)||null,c(p,y,S,T);case Xr:return y=y.get(S.key===null?h:S.key)||null,u(p,y,S,T);case qt:var b=S._init;return g(y,p,h,b(S._payload),T)}if(ri(S)||zn(S))return y=y.get(h)||null,l(p,y,S,T,null);yo(p,S)}return null}function v(y,p,h,S){for(var T=null,b=null,E=p,C=p=0,A=null;E!==null&&C<h.length;C++){E.index>C?(A=E,E=null):A=E.sibling;var I=f(y,E,h[C],S);if(I===null){E===null&&(E=A);break}e&&E&&I.alternate===null&&r(y,E),p=o(I,p,C),b===null?T=I:b.sibling=I,b=I,E=A}if(C===h.length)return t(y,E),de&&wr(y,C),T;if(E===null){for(;C<h.length;C++)E=d(y,h[C],S),E!==null&&(p=o(E,p,C),b===null?T=E:b.sibling=E,b=E);return de&&wr(y,C),T}for(E=n(y,E);C<h.length;C++)A=g(E,y,C,h[C],S),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?C:A.key),p=o(A,p,C),b===null?T=A:b.sibling=A,b=A);return e&&E.forEach(function(Z){return r(y,Z)}),de&&wr(y,C),T}function _(y,p,h,S){var T=zn(h);if(typeof T!="function")throw Error(j(150));if(h=T.call(h),h==null)throw Error(j(151));for(var b=T=null,E=p,C=p=0,A=null,I=h.next();E!==null&&!I.done;C++,I=h.next()){E.index>C?(A=E,E=null):A=E.sibling;var Z=f(y,E,I.value,S);if(Z===null){E===null&&(E=A);break}e&&E&&Z.alternate===null&&r(y,E),p=o(Z,p,C),b===null?T=Z:b.sibling=Z,b=Z,E=A}if(I.done)return t(y,E),de&&wr(y,C),T;if(E===null){for(;!I.done;C++,I=h.next())I=d(y,I.value,S),I!==null&&(p=o(I,p,C),b===null?T=I:b.sibling=I,b=I);return de&&wr(y,C),T}for(E=n(y,E);!I.done;C++,I=h.next())I=g(E,y,C,I.value,S),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?C:I.key),p=o(I,p,C),b===null?T=I:b.sibling=I,b=I);return e&&E.forEach(function(L){return r(y,L)}),de&&wr(y,C),T}function w(y,p,h,S){if(typeof h=="object"&&h!==null&&h.type===en&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case oo:e:{for(var T=h.key,b=p;b!==null;){if(b.key===T){if(T=h.type,T===en){if(b.tag===7){t(y,b.sibling),p=i(b,h.props.children),p.return=y,y=p;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===qt&&Sf(T)===b.type){t(y,b.sibling),p=i(b,h.props),p.ref=Kn(y,b,h),p.return=y,y=p;break e}t(y,b);break}else r(y,b);b=b.sibling}h.type===en?(p=Or(h.props.children,y.mode,S,h.key),p.return=y,y=p):(S=qo(h.type,h.key,h.props,null,y.mode,S),S.ref=Kn(y,p,h),S.return=y,y=S)}return a(y);case Xr:e:{for(b=h.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===h.containerInfo&&p.stateNode.implementation===h.implementation){t(y,p.sibling),p=i(p,h.children||[]),p.return=y,y=p;break e}else{t(y,p);break}else r(y,p);p=p.sibling}p=Gs(h,y.mode,S),p.return=y,y=p}return a(y);case qt:return b=h._init,w(y,p,b(h._payload),S)}if(ri(h))return v(y,p,h,S);if(zn(h))return _(y,p,h,S);yo(y,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,p!==null&&p.tag===6?(t(y,p.sibling),p=i(p,h),p.return=y,y=p):(t(y,p),p=Ks(h,y.mode,S),p.return=y,y=p),a(y)):t(y,p)}return w}var bn=om(!0),am=om(!1),pa=pr(null),ha=null,un=null,Sl=null;function kl(){Sl=un=ha=null}function Tl(e){var r=pa.current;le(pa),e._currentValue=r}function cu(e,r,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),e===t)break;e=e.return}}function yn(e,r){ha=e,Sl=un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&r&&(Ue=!0),e.firstContext=null)}function ot(e){var r=e._currentValue;if(Sl!==e)if(e={context:e,memoizedValue:r,next:null},un===null){if(ha===null)throw Error(j(308));un=e,ha.dependencies={lanes:0,firstContext:e}}else un=un.next=e;return r}var br=null;function bl(e){br===null?br=[e]:br.push(e)}function sm(e,r,t,n){var i=r.interleaved;return i===null?(t.next=t,bl(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mt(e,n)}function Mt(e,r){e.lanes|=r;var t=e.alternate;for(t!==null&&(t.lanes|=r),t=e,e=e.return;e!==null;)e.childLanes|=r,t=e.alternate,t!==null&&(t.childLanes|=r),t=e,e=e.return;return t.tag===3?t.stateNode:null}var Kt=!1;function El(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function or(e,r,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,te&2){var i=n.pending;return i===null?r.next=r:(r.next=i.next,i.next=r),n.pending=r,Mt(e,t)}return i=n.interleaved,i===null?(r.next=r,bl(n)):(r.next=i.next,i.next=r),n.interleaved=r,Mt(e,t)}function Vo(e,r,t){if(r=r.updateQueue,r!==null&&(r=r.shared,(t&4194240)!==0)){var n=r.lanes;n&=e.pendingLanes,t|=n,r.lanes=t,ll(e,t)}}function kf(e,r){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=a:o=o.next=a,t=t.next}while(t!==null);o===null?i=o=r:o=o.next=r}else i=o=r;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=r:e.next=r,t.lastBaseUpdate=r}function va(e,r,t,n){var i=e.updateQueue;Kt=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,s=l.lastBaseUpdate,s!==a&&(s===null?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,l=u=c=null,s=o;do{var f=s.lane,g=s.eventTime;if((n&f)===f){l!==null&&(l=l.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,_=s;switch(f=r,g=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=he({},d,f);break e;case 2:Kt=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else g={eventTime:g,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},l===null?(u=l=g,c=d):l=l.next=g,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(l===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,r=i.shared.interleaved,r!==null){i=r;do a|=i.lane,i=i.next;while(i!==r)}else o===null&&(i.shared.lanes=0);Dr|=a,e.lanes=a,e.memoizedState=d}}function Tf(e,r,t){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var n=e[r],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(j(191,i));i.call(n)}}}var qi={},Tt=pr(qi),Ri=pr(qi),xi=pr(qi);function Er(e){if(e===qi)throw Error(j(174));return e}function Cl(e,r){switch(ce(xi,r),ce(Ri,e),ce(Tt,qi),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Bc(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Bc(r,e)}le(Tt),ce(Tt,r)}function En(){le(Tt),le(Ri),le(xi)}function um(e){Er(xi.current);var r=Er(Tt.current),t=Bc(r,e.type);r!==t&&(ce(Ri,e),ce(Tt,t))}function Pl(e){Ri.current===e&&(le(Tt),le(Ri))}var fe=pr(0);function ma(e){for(var r=e;r!==null;){if(r.tag===13){var t=r.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bs=[];function Ol(){for(var e=0;e<Bs.length;e++)Bs[e]._workInProgressVersionPrimary=null;Bs.length=0}var Bo=$t.ReactCurrentDispatcher,zs=$t.ReactCurrentBatchConfig,Ar=0,pe=null,we=null,ke=null,ya=!1,pi=!1,Li=0,TT=0;function Oe(){throw Error(j(321))}function Rl(e,r){if(r===null)return!1;for(var t=0;t<r.length&&t<e.length;t++)if(!ht(e[t],r[t]))return!1;return!0}function xl(e,r,t,n,i,o){if(Ar=o,pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Bo.current=e===null||e.memoizedState===null?PT:OT,e=t(n,i),pi){o=0;do{if(pi=!1,Li=0,25<=o)throw Error(j(301));o+=1,ke=we=null,r.updateQueue=null,Bo.current=RT,e=t(n,i)}while(pi)}if(Bo.current=ga,r=we!==null&&we.next!==null,Ar=0,ke=we=pe=null,ya=!1,r)throw Error(j(300));return e}function Ll(){var e=Li!==0;return Li=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?pe.memoizedState=ke=e:ke=ke.next=e,ke}function at(){if(we===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var r=ke===null?pe.memoizedState:ke.next;if(r!==null)ke=r,we=e;else{if(e===null)throw Error(j(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?pe.memoizedState=ke=e:ke=ke.next=e}return ke}function ji(e,r){return typeof r=="function"?r(e):r}function Ws(e){var r=at(),t=r.queue;if(t===null)throw Error(j(311));t.lastRenderedReducer=e;var n=we,i=n.baseQueue,o=t.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,u=o;do{var l=u.lane;if((Ar&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=d,a=n):c=c.next=d,pe.lanes|=l,Dr|=l}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=s,ht(n,r.memoizedState)||(Ue=!0),r.memoizedState=n,r.baseState=a,r.baseQueue=c,t.lastRenderedState=n}if(e=t.interleaved,e!==null){i=e;do o=i.lane,pe.lanes|=o,Dr|=o,i=i.next;while(i!==e)}else i===null&&(t.lanes=0);return[r.memoizedState,t.dispatch]}function Hs(e){var r=at(),t=r.queue;if(t===null)throw Error(j(311));t.lastRenderedReducer=e;var n=t.dispatch,i=t.pending,o=r.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ht(o,r.memoizedState)||(Ue=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),t.lastRenderedState=o}return[o,n]}function lm(){}function dm(e,r){var t=pe,n=at(),i=r(),o=!ht(n.memoizedState,i);if(o&&(n.memoizedState=i,Ue=!0),n=n.queue,jl(hm.bind(null,t,n,e),[e]),n.getSnapshot!==r||o||ke!==null&&ke.memoizedState.tag&1){if(t.flags|=2048,Ai(9,pm.bind(null,t,n,i,r),void 0,null),Te===null)throw Error(j(349));Ar&30||fm(t,r,i)}return i}function fm(e,r,t){e.flags|=16384,e={getSnapshot:r,value:t},r=pe.updateQueue,r===null?(r={lastEffect:null,stores:null},pe.updateQueue=r,r.stores=[e]):(t=r.stores,t===null?r.stores=[e]:t.push(e))}function pm(e,r,t,n){r.value=t,r.getSnapshot=n,vm(r)&&mm(e)}function hm(e,r,t){return t(function(){vm(r)&&mm(e)})}function vm(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!ht(e,t)}catch{return!0}}function mm(e){var r=Mt(e,1);r!==null&&pt(r,e,1,-1)}function bf(e){var r=gt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},r.queue=e,e=e.dispatch=CT.bind(null,pe,e),[r.memoizedState,e]}function Ai(e,r,t,n){return e={tag:e,create:r,destroy:t,deps:n,next:null},r=pe.updateQueue,r===null?(r={lastEffect:null,stores:null},pe.updateQueue=r,r.lastEffect=e.next=e):(t=r.lastEffect,t===null?r.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,r.lastEffect=e)),e}function ym(){return at().memoizedState}function zo(e,r,t,n){var i=gt();pe.flags|=e,i.memoizedState=Ai(1|r,t,void 0,n===void 0?null:n)}function za(e,r,t,n){var i=at();n=n===void 0?null:n;var o=void 0;if(we!==null){var a=we.memoizedState;if(o=a.destroy,n!==null&&Rl(n,a.deps)){i.memoizedState=Ai(r,t,o,n);return}}pe.flags|=e,i.memoizedState=Ai(1|r,t,o,n)}function Ef(e,r){return zo(8390656,8,e,r)}function jl(e,r){return za(2048,8,e,r)}function gm(e,r){return za(4,2,e,r)}function _m(e,r){return za(4,4,e,r)}function wm(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Sm(e,r,t){return t=t!=null?t.concat([e]):null,za(4,4,wm.bind(null,r,e),t)}function Al(){}function km(e,r){var t=at();r=r===void 0?null:r;var n=t.memoizedState;return n!==null&&r!==null&&Rl(r,n[1])?n[0]:(t.memoizedState=[e,r],e)}function Tm(e,r){var t=at();r=r===void 0?null:r;var n=t.memoizedState;return n!==null&&r!==null&&Rl(r,n[1])?n[0]:(e=e(),t.memoizedState=[e,r],e)}function bm(e,r,t){return Ar&21?(ht(t,r)||(t=Rv(),pe.lanes|=t,Dr|=t,e.baseState=!0),r):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=t)}function bT(e,r){var t=ne;ne=t!==0&&4>t?t:4,e(!0);var n=zs.transition;zs.transition={};try{e(!1),r()}finally{ne=t,zs.transition=n}}function Em(){return at().memoizedState}function ET(e,r,t){var n=sr(e);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Cm(e))Pm(r,t);else if(t=sm(e,r,t,n),t!==null){var i=De();pt(t,e,n,i),Om(t,r,n)}}function CT(e,r,t){var n=sr(e),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Cm(e))Pm(r,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var a=r.lastRenderedState,s=o(a,t);if(i.hasEagerState=!0,i.eagerState=s,ht(s,a)){var c=r.interleaved;c===null?(i.next=i,bl(r)):(i.next=c.next,c.next=i),r.interleaved=i;return}}catch{}finally{}t=sm(e,r,i,n),t!==null&&(i=De(),pt(t,e,n,i),Om(t,r,n))}}function Cm(e){var r=e.alternate;return e===pe||r!==null&&r===pe}function Pm(e,r){pi=ya=!0;var t=e.pending;t===null?r.next=r:(r.next=t.next,t.next=r),e.pending=r}function Om(e,r,t){if(t&4194240){var n=r.lanes;n&=e.pendingLanes,t|=n,r.lanes=t,ll(e,t)}}var ga={readContext:ot,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},PT={readContext:ot,useCallback:function(e,r){return gt().memoizedState=[e,r===void 0?null:r],e},useContext:ot,useEffect:Ef,useImperativeHandle:function(e,r,t){return t=t!=null?t.concat([e]):null,zo(4194308,4,wm.bind(null,r,e),t)},useLayoutEffect:function(e,r){return zo(4194308,4,e,r)},useInsertionEffect:function(e,r){return zo(4,2,e,r)},useMemo:function(e,r){var t=gt();return r=r===void 0?null:r,e=e(),t.memoizedState=[e,r],e},useReducer:function(e,r,t){var n=gt();return r=t!==void 0?t(r):r,n.memoizedState=n.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=ET.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var r=gt();return e={current:e},r.memoizedState=e},useState:bf,useDebugValue:Al,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=bf(!1),r=e[0];return e=bT.bind(null,e[1]),gt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,t){var n=pe,i=gt();if(de){if(t===void 0)throw Error(j(407));t=t()}else{if(t=r(),Te===null)throw Error(j(349));Ar&30||fm(n,r,t)}i.memoizedState=t;var o={value:t,getSnapshot:r};return i.queue=o,Ef(hm.bind(null,n,o,e),[e]),n.flags|=2048,Ai(9,pm.bind(null,n,o,t,r),void 0,null),t},useId:function(){var e=gt(),r=Te.identifierPrefix;if(de){var t=xt,n=Rt;t=(n&~(1<<32-ft(n)-1)).toString(32)+t,r=":"+r+"R"+t,t=Li++,0<t&&(r+="H"+t.toString(32)),r+=":"}else t=TT++,r=":"+r+"r"+t.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},OT={readContext:ot,useCallback:km,useContext:ot,useEffect:jl,useImperativeHandle:Sm,useInsertionEffect:gm,useLayoutEffect:_m,useMemo:Tm,useReducer:Ws,useRef:ym,useState:function(){return Ws(ji)},useDebugValue:Al,useDeferredValue:function(e){var r=at();return bm(r,we.memoizedState,e)},useTransition:function(){var e=Ws(ji)[0],r=at().memoizedState;return[e,r]},useMutableSource:lm,useSyncExternalStore:dm,useId:Em,unstable_isNewReconciler:!1},RT={readContext:ot,useCallback:km,useContext:ot,useEffect:jl,useImperativeHandle:Sm,useInsertionEffect:gm,useLayoutEffect:_m,useMemo:Tm,useReducer:Hs,useRef:ym,useState:function(){return Hs(ji)},useDebugValue:Al,useDeferredValue:function(e){var r=at();return we===null?r.memoizedState=e:bm(r,we.memoizedState,e)},useTransition:function(){var e=Hs(ji)[0],r=at().memoizedState;return[e,r]},useMutableSource:lm,useSyncExternalStore:dm,useId:Em,unstable_isNewReconciler:!1};function ct(e,r){if(e&&e.defaultProps){r=he({},r),e=e.defaultProps;for(var t in e)r[t]===void 0&&(r[t]=e[t]);return r}return r}function uu(e,r,t,n){r=e.memoizedState,t=t(n,r),t=t==null?r:he({},r,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var Wa={isMounted:function(e){return(e=e._reactInternals)?Fr(e)===e:!1},enqueueSetState:function(e,r,t){e=e._reactInternals;var n=De(),i=sr(e),o=At(n,i);o.payload=r,t!=null&&(o.callback=t),r=or(e,o,i),r!==null&&(pt(r,e,i,n),Vo(r,e,i))},enqueueReplaceState:function(e,r,t){e=e._reactInternals;var n=De(),i=sr(e),o=At(n,i);o.tag=1,o.payload=r,t!=null&&(o.callback=t),r=or(e,o,i),r!==null&&(pt(r,e,i,n),Vo(r,e,i))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var t=De(),n=sr(e),i=At(t,n);i.tag=2,r!=null&&(i.callback=r),r=or(e,i,n),r!==null&&(pt(r,e,n,t),Vo(r,e,n))}};function Cf(e,r,t,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):r.prototype&&r.prototype.isPureReactComponent?!Ei(t,n)||!Ei(i,o):!0}function Rm(e,r,t){var n=!1,i=dr,o=r.contextType;return typeof o=="object"&&o!==null?o=ot(o):(i=Be(r)?Lr:Le.current,n=r.contextTypes,o=(n=n!=null)?kn(e,i):dr),r=new r(t,o),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Wa,e.stateNode=r,r._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),r}function Pf(e,r,t,n){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(t,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(t,n),r.state!==e&&Wa.enqueueReplaceState(r,r.state,null)}function lu(e,r,t,n){var i=e.stateNode;i.props=t,i.state=e.memoizedState,i.refs={},El(e);var o=r.contextType;typeof o=="object"&&o!==null?i.context=ot(o):(o=Be(r)?Lr:Le.current,i.context=kn(e,o)),i.state=e.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(uu(e,r,o,t),i.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Wa.enqueueReplaceState(i,i.state,null),va(e,t,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Cn(e,r){try{var t="",n=r;do t+=nk(n),n=n.return;while(n);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:r,stack:i,digest:null}}function Qs(e,r,t){return{value:e,source:null,stack:t??null,digest:r??null}}function du(e,r){try{console.error(r.value)}catch(t){setTimeout(function(){throw t})}}var xT=typeof WeakMap=="function"?WeakMap:Map;function xm(e,r,t){t=At(-1,t),t.tag=3,t.payload={element:null};var n=r.value;return t.callback=function(){wa||(wa=!0,Su=n),du(e,r)},t}function Lm(e,r,t){t=At(-1,t),t.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=r.value;t.payload=function(){return n(i)},t.callback=function(){du(e,r)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){du(e,r),typeof n!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})}),t}function Of(e,r,t){var n=e.pingCache;if(n===null){n=e.pingCache=new xT;var i=new Set;n.set(r,i)}else i=n.get(r),i===void 0&&(i=new Set,n.set(r,i));i.has(t)||(i.add(t),e=WT.bind(null,e,r,t),r.then(e,e))}function Rf(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function xf(e,r,t,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===r?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(r=At(-1,1),r.tag=2,or(t,r,1))),t.lanes|=1),e)}var LT=$t.ReactCurrentOwner,Ue=!1;function Ae(e,r,t,n){r.child=e===null?am(r,null,t,n):bn(r,e.child,t,n)}function Lf(e,r,t,n,i){t=t.render;var o=r.ref;return yn(r,i),n=xl(e,r,t,n,o,i),t=Ll(),e!==null&&!Ue?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~i,Nt(e,r,i)):(de&&t&&gl(r),r.flags|=1,Ae(e,r,n,i),r.child)}function jf(e,r,t,n,i){if(e===null){var o=t.type;return typeof o=="function"&&!Vl(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(r.tag=15,r.type=o,jm(e,r,o,n,i)):(e=qo(t.type,null,n,r,r.mode,i),e.ref=r.ref,e.return=r,r.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(t=t.compare,t=t!==null?t:Ei,t(a,n)&&e.ref===r.ref)return Nt(e,r,i)}return r.flags|=1,e=cr(o,n),e.ref=r.ref,e.return=r,r.child=e}function jm(e,r,t,n,i){if(e!==null){var o=e.memoizedProps;if(Ei(o,n)&&e.ref===r.ref)if(Ue=!1,r.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Ue=!0);else return r.lanes=e.lanes,Nt(e,r,i)}return fu(e,r,t,n,i)}function Am(e,r,t){var n=r.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(dn,Ke),Ke|=t;else{if(!(t&1073741824))return e=o!==null?o.baseLanes|t:t,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,ce(dn,Ke),Ke|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:t,ce(dn,Ke),Ke|=n}else o!==null?(n=o.baseLanes|t,r.memoizedState=null):n=t,ce(dn,Ke),Ke|=n;return Ae(e,r,i,t),r.child}function Dm(e,r){var t=r.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(r.flags|=512,r.flags|=2097152)}function fu(e,r,t,n,i){var o=Be(t)?Lr:Le.current;return o=kn(r,o),yn(r,i),t=xl(e,r,t,n,o,i),n=Ll(),e!==null&&!Ue?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~i,Nt(e,r,i)):(de&&n&&gl(r),r.flags|=1,Ae(e,r,t,i),r.child)}function Af(e,r,t,n,i){if(Be(t)){var o=!0;la(r)}else o=!1;if(yn(r,i),r.stateNode===null)Wo(e,r),Rm(r,t,n),lu(r,t,n,i),n=!0;else if(e===null){var a=r.stateNode,s=r.memoizedProps;a.props=s;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=Be(t)?Lr:Le.current,u=kn(r,u));var l=t.getDerivedStateFromProps,d=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==u)&&Pf(r,a,n,u),Kt=!1;var f=r.memoizedState;a.state=f,va(r,n,a,i),c=r.memoizedState,s!==n||f!==c||Ve.current||Kt?(typeof l=="function"&&(uu(r,t,l,n),c=r.memoizedState),(s=Kt||Cf(r,t,s,n,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(r.flags|=4194308)):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=c),a.props=n,a.state=c,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{a=r.stateNode,cm(e,r),s=r.memoizedProps,u=r.type===r.elementType?s:ct(r.type,s),a.props=u,d=r.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=Be(t)?Lr:Le.current,c=kn(r,c));var g=t.getDerivedStateFromProps;(l=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==c)&&Pf(r,a,n,c),Kt=!1,f=r.memoizedState,a.state=f,va(r,n,a,i);var v=r.memoizedState;s!==d||f!==v||Ve.current||Kt?(typeof g=="function"&&(uu(r,t,g,n),v=r.memoizedState),(u=Kt||Cf(r,t,u,n,f,v,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(r.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(r.flags|=1024),n=!1)}return pu(e,r,t,n,o,i)}function pu(e,r,t,n,i,o){Dm(e,r);var a=(r.flags&128)!==0;if(!n&&!a)return i&&gf(r,t,!1),Nt(e,r,o);n=r.stateNode,LT.current=r;var s=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,e!==null&&a?(r.child=bn(r,e.child,null,o),r.child=bn(r,null,s,o)):Ae(e,r,s,o),r.memoizedState=n.state,i&&gf(r,t,!0),r.child}function Im(e){var r=e.stateNode;r.pendingContext?yf(e,r.pendingContext,r.pendingContext!==r.context):r.context&&yf(e,r.context,!1),Cl(e,r.containerInfo)}function Df(e,r,t,n,i){return Tn(),wl(i),r.flags|=256,Ae(e,r,t,n),r.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function vu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mm(e,r,t){var n=r.pendingProps,i=fe.current,o=!1,a=(r.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ce(fe,i&1),e===null)return su(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(r.mode&1?e.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(a=n.children,e=n.fallback,o?(n=r.mode,o=r.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=qa(a,n,0,null),e=Or(e,n,t,null),o.return=r,e.return=r,o.sibling=e,r.child=o,r.child.memoizedState=vu(t),r.memoizedState=hu,e):Dl(r,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return jT(e,r,a,n,s,i,t);if(o){o=n.fallback,a=r.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&r.child!==i?(n=r.child,n.childLanes=0,n.pendingProps=c,r.deletions=null):(n=cr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=cr(s,o):(o=Or(o,a,t,null),o.flags|=2),o.return=r,n.return=r,n.sibling=o,r.child=n,n=o,o=r.child,a=e.child.memoizedState,a=a===null?vu(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~t,r.memoizedState=hu,n}return o=e.child,e=o.sibling,n=cr(o,{mode:"visible",children:n.children}),!(r.mode&1)&&(n.lanes=t),n.return=r,n.sibling=null,e!==null&&(t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)),r.child=n,r.memoizedState=null,n}function Dl(e,r){return r=qa({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function go(e,r,t,n){return n!==null&&wl(n),bn(r,e.child,null,t),e=Dl(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function jT(e,r,t,n,i,o,a){if(t)return r.flags&256?(r.flags&=-257,n=Qs(Error(j(422))),go(e,r,a,n)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(o=n.fallback,i=r.mode,n=qa({mode:"visible",children:n.children},i,0,null),o=Or(o,i,a,null),o.flags|=2,n.return=r,o.return=r,n.sibling=o,r.child=n,r.mode&1&&bn(r,e.child,null,a),r.child.memoizedState=vu(a),r.memoizedState=hu,o);if(!(r.mode&1))return go(e,r,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(j(419)),n=Qs(o,n,void 0),go(e,r,a,n)}if(s=(a&e.childLanes)!==0,Ue||s){if(n=Te,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mt(e,i),pt(n,e,i,-1))}return Ul(),n=Qs(Error(j(421))),go(e,r,a,n)}return i.data==="$?"?(r.flags|=128,r.child=e.child,r=HT.bind(null,e),i._reactRetry=r,null):(e=o.treeContext,Ge=ir(i.nextSibling),Ye=r,de=!0,dt=null,e!==null&&(tt[rt++]=Rt,tt[rt++]=xt,tt[rt++]=jr,Rt=e.id,xt=e.overflow,jr=r),r=Dl(r,n.children),r.flags|=4096,r)}function If(e,r,t){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r),cu(e.return,r,t)}function qs(e,r,t,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=t,o.tailMode=i)}function Nm(e,r,t){var n=r.pendingProps,i=n.revealOrder,o=n.tail;if(Ae(e,r,n.children,t),n=fe.current,n&2)n=n&1|2,r.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&If(e,t,r);else if(e.tag===19)If(e,t,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ce(fe,n),!(r.mode&1))r.memoizedState=null;else switch(i){case"forwards":for(t=r.child,i=null;t!==null;)e=t.alternate,e!==null&&ma(e)===null&&(i=t),t=t.sibling;t=i,t===null?(i=r.child,r.child=null):(i=t.sibling,t.sibling=null),qs(r,!1,i,t,o);break;case"backwards":for(t=null,i=r.child,r.child=null;i!==null;){if(e=i.alternate,e!==null&&ma(e)===null){r.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}qs(r,!0,t,null,o);break;case"together":qs(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wo(e,r){!(r.mode&1)&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Nt(e,r,t){if(e!==null&&(r.dependencies=e.dependencies),Dr|=r.lanes,!(t&r.childLanes))return null;if(e!==null&&r.child!==e.child)throw Error(j(153));if(r.child!==null){for(e=r.child,t=cr(e,e.pendingProps),r.child=t,t.return=r;e.sibling!==null;)e=e.sibling,t=t.sibling=cr(e,e.pendingProps),t.return=r;t.sibling=null}return r.child}function AT(e,r,t){switch(r.tag){case 3:Im(r),Tn();break;case 5:um(r);break;case 1:Be(r.type)&&la(r);break;case 4:Cl(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,i=r.memoizedProps.value;ce(pa,n._currentValue),n._currentValue=i;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(ce(fe,fe.current&1),r.flags|=128,null):t&r.child.childLanes?Mm(e,r,t):(ce(fe,fe.current&1),e=Nt(e,r,t),e!==null?e.sibling:null);ce(fe,fe.current&1);break;case 19:if(n=(t&r.childLanes)!==0,e.flags&128){if(n)return Nm(e,r,t);r.flags|=128}if(i=r.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(fe,fe.current),n)break;return null;case 22:case 23:return r.lanes=0,Am(e,r,t)}return Nt(e,r,t)}var $m,mu,Fm,Um;$m=function(e,r){for(var t=r.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};mu=function(){};Fm=function(e,r,t,n){var i=e.memoizedProps;if(i!==n){e=r.stateNode,Er(Tt.current);var o=null;switch(t){case"input":i=$c(e,i),n=$c(e,n),o=[];break;case"select":i=he({},i,{value:void 0}),n=he({},n,{value:void 0}),o=[];break;case"textarea":i=Vc(e,i),n=Vc(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ca)}zc(t,n);var a;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(o||(o=[]),o.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",e),o||s===c||(o=[])):(o=o||[]).push(u,c))}t&&(o=o||[]).push("style",t);var u=o;(r.updateQueue=u)&&(r.flags|=4)}};Um=function(e,r,t,n){t!==n&&(r.flags|=4)};function Gn(e,r){if(!de)switch(e.tailMode){case"hidden":r=e.tail;for(var t=null;r!==null;)r.alternate!==null&&(t=r),r=r.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Re(e){var r=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(r)for(var i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=t,r}function DT(e,r,t){var n=r.pendingProps;switch(_l(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(r),null;case 1:return Be(r.type)&&ua(),Re(r),null;case 3:return n=r.stateNode,En(),le(Ve),le(Le),Ol(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(mo(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,dt!==null&&(bu(dt),dt=null))),mu(e,r),Re(r),null;case 5:Pl(r);var i=Er(xi.current);if(t=r.type,e!==null&&r.stateNode!=null)Fm(e,r,t,n,i),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error(j(166));return Re(r),null}if(e=Er(Tt.current),mo(r)){n=r.stateNode,t=r.type;var o=r.memoizedProps;switch(n[wt]=r,n[Oi]=o,e=(r.mode&1)!==0,t){case"dialog":ue("cancel",n),ue("close",n);break;case"iframe":case"object":case"embed":ue("load",n);break;case"video":case"audio":for(i=0;i<ii.length;i++)ue(ii[i],n);break;case"source":ue("error",n);break;case"img":case"image":case"link":ue("error",n),ue("load",n);break;case"details":ue("toggle",n);break;case"input":zd(n,o),ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ue("invalid",n);break;case"textarea":Hd(n,o),ue("invalid",n)}zc(t,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&vo(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&vo(n.textContent,s,e),i=["children",""+s]):gi.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&ue("scroll",n)}switch(t){case"input":ao(n),Wd(n,o,!0);break;case"textarea":ao(n),Qd(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ca)}n=i,r.updateQueue=n,n!==null&&(r.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hv(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(t,{is:n.is}):(e=a.createElement(t),t==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,t),e[wt]=r,e[Oi]=n,$m(e,r,!1,!1),r.stateNode=e;e:{switch(a=Wc(t,n),t){case"dialog":ue("cancel",e),ue("close",e),i=n;break;case"iframe":case"object":case"embed":ue("load",e),i=n;break;case"video":case"audio":for(i=0;i<ii.length;i++)ue(ii[i],e);i=n;break;case"source":ue("error",e),i=n;break;case"img":case"image":case"link":ue("error",e),ue("load",e),i=n;break;case"details":ue("toggle",e),i=n;break;case"input":zd(e,n),i=$c(e,n),ue("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=he({},n,{value:void 0}),ue("invalid",e);break;case"textarea":Hd(e,n),i=Vc(e,n),ue("invalid",e);break;default:i=n}zc(t,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?yv(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vv(e,c)):o==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&_i(e,c):typeof c=="number"&&_i(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gi.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ue("scroll",e):c!=null&&il(e,o,c,a))}switch(t){case"input":ao(e),Wd(e,n,!1);break;case"textarea":ao(e),Qd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+lr(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?pn(e,!!n.multiple,o,!1):n.defaultValue!=null&&pn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ca)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Re(r),null;case 6:if(e&&r.stateNode!=null)Um(e,r,e.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error(j(166));if(t=Er(xi.current),Er(Tt.current),mo(r)){if(n=r.stateNode,t=r.memoizedProps,n[wt]=r,(o=n.nodeValue!==t)&&(e=Ye,e!==null))switch(e.tag){case 3:vo(n.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vo(n.nodeValue,t,(e.mode&1)!==0)}o&&(r.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[wt]=r,r.stateNode=n}return Re(r),null;case 13:if(le(fe),n=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&Ge!==null&&r.mode&1&&!(r.flags&128))im(),Tn(),r.flags|=98560,o=!1;else if(o=mo(r),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(j(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(j(317));o[wt]=r}else Tn(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Re(r),o=!1}else dt!==null&&(bu(dt),dt=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=t,r):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(r.child.flags|=8192,r.mode&1&&(e===null||fe.current&1?Se===0&&(Se=3):Ul())),r.updateQueue!==null&&(r.flags|=4),Re(r),null);case 4:return En(),mu(e,r),e===null&&Ci(r.stateNode.containerInfo),Re(r),null;case 10:return Tl(r.type._context),Re(r),null;case 17:return Be(r.type)&&ua(),Re(r),null;case 19:if(le(fe),o=r.memoizedState,o===null)return Re(r),null;if(n=(r.flags&128)!==0,a=o.rendering,a===null)if(n)Gn(o,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=r.child;e!==null;){if(a=ma(e),a!==null){for(r.flags|=128,Gn(o,!1),n=a.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=t,t=r.child;t!==null;)o=t,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return ce(fe,fe.current&1|2),r.child}e=e.sibling}o.tail!==null&&me()>Pn&&(r.flags|=128,n=!0,Gn(o,!1),r.lanes=4194304)}else{if(!n)if(e=ma(a),e!==null){if(r.flags|=128,n=!0,t=e.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),Gn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!de)return Re(r),null}else 2*me()-o.renderingStartTime>Pn&&t!==1073741824&&(r.flags|=128,n=!0,Gn(o,!1),r.lanes=4194304);o.isBackwards?(a.sibling=r.child,r.child=a):(t=o.last,t!==null?t.sibling=a:r.child=a,o.last=a)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=me(),r.sibling=null,t=fe.current,ce(fe,n?t&1|2:t&1),r):(Re(r),null);case 22:case 23:return Fl(),n=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(r.flags|=8192),n&&r.mode&1?Ke&1073741824&&(Re(r),r.subtreeFlags&6&&(r.flags|=8192)):Re(r),null;case 24:return null;case 25:return null}throw Error(j(156,r.tag))}function IT(e,r){switch(_l(r),r.tag){case 1:return Be(r.type)&&ua(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return En(),le(Ve),le(Le),Ol(),e=r.flags,e&65536&&!(e&128)?(r.flags=e&-65537|128,r):null;case 5:return Pl(r),null;case 13:if(le(fe),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(j(340));Tn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return le(fe),null;case 4:return En(),null;case 10:return Tl(r.type._context),null;case 22:case 23:return Fl(),null;case 24:return null;default:return null}}var _o=!1,xe=!1,MT=typeof WeakSet=="function"?WeakSet:Set,F=null;function ln(e,r){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){ve(e,r,n)}else t.current=null}function yu(e,r,t){try{t()}catch(n){ve(e,r,n)}}var Mf=!1;function NT(e,r){if(eu=oa,e=Hv(),yl(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var a=0,s=-1,c=-1,u=0,l=0,d=e,f=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===e)break t;if(f===t&&++u===i&&(s=a),f===o&&++l===n&&(c=a),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=s===-1||c===-1?null:{start:s,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(tu={focusedElem:e,selectionRange:t},oa=!1,F=r;F!==null;)if(r=F,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,F=e;else for(;F!==null;){r=F;try{var v=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,w=v.memoizedState,y=r.stateNode,p=y.getSnapshotBeforeUpdate(r.elementType===r.type?_:ct(r.type,_),w);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var h=r.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(S){ve(r,r.return,S)}if(e=r.sibling,e!==null){e.return=r.return,F=e;break}F=r.return}return v=Mf,Mf=!1,v}function hi(e,r,t){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&yu(r,t,o)}i=i.next}while(i!==n)}}function Ha(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var t=r=r.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==r)}}function gu(e){var r=e.ref;if(r!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof r=="function"?r(e):r.current=e}}function Vm(e){var r=e.alternate;r!==null&&(e.alternate=null,Vm(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[wt],delete r[Oi],delete r[iu],delete r[_T],delete r[wT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bm(e){return e.tag===5||e.tag===3||e.tag===4}function Nf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _u(e,r,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?t.nodeType===8?t.parentNode.insertBefore(e,r):t.insertBefore(e,r):(t.nodeType===8?(r=t.parentNode,r.insertBefore(e,t)):(r=t,r.appendChild(e)),t=t._reactRootContainer,t!=null||r.onclick!==null||(r.onclick=ca));else if(n!==4&&(e=e.child,e!==null))for(_u(e,r,t),e=e.sibling;e!==null;)_u(e,r,t),e=e.sibling}function wu(e,r,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?t.insertBefore(e,r):t.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wu(e,r,t),e=e.sibling;e!==null;)wu(e,r,t),e=e.sibling}var Ee=null,ut=!1;function zt(e,r,t){for(t=t.child;t!==null;)zm(e,r,t),t=t.sibling}function zm(e,r,t){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Na,t)}catch{}switch(t.tag){case 5:xe||ln(t,r);case 6:var n=Ee,i=ut;Ee=null,zt(e,r,t),Ee=n,ut=i,Ee!==null&&(ut?(e=Ee,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Ee.removeChild(t.stateNode));break;case 18:Ee!==null&&(ut?(e=Ee,t=t.stateNode,e.nodeType===8?Us(e.parentNode,t):e.nodeType===1&&Us(e,t),Ti(e)):Us(Ee,t.stateNode));break;case 4:n=Ee,i=ut,Ee=t.stateNode.containerInfo,ut=!0,zt(e,r,t),Ee=n,ut=i;break;case 0:case 11:case 14:case 15:if(!xe&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&yu(t,r,a),i=i.next}while(i!==n)}zt(e,r,t);break;case 1:if(!xe&&(ln(t,r),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(s){ve(t,r,s)}zt(e,r,t);break;case 21:zt(e,r,t);break;case 22:t.mode&1?(xe=(n=xe)||t.memoizedState!==null,zt(e,r,t),xe=n):zt(e,r,t);break;default:zt(e,r,t)}}function $f(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new MT),r.forEach(function(n){var i=QT.bind(null,e,n);t.has(n)||(t.add(n),n.then(i,i))})}}function st(e,r){var t=r.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var o=e,a=r,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ee=s.stateNode,ut=!1;break e;case 3:Ee=s.stateNode.containerInfo,ut=!0;break e;case 4:Ee=s.stateNode.containerInfo,ut=!0;break e}s=s.return}if(Ee===null)throw Error(j(160));zm(o,a,i),Ee=null,ut=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ve(i,r,u)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wm(r,e),r=r.sibling}function Wm(e,r){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(st(r,e),yt(e),n&4){try{hi(3,e,e.return),Ha(3,e)}catch(_){ve(e,e.return,_)}try{hi(5,e,e.return)}catch(_){ve(e,e.return,_)}}break;case 1:st(r,e),yt(e),n&512&&t!==null&&ln(t,t.return);break;case 5:if(st(r,e),yt(e),n&512&&t!==null&&ln(t,t.return),e.flags&32){var i=e.stateNode;try{_i(i,"")}catch(_){ve(e,e.return,_)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=t!==null?t.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&fv(i,o),Wc(s,a);var u=Wc(s,o);for(a=0;a<c.length;a+=2){var l=c[a],d=c[a+1];l==="style"?yv(i,d):l==="dangerouslySetInnerHTML"?vv(i,d):l==="children"?_i(i,d):il(i,l,d,u)}switch(s){case"input":Fc(i,o);break;case"textarea":pv(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?pn(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?pn(i,!!o.multiple,o.defaultValue,!0):pn(i,!!o.multiple,o.multiple?[]:"",!1))}i[Oi]=o}catch(_){ve(e,e.return,_)}}break;case 6:if(st(r,e),yt(e),n&4){if(e.stateNode===null)throw Error(j(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(_){ve(e,e.return,_)}}break;case 3:if(st(r,e),yt(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Ti(r.containerInfo)}catch(_){ve(e,e.return,_)}break;case 4:st(r,e),yt(e);break;case 13:st(r,e),yt(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nl=me())),n&4&&$f(e);break;case 22:if(l=t!==null&&t.memoizedState!==null,e.mode&1?(xe=(u=xe)||l,st(r,e),xe=u):st(r,e),yt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(F=e,l=e.child;l!==null;){for(d=F=l;F!==null;){switch(f=F,g=f.child,f.tag){case 0:case 11:case 14:case 15:hi(4,f,f.return);break;case 1:ln(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,t=f.return;try{r=n,v.props=r.memoizedProps,v.state=r.memoizedState,v.componentWillUnmount()}catch(_){ve(n,t,_)}}break;case 5:ln(f,f.return);break;case 22:if(f.memoizedState!==null){Uf(d);continue}}g!==null?(g.return=f,F=g):Uf(d)}l=l.sibling}e:for(l=null,d=e;;){if(d.tag===5){if(l===null){l=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=mv("display",a))}catch(_){ve(e,e.return,_)}}}else if(d.tag===6){if(l===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){ve(e,e.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:st(r,e),yt(e),n&4&&$f(e);break;case 21:break;default:st(r,e),yt(e)}}function yt(e){var r=e.flags;if(r&2){try{e:{for(var t=e.return;t!==null;){if(Bm(t)){var n=t;break e}t=t.return}throw Error(j(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(_i(i,""),n.flags&=-33);var o=Nf(e);wu(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=Nf(e);_u(e,s,a);break;default:throw Error(j(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function $T(e,r,t){F=e,Hm(e)}function Hm(e,r,t){for(var n=(e.mode&1)!==0;F!==null;){var i=F,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||_o;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||xe;s=_o;var u=xe;if(_o=a,(xe=c)&&!u)for(F=i;F!==null;)a=F,c=a.child,a.tag===22&&a.memoizedState!==null?Vf(i):c!==null?(c.return=a,F=c):Vf(i);for(;o!==null;)F=o,Hm(o),o=o.sibling;F=i,_o=s,xe=u}Ff(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,F=o):Ff(e)}}function Ff(e){for(;F!==null;){var r=F;if(r.flags&8772){var t=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:xe||Ha(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!xe)if(t===null)n.componentDidMount();else{var i=r.elementType===r.type?t.memoizedProps:ct(r.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&Tf(r,o,n);break;case 3:var a=r.updateQueue;if(a!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}Tf(r,a,t)}break;case 5:var s=r.stateNode;if(t===null&&r.flags&4){t=s;var c=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var u=r.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var d=l.dehydrated;d!==null&&Ti(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}xe||r.flags&512&&gu(r)}catch(f){ve(r,r.return,f)}}if(r===e){F=null;break}if(t=r.sibling,t!==null){t.return=r.return,F=t;break}F=r.return}}function Uf(e){for(;F!==null;){var r=F;if(r===e){F=null;break}var t=r.sibling;if(t!==null){t.return=r.return,F=t;break}F=r.return}}function Vf(e){for(;F!==null;){var r=F;try{switch(r.tag){case 0:case 11:case 15:var t=r.return;try{Ha(4,r)}catch(c){ve(r,t,c)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var i=r.return;try{n.componentDidMount()}catch(c){ve(r,i,c)}}var o=r.return;try{gu(r)}catch(c){ve(r,o,c)}break;case 5:var a=r.return;try{gu(r)}catch(c){ve(r,a,c)}}}catch(c){ve(r,r.return,c)}if(r===e){F=null;break}var s=r.sibling;if(s!==null){s.return=r.return,F=s;break}F=r.return}}var FT=Math.ceil,_a=$t.ReactCurrentDispatcher,Il=$t.ReactCurrentOwner,it=$t.ReactCurrentBatchConfig,te=0,Te=null,ye=null,Ce=0,Ke=0,dn=pr(0),Se=0,Di=null,Dr=0,Qa=0,Ml=0,vi=null,Fe=null,Nl=0,Pn=1/0,Pt=null,wa=!1,Su=null,ar=null,wo=!1,Zt=null,Sa=0,mi=0,ku=null,Ho=-1,Qo=0;function De(){return te&6?me():Ho!==-1?Ho:Ho=me()}function sr(e){return e.mode&1?te&2&&Ce!==0?Ce&-Ce:kT.transition!==null?(Qo===0&&(Qo=Rv()),Qo):(e=ne,e!==0||(e=window.event,e=e===void 0?16:Mv(e.type)),e):1}function pt(e,r,t,n){if(50<mi)throw mi=0,ku=null,Error(j(185));Wi(e,t,n),(!(te&2)||e!==Te)&&(e===Te&&(!(te&2)&&(Qa|=t),Se===4&&Yt(e,Ce)),ze(e,n),t===1&&te===0&&!(r.mode&1)&&(Pn=me()+500,Ba&&hr()))}function ze(e,r){var t=e.callbackNode;kk(e,r);var n=ia(e,e===Te?Ce:0);if(n===0)t!==null&&Gd(t),e.callbackNode=null,e.callbackPriority=0;else if(r=n&-n,e.callbackPriority!==r){if(t!=null&&Gd(t),r===1)e.tag===0?ST(Bf.bind(null,e)):tm(Bf.bind(null,e)),yT(function(){!(te&6)&&hr()}),t=null;else{switch(xv(n)){case 1:t=ul;break;case 4:t=Pv;break;case 16:t=na;break;case 536870912:t=Ov;break;default:t=na}t=Xm(t,Qm.bind(null,e))}e.callbackPriority=r,e.callbackNode=t}}function Qm(e,r){if(Ho=-1,Qo=0,te&6)throw Error(j(327));var t=e.callbackNode;if(gn()&&e.callbackNode!==t)return null;var n=ia(e,e===Te?Ce:0);if(n===0)return null;if(n&30||n&e.expiredLanes||r)r=ka(e,n);else{r=n;var i=te;te|=2;var o=Km();(Te!==e||Ce!==r)&&(Pt=null,Pn=me()+500,Pr(e,r));do try{BT();break}catch(s){qm(e,s)}while(!0);kl(),_a.current=o,te=i,ye!==null?r=0:(Te=null,Ce=0,r=Se)}if(r!==0){if(r===2&&(i=Gc(e),i!==0&&(n=i,r=Tu(e,i))),r===1)throw t=Di,Pr(e,0),Yt(e,n),ze(e,me()),t;if(r===6)Yt(e,n);else{if(i=e.current.alternate,!(n&30)&&!UT(i)&&(r=ka(e,n),r===2&&(o=Gc(e),o!==0&&(n=o,r=Tu(e,o))),r===1))throw t=Di,Pr(e,0),Yt(e,n),ze(e,me()),t;switch(e.finishedWork=i,e.finishedLanes=n,r){case 0:case 1:throw Error(j(345));case 2:Sr(e,Fe,Pt);break;case 3:if(Yt(e,n),(n&130023424)===n&&(r=Nl+500-me(),10<r)){if(ia(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){De(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=nu(Sr.bind(null,e,Fe,Pt),r);break}Sr(e,Fe,Pt);break;case 4:if(Yt(e,n),(n&4194240)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-ft(n);o=1<<a,a=r[a],a>i&&(i=a),n&=~o}if(n=i,n=me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*FT(n/1960))-n,10<n){e.timeoutHandle=nu(Sr.bind(null,e,Fe,Pt),n);break}Sr(e,Fe,Pt);break;case 5:Sr(e,Fe,Pt);break;default:throw Error(j(329))}}}return ze(e,me()),e.callbackNode===t?Qm.bind(null,e):null}function Tu(e,r){var t=vi;return e.current.memoizedState.isDehydrated&&(Pr(e,r).flags|=256),e=ka(e,r),e!==2&&(r=Fe,Fe=t,r!==null&&bu(r)),e}function bu(e){Fe===null?Fe=e:Fe.push.apply(Fe,e)}function UT(e){for(var r=e;;){if(r.flags&16384){var t=r.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}}if(t=r.child,r.subtreeFlags&16384&&t!==null)t.return=r,r=t;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yt(e,r){for(r&=~Ml,r&=~Qa,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var t=31-ft(r),n=1<<t;e[t]=-1,r&=~n}}function Bf(e){if(te&6)throw Error(j(327));gn();var r=ia(e,0);if(!(r&1))return ze(e,me()),null;var t=ka(e,r);if(e.tag!==0&&t===2){var n=Gc(e);n!==0&&(r=n,t=Tu(e,n))}if(t===1)throw t=Di,Pr(e,0),Yt(e,r),ze(e,me()),t;if(t===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Sr(e,Fe,Pt),ze(e,me()),null}function $l(e,r){var t=te;te|=1;try{return e(r)}finally{te=t,te===0&&(Pn=me()+500,Ba&&hr())}}function Ir(e){Zt!==null&&Zt.tag===0&&!(te&6)&&gn();var r=te;te|=1;var t=it.transition,n=ne;try{if(it.transition=null,ne=1,e)return e()}finally{ne=n,it.transition=t,te=r,!(te&6)&&hr()}}function Fl(){Ke=dn.current,le(dn)}function Pr(e,r){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,mT(t)),ye!==null)for(t=ye.return;t!==null;){var n=t;switch(_l(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ua();break;case 3:En(),le(Ve),le(Le),Ol();break;case 5:Pl(n);break;case 4:En();break;case 13:le(fe);break;case 19:le(fe);break;case 10:Tl(n.type._context);break;case 22:case 23:Fl()}t=t.return}if(Te=e,ye=e=cr(e.current,null),Ce=Ke=r,Se=0,Di=null,Ml=Qa=Dr=0,Fe=vi=null,br!==null){for(r=0;r<br.length;r++)if(t=br[r],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,o=t.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}t.pending=n}br=null}return e}function qm(e,r){do{var t=ye;try{if(kl(),Bo.current=ga,ya){for(var n=pe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ya=!1}if(Ar=0,ke=we=pe=null,pi=!1,Li=0,Il.current=null,t===null||t.return===null){Se=1,Di=r,ye=null;break}e:{var o=e,a=t.return,s=t,c=r;if(r=Ce,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=s,d=l.tag;if(!(l.mode&1)&&(d===0||d===11||d===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var g=Rf(a);if(g!==null){g.flags&=-257,xf(g,a,s,o,r),g.mode&1&&Of(o,u,r),r=g,c=u;var v=r.updateQueue;if(v===null){var _=new Set;_.add(c),r.updateQueue=_}else v.add(c);break e}else{if(!(r&1)){Of(o,u,r),Ul();break e}c=Error(j(426))}}else if(de&&s.mode&1){var w=Rf(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),xf(w,a,s,o,r),wl(Cn(c,s));break e}}o=c=Cn(c,s),Se!==4&&(Se=2),vi===null?vi=[o]:vi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var y=xm(o,c,r);kf(o,y);break e;case 1:s=c;var p=o.type,h=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ar===null||!ar.has(h)))){o.flags|=65536,r&=-r,o.lanes|=r;var S=Lm(o,s,r);kf(o,S);break e}}o=o.return}while(o!==null)}Ym(t)}catch(T){r=T,ye===t&&t!==null&&(ye=t=t.return);continue}break}while(!0)}function Km(){var e=_a.current;return _a.current=ga,e===null?ga:e}function Ul(){(Se===0||Se===3||Se===2)&&(Se=4),Te===null||!(Dr&268435455)&&!(Qa&268435455)||Yt(Te,Ce)}function ka(e,r){var t=te;te|=2;var n=Km();(Te!==e||Ce!==r)&&(Pt=null,Pr(e,r));do try{VT();break}catch(i){qm(e,i)}while(!0);if(kl(),te=t,_a.current=n,ye!==null)throw Error(j(261));return Te=null,Ce=0,Se}function VT(){for(;ye!==null;)Gm(ye)}function BT(){for(;ye!==null&&!pk();)Gm(ye)}function Gm(e){var r=Zm(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,r===null?Ym(e):ye=r,Il.current=null}function Ym(e){var r=e;do{var t=r.alternate;if(e=r.return,r.flags&32768){if(t=IT(t,r),t!==null){t.flags&=32767,ye=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,ye=null;return}}else if(t=DT(t,r,Ke),t!==null){ye=t;return}if(r=r.sibling,r!==null){ye=r;return}ye=r=e}while(r!==null);Se===0&&(Se=5)}function Sr(e,r,t){var n=ne,i=it.transition;try{it.transition=null,ne=1,zT(e,r,t,n)}finally{it.transition=i,ne=n}return null}function zT(e,r,t,n){do gn();while(Zt!==null);if(te&6)throw Error(j(327));t=e.finishedWork;var i=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(Tk(e,o),e===Te&&(ye=Te=null,Ce=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||wo||(wo=!0,Xm(na,function(){return gn(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=it.transition,it.transition=null;var a=ne;ne=1;var s=te;te|=4,Il.current=null,NT(e,t),Wm(t,e),uT(tu),oa=!!eu,tu=eu=null,e.current=t,$T(t),hk(),te=s,ne=a,it.transition=o}else e.current=t;if(wo&&(wo=!1,Zt=e,Sa=i),o=e.pendingLanes,o===0&&(ar=null),yk(t.stateNode),ze(e,me()),r!==null)for(n=e.onRecoverableError,t=0;t<r.length;t++)i=r[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(wa)throw wa=!1,e=Su,Su=null,e;return Sa&1&&e.tag!==0&&gn(),o=e.pendingLanes,o&1?e===ku?mi++:(mi=0,ku=e):mi=0,hr(),null}function gn(){if(Zt!==null){var e=xv(Sa),r=it.transition,t=ne;try{if(it.transition=null,ne=16>e?16:e,Zt===null)var n=!1;else{if(e=Zt,Zt=null,Sa=0,te&6)throw Error(j(331));var i=te;for(te|=4,F=e.current;F!==null;){var o=F,a=o.child;if(F.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(F=u;F!==null;){var l=F;switch(l.tag){case 0:case 11:case 15:hi(8,l,o)}var d=l.child;if(d!==null)d.return=l,F=d;else for(;F!==null;){l=F;var f=l.sibling,g=l.return;if(Vm(l),l===u){F=null;break}if(f!==null){f.return=g,F=f;break}F=g}}}var v=o.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}F=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,F=a;else e:for(;F!==null;){if(o=F,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hi(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,F=y;break e}F=o.return}}var p=e.current;for(F=p;F!==null;){a=F;var h=a.child;if(a.subtreeFlags&2064&&h!==null)h.return=a,F=h;else e:for(a=p;F!==null;){if(s=F,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ha(9,s)}}catch(T){ve(s,s.return,T)}if(s===a){F=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,F=S;break e}F=s.return}}if(te=i,hr(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Na,e)}catch{}n=!0}return n}finally{ne=t,it.transition=r}}return!1}function zf(e,r,t){r=Cn(t,r),r=xm(e,r,1),e=or(e,r,1),r=De(),e!==null&&(Wi(e,1,r),ze(e,r))}function ve(e,r,t){if(e.tag===3)zf(e,e,t);else for(;r!==null;){if(r.tag===3){zf(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ar===null||!ar.has(n))){e=Cn(t,e),e=Lm(r,e,1),r=or(r,e,1),e=De(),r!==null&&(Wi(r,1,e),ze(r,e));break}}r=r.return}}function WT(e,r,t){var n=e.pingCache;n!==null&&n.delete(r),r=De(),e.pingedLanes|=e.suspendedLanes&t,Te===e&&(Ce&t)===t&&(Se===4||Se===3&&(Ce&130023424)===Ce&&500>me()-Nl?Pr(e,0):Ml|=t),ze(e,r)}function Jm(e,r){r===0&&(e.mode&1?(r=uo,uo<<=1,!(uo&130023424)&&(uo=4194304)):r=1);var t=De();e=Mt(e,r),e!==null&&(Wi(e,r,t),ze(e,t))}function HT(e){var r=e.memoizedState,t=0;r!==null&&(t=r.retryLane),Jm(e,t)}function QT(e,r){var t=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(r),Jm(e,t)}var Zm;Zm=function(e,r,t){if(e!==null)if(e.memoizedProps!==r.pendingProps||Ve.current)Ue=!0;else{if(!(e.lanes&t)&&!(r.flags&128))return Ue=!1,AT(e,r,t);Ue=!!(e.flags&131072)}else Ue=!1,de&&r.flags&1048576&&rm(r,fa,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;Wo(e,r),e=r.pendingProps;var i=kn(r,Le.current);yn(r,t),i=xl(null,r,n,e,i,t);var o=Ll();return r.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Be(n)?(o=!0,la(r)):o=!1,r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,El(r),i.updater=Wa,r.stateNode=i,i._reactInternals=r,lu(r,n,e,t),r=pu(null,r,n,!0,o,t)):(r.tag=0,de&&o&&gl(r),Ae(null,r,i,t),r=r.child),r;case 16:n=r.elementType;e:{switch(Wo(e,r),e=r.pendingProps,i=n._init,n=i(n._payload),r.type=n,i=r.tag=KT(n),e=ct(n,e),i){case 0:r=fu(null,r,n,e,t);break e;case 1:r=Af(null,r,n,e,t);break e;case 11:r=Lf(null,r,n,e,t);break e;case 14:r=jf(null,r,n,ct(n.type,e),t);break e}throw Error(j(306,n,""))}return r;case 0:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:ct(n,i),fu(e,r,n,i,t);case 1:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:ct(n,i),Af(e,r,n,i,t);case 3:e:{if(Im(r),e===null)throw Error(j(387));n=r.pendingProps,o=r.memoizedState,i=o.element,cm(e,r),va(r,n,null,t);var a=r.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){i=Cn(Error(j(423)),r),r=Df(e,r,n,t,i);break e}else if(n!==i){i=Cn(Error(j(424)),r),r=Df(e,r,n,t,i);break e}else for(Ge=ir(r.stateNode.containerInfo.firstChild),Ye=r,de=!0,dt=null,t=am(r,null,n,t),r.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tn(),n===i){r=Nt(e,r,t);break e}Ae(e,r,n,t)}r=r.child}return r;case 5:return um(r),e===null&&su(r),n=r.type,i=r.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,ru(n,i)?a=null:o!==null&&ru(n,o)&&(r.flags|=32),Dm(e,r),Ae(e,r,a,t),r.child;case 6:return e===null&&su(r),null;case 13:return Mm(e,r,t);case 4:return Cl(r,r.stateNode.containerInfo),n=r.pendingProps,e===null?r.child=bn(r,null,n,t):Ae(e,r,n,t),r.child;case 11:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:ct(n,i),Lf(e,r,n,i,t);case 7:return Ae(e,r,r.pendingProps,t),r.child;case 8:return Ae(e,r,r.pendingProps.children,t),r.child;case 12:return Ae(e,r,r.pendingProps.children,t),r.child;case 10:e:{if(n=r.type._context,i=r.pendingProps,o=r.memoizedProps,a=i.value,ce(pa,n._currentValue),n._currentValue=a,o!==null)if(ht(o.value,a)){if(o.children===i.children&&!Ve.current){r=Nt(e,r,t);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=At(-1,t&-t),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}o.lanes|=t,c=o.alternate,c!==null&&(c.lanes|=t),cu(o.return,t,r),s.lanes|=t;break}c=c.next}}else if(o.tag===10)a=o.type===r.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(j(341));a.lanes|=t,s=a.alternate,s!==null&&(s.lanes|=t),cu(a,t,r),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===r){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ae(e,r,i.children,t),r=r.child}return r;case 9:return i=r.type,n=r.pendingProps.children,yn(r,t),i=ot(i),n=n(i),r.flags|=1,Ae(e,r,n,t),r.child;case 14:return n=r.type,i=ct(n,r.pendingProps),i=ct(n.type,i),jf(e,r,n,i,t);case 15:return jm(e,r,r.type,r.pendingProps,t);case 17:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:ct(n,i),Wo(e,r),r.tag=1,Be(n)?(e=!0,la(r)):e=!1,yn(r,t),Rm(r,n,i),lu(r,n,i,t),pu(null,r,n,!0,e,t);case 19:return Nm(e,r,t);case 22:return Am(e,r,t)}throw Error(j(156,r.tag))};function Xm(e,r){return Cv(e,r)}function qT(e,r,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(e,r,t,n){return new qT(e,r,t,n)}function Vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KT(e){if(typeof e=="function")return Vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===al)return 11;if(e===sl)return 14}return 2}function cr(e,r){var t=e.alternate;return t===null?(t=nt(e.tag,r,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=r,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,r=e.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function qo(e,r,t,n,i,o){var a=2;if(n=e,typeof e=="function")Vl(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case en:return Or(t.children,i,o,r);case ol:a=8,i|=8;break;case Dc:return e=nt(12,t,r,i|2),e.elementType=Dc,e.lanes=o,e;case Ic:return e=nt(13,t,r,i),e.elementType=Ic,e.lanes=o,e;case Mc:return e=nt(19,t,r,i),e.elementType=Mc,e.lanes=o,e;case uv:return qa(t,i,o,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sv:a=10;break e;case cv:a=9;break e;case al:a=11;break e;case sl:a=14;break e;case qt:a=16,n=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return r=nt(a,t,r,i),r.elementType=e,r.type=n,r.lanes=o,r}function Or(e,r,t,n){return e=nt(7,e,n,r),e.lanes=t,e}function qa(e,r,t,n){return e=nt(22,e,n,r),e.elementType=uv,e.lanes=t,e.stateNode={isHidden:!1},e}function Ks(e,r,t){return e=nt(6,e,null,r),e.lanes=t,e}function Gs(e,r,t){return r=nt(4,e.children!==null?e.children:[],e.key,r),r.lanes=t,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function GT(e,r,t,n,i){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rs(0),this.expirationTimes=Rs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,r,t,n,i,o,a,s,c){return e=new GT(e,r,t,s,c),r===1?(r=1,o===!0&&(r|=8)):r=0,o=nt(3,null,null,r),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(o),e}function YT(e,r,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:n==null?null:""+n,children:e,containerInfo:r,implementation:t}}function ey(e){if(!e)return dr;e=e._reactInternals;e:{if(Fr(e)!==e||e.tag!==1)throw Error(j(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Be(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(j(171))}if(e.tag===1){var t=e.type;if(Be(t))return em(e,t,r)}return r}function ty(e,r,t,n,i,o,a,s,c){return e=Bl(t,n,!0,e,i,o,a,s,c),e.context=ey(null),t=e.current,n=De(),i=sr(t),o=At(n,i),o.callback=r??null,or(t,o,i),e.current.lanes=i,Wi(e,i,n),ze(e,n),e}function Ka(e,r,t,n){var i=r.current,o=De(),a=sr(i);return t=ey(t),r.context===null?r.context=t:r.pendingContext=t,r=At(o,a),r.payload={element:e},n=n===void 0?null:n,n!==null&&(r.callback=n),e=or(i,r,a),e!==null&&(pt(e,i,a,o),Vo(e,i,a)),a}function Ta(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wf(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<r?t:r}}function zl(e,r){Wf(e,r),(e=e.alternate)&&Wf(e,r)}function JT(){return null}var ry=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wl(e){this._internalRoot=e}Ga.prototype.render=Wl.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(j(409));Ka(e,r,null,null)};Ga.prototype.unmount=Wl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ir(function(){Ka(null,e,null,null)}),r[It]=null}};function Ga(e){this._internalRoot=e}Ga.prototype.unstable_scheduleHydration=function(e){if(e){var r=Av();e={blockedOn:null,target:e,priority:r};for(var t=0;t<Gt.length&&r!==0&&r<Gt[t].priority;t++);Gt.splice(t,0,e),t===0&&Iv(e)}};function Hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ya(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hf(){}function ZT(e,r,t,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=Ta(a);o.call(u)}}var a=ty(r,n,e,0,null,!1,!1,"",Hf);return e._reactRootContainer=a,e[It]=a.current,Ci(e.nodeType===8?e.parentNode:e),Ir(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=Ta(c);s.call(u)}}var c=Bl(e,0,!1,null,null,!1,!1,"",Hf);return e._reactRootContainer=c,e[It]=c.current,Ci(e.nodeType===8?e.parentNode:e),Ir(function(){Ka(r,c,t,n)}),c}function Ja(e,r,t,n,i){var o=t._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=Ta(a);s.call(c)}}Ka(r,a,e,i)}else a=ZT(t,r,e,i,n);return Ta(a)}Lv=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var t=ni(r.pendingLanes);t!==0&&(ll(r,t|1),ze(r,me()),!(te&6)&&(Pn=me()+500,hr()))}break;case 13:Ir(function(){var n=Mt(e,1);if(n!==null){var i=De();pt(n,e,1,i)}}),zl(e,1)}};dl=function(e){if(e.tag===13){var r=Mt(e,134217728);if(r!==null){var t=De();pt(r,e,134217728,t)}zl(e,134217728)}};jv=function(e){if(e.tag===13){var r=sr(e),t=Mt(e,r);if(t!==null){var n=De();pt(t,e,r,n)}zl(e,r)}};Av=function(){return ne};Dv=function(e,r){var t=ne;try{return ne=e,r()}finally{ne=t}};Qc=function(e,r,t){switch(r){case"input":if(Fc(e,t),r=t.name,t.type==="radio"&&r!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<t.length;r++){var n=t[r];if(n!==e&&n.form===e.form){var i=Va(n);if(!i)throw Error(j(90));dv(n),Fc(n,i)}}}break;case"textarea":pv(e,t);break;case"select":r=t.value,r!=null&&pn(e,!!t.multiple,r,!1)}};wv=$l;Sv=Ir;var XT={usingClientEntryPoint:!1,Events:[Qi,on,Va,gv,_v,$l]},Yn={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e0={bundleType:Yn.bundleType,version:Yn.version,rendererPackageName:Yn.rendererPackageName,rendererConfig:Yn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bv(e),e===null?null:e.stateNode},findFiberByHostInstance:Yn.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{Na=So.inject(e0),kt=So}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XT;Xe.createPortal=function(e,r){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hl(r))throw Error(j(200));return YT(e,r,null,t)};Xe.createRoot=function(e,r){if(!Hl(e))throw Error(j(299));var t=!1,n="",i=ry;return r!=null&&(r.unstable_strictMode===!0&&(t=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),r=Bl(e,1,!1,null,null,t,!1,n,i),e[It]=r.current,Ci(e.nodeType===8?e.parentNode:e),new Wl(r)};Xe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=bv(r),e=e===null?null:e.stateNode,e};Xe.flushSync=function(e){return Ir(e)};Xe.hydrate=function(e,r,t){if(!Ya(r))throw Error(j(200));return Ja(null,e,r,!0,t)};Xe.hydrateRoot=function(e,r,t){if(!Hl(e))throw Error(j(405));var n=t!=null&&t.hydratedSources||null,i=!1,o="",a=ry;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),r=ty(r,null,e,1,t??null,i,!1,o,a),e[It]=r.current,Ci(e),n)for(e=0;e<n.length;e++)t=n[e],i=t._getVersion,i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i);return new Ga(r)};Xe.render=function(e,r,t){if(!Ya(r))throw Error(j(200));return Ja(null,e,r,!1,t)};Xe.unmountComponentAtNode=function(e){if(!Ya(e))throw Error(j(40));return e._reactRootContainer?(Ir(function(){Ja(null,null,e,!1,function(){e._reactRootContainer=null,e[It]=null})}),!0):!1};Xe.unstable_batchedUpdates=$l;Xe.unstable_renderSubtreeIntoContainer=function(e,r,t,n){if(!Ya(t))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Ja(e,r,t,!1,n)};Xe.version="18.3.1-next-f1338f8080-20240426";function ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ny)}catch(e){console.error(e)}}ny(),nv.exports=Xe;var t0=nv.exports,Qf=t0;jc.createRoot=Qf.createRoot,jc.hydrateRoot=Qf.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ii.apply(this,arguments)}var Xt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xt||(Xt={}));const qf="popstate";function r0(e){e===void 0&&(e={});function r(i,o){let{pathname:a="/",search:s="",hash:c=""}=Ur(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Eu("",{pathname:a,search:s,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let a=i.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");s=u===-1?c:c.slice(0,u)}return s+"#"+(typeof o=="string"?o:ba(o))}function n(i,o){Ql(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return i0(r,t,n,e)}function ge(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Ql(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function n0(){return Math.random().toString(36).substr(2,8)}function Kf(e,r){return{usr:e.state,key:e.key,idx:r}}function Eu(e,r,t,n){return t===void 0&&(t=null),Ii({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Ur(r):r,{state:t,key:r&&r.key||n||n0()})}function ba(e){let{pathname:r="/",search:t="",hash:n=""}=e;return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Ur(e){let r={};if(e){let t=e.indexOf("#");t>=0&&(r.hash=e.substr(t),e=e.substr(0,t));let n=e.indexOf("?");n>=0&&(r.search=e.substr(n),e=e.substr(0,n)),e&&(r.pathname=e)}return r}function i0(e,r,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=Xt.Pop,c=null,u=l();u==null&&(u=0,a.replaceState(Ii({},a.state,{idx:u}),""));function l(){return(a.state||{idx:null}).idx}function d(){s=Xt.Pop;let w=l(),y=w==null?null:w-u;u=w,c&&c({action:s,location:_.location,delta:y})}function f(w,y){s=Xt.Push;let p=Eu(_.location,w,y);t&&t(p,w),u=l()+1;let h=Kf(p,u),S=_.createHref(p);try{a.pushState(h,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(S)}o&&c&&c({action:s,location:_.location,delta:1})}function g(w,y){s=Xt.Replace;let p=Eu(_.location,w,y);t&&t(p,w),u=l();let h=Kf(p,u),S=_.createHref(p);a.replaceState(h,"",S),o&&c&&c({action:s,location:_.location,delta:0})}function v(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof w=="string"?w:ba(w);return p=p.replace(/ $/,"%20"),ge(y,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,y)}let _={get action(){return s},get location(){return e(i,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(qf,d),c=w,()=>{i.removeEventListener(qf,d),c=null}},createHref(w){return r(i,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(w){return a.go(w)}};return _}var Gf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Gf||(Gf={}));function o0(e,r,t){return t===void 0&&(t="/"),a0(e,r,t,!1)}function a0(e,r,t,n){let i=typeof r=="string"?Ur(r):r,o=ql(i.pathname||"/",t);if(o==null)return null;let a=iy(e);s0(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let u=g0(o);s=m0(a[c],u,n)}return s}function iy(e,r,t,n){r===void 0&&(r=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ur([n,c.relativePath]),l=t.concat(c);o.children&&o.children.length>0&&(ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),iy(o.children,r,l,u)),!(o.path==null&&!o.index)&&r.push({path:u,score:h0(u,o.index),routesMeta:l})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of oy(o.path))i(o,a,c)}),r}function oy(e){let r=e.split("/");if(r.length===0)return[];let[t,...n]=r,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=oy(n.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function s0(e){e.sort((r,t)=>r.score!==t.score?t.score-r.score:v0(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const c0=/^:[\w-]+$/,u0=3,l0=2,d0=1,f0=10,p0=-2,Yf=e=>e==="*";function h0(e,r){let t=e.split("/"),n=t.length;return t.some(Yf)&&(n+=p0),r&&(n+=l0),t.filter(i=>!Yf(i)).reduce((i,o)=>i+(c0.test(o)?u0:o===""?d0:f0),n)}function v0(e,r){return e.length===r.length&&e.slice(0,-1).every((n,i)=>n===r[i])?e[e.length-1]-r[r.length-1]:0}function m0(e,r,t){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let c=n[s],u=s===n.length-1,l=o==="/"?r:r.slice(o.length)||"/",d=Jf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},l),f=c.route;if(!d&&u&&t&&!n[n.length-1].route.index&&(d=Jf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},l)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:ur([o,d.pathname]),pathnameBase:k0(ur([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=ur([o,d.pathnameBase]))}return a}function Jf(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=y0(e.path,e.caseSensitive,e.end),i=r.match(t);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,l,d)=>{let{paramName:f,isOptional:g}=l;if(f==="*"){let _=s[d]||"";a=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const v=s[d];return g&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function y0(e,r,t){r===void 0&&(r=!1),t===void 0&&(t=!0),Ql(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,r?void 0:"i"),n]}function g0(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ql(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function ql(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=e.charAt(t);return n&&n!=="/"?null:e.slice(t)||"/"}function _0(e,r){r===void 0&&(r="/");let{pathname:t,search:n="",hash:i=""}=typeof e=="string"?Ur(e):e;return{pathname:t?t.startsWith("/")?t:w0(t,r):r,search:T0(n),hash:b0(i)}}function w0(e,r){let t=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ys(e,r,t,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S0(e){return e.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function ay(e,r){let t=S0(e);return r?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function sy(e,r,t,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Ur(e):(i=Ii({},e),ge(!i.pathname||!i.pathname.includes("?"),Ys("?","pathname","search",i)),ge(!i.pathname||!i.pathname.includes("#"),Ys("#","pathname","hash",i)),ge(!i.search||!i.search.includes("#"),Ys("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=t;else{let d=r.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}s=d>=0?r[d]:"/"}let c=_0(i,s),u=a&&a!=="/"&&a.endsWith("/"),l=(o||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||l)&&(c.pathname+="/"),c}const ur=e=>e.join("/").replace(/\/\/+/g,"/"),k0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),T0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,b0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function E0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cy=["post","put","patch","delete"];new Set(cy);const C0=["get",...cy];new Set(C0);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Mi.apply(this,arguments)}const Kl=P.createContext(null),P0=P.createContext(null),Vr=P.createContext(null),Za=P.createContext(null),vr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),uy=P.createContext(null);function O0(e,r){let{relative:t}=r===void 0?{}:r;Ki()||ge(!1);let{basename:n,navigator:i}=P.useContext(Vr),{hash:o,pathname:a,search:s}=fy(e,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:ur([n,a])),i.createHref({pathname:c,search:s,hash:o})}function Ki(){return P.useContext(Za)!=null}function In(){return Ki()||ge(!1),P.useContext(Za).location}function ly(e){P.useContext(Vr).static||P.useLayoutEffect(e)}function Ft(){let{isDataRoute:e}=P.useContext(vr);return e?V0():R0()}function R0(){Ki()||ge(!1);let e=P.useContext(Kl),{basename:r,future:t,navigator:n}=P.useContext(Vr),{matches:i}=P.useContext(vr),{pathname:o}=In(),a=JSON.stringify(ay(i,t.v7_relativeSplatPath)),s=P.useRef(!1);return ly(()=>{s.current=!0}),P.useCallback(function(u,l){if(l===void 0&&(l={}),!s.current)return;if(typeof u=="number"){n.go(u);return}let d=sy(u,JSON.parse(a),o,l.relative==="path");e==null&&r!=="/"&&(d.pathname=d.pathname==="/"?r:ur([r,d.pathname])),(l.replace?n.replace:n.push)(d,l.state,l)},[r,n,a,o,e])}function dy(){let{matches:e}=P.useContext(vr),r=e[e.length-1];return r?r.params:{}}function fy(e,r){let{relative:t}=r===void 0?{}:r,{future:n}=P.useContext(Vr),{matches:i}=P.useContext(vr),{pathname:o}=In(),a=JSON.stringify(ay(i,n.v7_relativeSplatPath));return P.useMemo(()=>sy(e,JSON.parse(a),o,t==="path"),[e,a,o,t])}function x0(e,r){return L0(e,r)}function L0(e,r,t,n){Ki()||ge(!1);let{navigator:i}=P.useContext(Vr),{matches:o}=P.useContext(vr),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=In(),l;if(r){var d;let w=typeof r=="string"?Ur(r):r;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||ge(!1),l=w}else l=u;let f=l.pathname||"/",g=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=o0(e,{pathname:g}),_=M0(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},s,w.params),pathname:ur([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ur([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,t,n);return r&&_?P.createElement(Za.Provider,{value:{location:Mi({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Xt.Pop}},_):_}function j0(){let e=U0(),r=E0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},r),t?P.createElement("pre",{style:i},t):null,null)}const A0=P.createElement(j0,null);class D0 extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){console.error("React Router caught the following error during render",r,t)}render(){return this.state.error!==void 0?P.createElement(vr.Provider,{value:this.props.routeContext},P.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I0(e){let{routeContext:r,match:t,children:n}=e,i=P.useContext(Kl);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(vr.Provider,{value:r},n)}function M0(e,r,t,n){var i;if(r===void 0&&(r=[]),t===void 0&&(t=null),n===void 0&&(n=null),e==null){var o;if(!t)return null;if(t.errors)e=t.matches;else if((o=n)!=null&&o.v7_partialHydration&&r.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let a=e,s=(i=t)==null?void 0:i.errors;if(s!=null){let l=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);l>=0||ge(!1),a=a.slice(0,Math.min(a.length,l+1))}let c=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let l=0;l<a.length;l++){let d=a[l];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=l),d.route.id){let{loaderData:f,errors:g}=t,v=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((l,d,f)=>{let g,v=!1,_=null,w=null;t&&(g=s&&d.route.id?s[d.route.id]:void 0,_=d.route.errorElement||A0,c&&(u<0&&f===0?(v=!0,w=null):u===f&&(v=!0,w=d.route.hydrateFallbackElement||null)));let y=r.concat(a.slice(0,f+1)),p=()=>{let h;return g?h=_:v?h=w:d.route.Component?h=P.createElement(d.route.Component,null):d.route.element?h=d.route.element:h=l,P.createElement(I0,{match:d,routeContext:{outlet:l,matches:y,isDataRoute:t!=null},children:h})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(D0,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:p(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):p()},null)}var py=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(py||{}),Ea=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ea||{});function N0(e){let r=P.useContext(Kl);return r||ge(!1),r}function $0(e){let r=P.useContext(P0);return r||ge(!1),r}function F0(e){let r=P.useContext(vr);return r||ge(!1),r}function hy(e){let r=F0(),t=r.matches[r.matches.length-1];return t.route.id||ge(!1),t.route.id}function U0(){var e;let r=P.useContext(uy),t=$0(Ea.UseRouteError),n=hy(Ea.UseRouteError);return r!==void 0?r:(e=t.errors)==null?void 0:e[n]}function V0(){let{router:e}=N0(py.UseNavigateStable),r=hy(Ea.UseNavigateStable),t=P.useRef(!1);return ly(()=>{t.current=!0}),P.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Mi({fromRouteId:r},o)))},[e,r])}function je(e){ge(!1)}function B0(e){let{basename:r="/",children:t=null,location:n,navigationType:i=Xt.Pop,navigator:o,static:a=!1,future:s}=e;Ki()&&ge(!1);let c=r.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:c,navigator:o,static:a,future:Mi({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof n=="string"&&(n=Ur(n));let{pathname:l="/",search:d="",hash:f="",state:g=null,key:v="default"}=n,_=P.useMemo(()=>{let w=ql(l,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:g,key:v},navigationType:i}},[c,l,d,f,g,v,i]);return _==null?null:P.createElement(Vr.Provider,{value:u},P.createElement(Za.Provider,{children:t,value:_}))}function z0(e){let{children:r,location:t}=e;return x0(Cu(r),t)}new Promise(()=>{});function Cu(e,r){r===void 0&&(r=[]);let t=[];return P.Children.forEach(e,(n,i)=>{if(!P.isValidElement(n))return;let o=[...r,i];if(n.type===P.Fragment){t.push.apply(t,Cu(n.props.children,o));return}n.type!==je&&ge(!1),!n.props.index||!n.props.children||ge(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Cu(n.props.children,o)),t.push(a)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Pu.apply(this,arguments)}function W0(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}function H0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Q0(e,r){return e.button===0&&(!r||r==="_self")&&!H0(e)}const q0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],K0="6";try{window.__reactRouterVersion=K0}catch{}const G0="startTransition",Zf=WS[G0];function Y0(e){let{basename:r,children:t,future:n,window:i}=e,o=P.useRef();o.current==null&&(o.current=r0({window:i,v5Compat:!0}));let a=o.current,[s,c]=P.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},l=P.useCallback(d=>{u&&Zf?Zf(()=>c(d)):c(d)},[c,u]);return P.useLayoutEffect(()=>a.listen(l),[a,l]),P.createElement(B0,{basename:r,children:t,location:s.location,navigationType:s.action,navigator:a,future:n})}const J0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X0=P.forwardRef(function(r,t){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:u,preventScrollReset:l,unstable_viewTransition:d}=r,f=W0(r,q0),{basename:g}=P.useContext(Vr),v,_=!1;if(typeof u=="string"&&Z0.test(u)&&(v=u,J0))try{let h=new URL(window.location.href),S=u.startsWith("//")?new URL(h.protocol+u):new URL(u),T=ql(S.pathname,g);S.origin===h.origin&&T!=null?u=T+S.search+S.hash:_=!0}catch{}let w=O0(u,{relative:i}),y=eb(u,{replace:a,state:s,target:c,preventScrollReset:l,relative:i,unstable_viewTransition:d});function p(h){n&&n(h),h.defaultPrevented||y(h)}return P.createElement("a",Pu({},f,{href:v||w,onClick:_||o?n:p,ref:t,target:c}))});var Xf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xf||(Xf={}));var ep;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ep||(ep={}));function eb(e,r){let{target:t,replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s}=r===void 0?{}:r,c=Ft(),u=In(),l=fy(e,{relative:a});return P.useCallback(d=>{if(Q0(d,t)){d.preventDefault();let f=n!==void 0?n:ba(u)===ba(l);c(e,{replace:f,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s})}},[u,c,l,n,i,t,e,o,a,s])}function vy(e,r){return function(){return e.apply(r,arguments)}}const{toString:tb}=Object.prototype,{getPrototypeOf:Gl}=Object,Xa=(e=>r=>{const t=tb.call(r);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),vt=e=>(e=e.toLowerCase(),r=>Xa(r)===e),es=e=>r=>typeof r===e,{isArray:Mn}=Array,Ni=es("undefined");function rb(e){return e!==null&&!Ni(e)&&e.constructor!==null&&!Ni(e.constructor)&&Je(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const my=vt("ArrayBuffer");function nb(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&my(e.buffer),r}const ib=es("string"),Je=es("function"),yy=es("number"),ts=e=>e!==null&&typeof e=="object",ob=e=>e===!0||e===!1,Ko=e=>{if(Xa(e)!=="object")return!1;const r=Gl(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ab=vt("Date"),sb=vt("File"),cb=vt("Blob"),ub=vt("FileList"),lb=e=>ts(e)&&Je(e.pipe),db=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||Je(e.append)&&((r=Xa(e))==="formdata"||r==="object"&&Je(e.toString)&&e.toString()==="[object FormData]"))},fb=vt("URLSearchParams"),[pb,hb,vb,mb]=["ReadableStream","Request","Response","Headers"].map(vt),yb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gi(e,r,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Mn(e))for(n=0,i=e.length;n<i;n++)r.call(null,e[n],n,e);else{const o=t?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],r.call(null,e[s],s,e)}}function gy(e,r){r=r.toLowerCase();const t=Object.keys(e);let n=t.length,i;for(;n-- >0;)if(i=t[n],r===i.toLowerCase())return i;return null}const Cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_y=e=>!Ni(e)&&e!==Cr;function Ou(){const{caseless:e}=_y(this)&&this||{},r={},t=(n,i)=>{const o=e&&gy(r,i)||i;Ko(r[o])&&Ko(n)?r[o]=Ou(r[o],n):Ko(n)?r[o]=Ou({},n):Mn(n)?r[o]=n.slice():r[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Gi(arguments[n],t);return r}const gb=(e,r,t,{allOwnKeys:n}={})=>(Gi(r,(i,o)=>{t&&Je(i)?e[o]=vy(i,t):e[o]=i},{allOwnKeys:n}),e),_b=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wb=(e,r,t,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),t&&Object.assign(e.prototype,t)},Sb=(e,r,t,n)=>{let i,o,a;const s={};if(r=r||{},e==null)return r;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,r))&&!s[a]&&(r[a]=e[a],s[a]=!0);e=t!==!1&&Gl(e)}while(e&&(!t||t(e,r))&&e!==Object.prototype);return r},kb=(e,r,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=r.length;const n=e.indexOf(r,t);return n!==-1&&n===t},Tb=e=>{if(!e)return null;if(Mn(e))return e;let r=e.length;if(!yy(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=e[r];return t},bb=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Gl(Uint8Array)),Eb=(e,r)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;r.call(e,o[0],o[1])}},Cb=(e,r)=>{let t;const n=[];for(;(t=e.exec(r))!==null;)n.push(t);return n},Pb=vt("HTMLFormElement"),Ob=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),tp=(({hasOwnProperty:e})=>(r,t)=>e.call(r,t))(Object.prototype),Rb=vt("RegExp"),wy=(e,r)=>{const t=Object.getOwnPropertyDescriptors(e),n={};Gi(t,(i,o)=>{let a;(a=r(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},xb=e=>{wy(e,(r,t)=>{if(Je(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(Je(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Lb=(e,r)=>{const t={},n=i=>{i.forEach(o=>{t[o]=!0})};return Mn(e)?n(e):n(String(e).split(r)),t},jb=()=>{},Ab=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r,Js="abcdefghijklmnopqrstuvwxyz",rp="0123456789",Sy={DIGIT:rp,ALPHA:Js,ALPHA_DIGIT:Js+Js.toUpperCase()+rp},Db=(e=16,r=Sy.ALPHA_DIGIT)=>{let t="";const{length:n}=r;for(;e--;)t+=r[Math.random()*n|0];return t};function Ib(e){return!!(e&&Je(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Mb=e=>{const r=new Array(10),t=(n,i)=>{if(ts(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[i]=n;const o=Mn(n)?[]:{};return Gi(n,(a,s)=>{const c=t(a,i+1);!Ni(c)&&(o[s]=c)}),r[i]=void 0,o}}return n};return t(e,0)},Nb=vt("AsyncFunction"),$b=e=>e&&(ts(e)||Je(e))&&Je(e.then)&&Je(e.catch),ky=((e,r)=>e?setImmediate:r?((t,n)=>(Cr.addEventListener("message",({source:i,data:o})=>{i===Cr&&o===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Cr.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Je(Cr.postMessage)),Fb=typeof queueMicrotask<"u"?queueMicrotask.bind(Cr):typeof process<"u"&&process.nextTick||ky,O={isArray:Mn,isArrayBuffer:my,isBuffer:rb,isFormData:db,isArrayBufferView:nb,isString:ib,isNumber:yy,isBoolean:ob,isObject:ts,isPlainObject:Ko,isReadableStream:pb,isRequest:hb,isResponse:vb,isHeaders:mb,isUndefined:Ni,isDate:ab,isFile:sb,isBlob:cb,isRegExp:Rb,isFunction:Je,isStream:lb,isURLSearchParams:fb,isTypedArray:bb,isFileList:ub,forEach:Gi,merge:Ou,extend:gb,trim:yb,stripBOM:_b,inherits:wb,toFlatObject:Sb,kindOf:Xa,kindOfTest:vt,endsWith:kb,toArray:Tb,forEachEntry:Eb,matchAll:Cb,isHTMLForm:Pb,hasOwnProperty:tp,hasOwnProp:tp,reduceDescriptors:wy,freezeMethods:xb,toObjectSet:Lb,toCamelCase:Ob,noop:jb,toFiniteNumber:Ab,findKey:gy,global:Cr,isContextDefined:_y,ALPHABET:Sy,generateString:Db,isSpecCompliantForm:Ib,toJSONObject:Mb,isAsyncFn:Nb,isThenable:$b,setImmediate:ky,asap:Fb};function Y(e,r,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}O.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const Ty=Y.prototype,by={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{by[e]={value:e}});Object.defineProperties(Y,by);Object.defineProperty(Ty,"isAxiosError",{value:!0});Y.from=(e,r,t,n,i,o)=>{const a=Object.create(Ty);return O.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Y.call(a,e.message,r,t,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Ub=null;function Ru(e){return O.isPlainObject(e)||O.isArray(e)}function Ey(e){return O.endsWith(e,"[]")?e.slice(0,-2):e}function np(e,r,t){return e?e.concat(r).map(function(i,o){return i=Ey(i),!t&&o?"["+i+"]":i}).join(t?".":""):r}function Vb(e){return O.isArray(e)&&!e.some(Ru)}const Bb=O.toFlatObject(O,{},null,function(r){return/^is[A-Z]/.test(r)});function rs(e,r,t){if(!O.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,t=O.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,w){return!O.isUndefined(w[_])});const n=t.metaTokens,i=t.visitor||l,o=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(r);if(!O.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(O.isDate(v))return v.toISOString();if(!c&&O.isBlob(v))throw new Y("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(v)||O.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function l(v,_,w){let y=v;if(v&&!w&&typeof v=="object"){if(O.endsWith(_,"{}"))_=n?_:_.slice(0,-2),v=JSON.stringify(v);else if(O.isArray(v)&&Vb(v)||(O.isFileList(v)||O.endsWith(_,"[]"))&&(y=O.toArray(v)))return _=Ey(_),y.forEach(function(h,S){!(O.isUndefined(h)||h===null)&&r.append(a===!0?np([_],S,o):a===null?_:_+"[]",u(h))}),!1}return Ru(v)?!0:(r.append(np(w,_,o),u(v)),!1)}const d=[],f=Object.assign(Bb,{defaultVisitor:l,convertValue:u,isVisitable:Ru});function g(v,_){if(!O.isUndefined(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(v),O.forEach(v,function(y,p){(!(O.isUndefined(y)||y===null)&&i.call(r,y,O.isString(p)?p.trim():p,_,f))===!0&&g(y,_?_.concat(p):[p])}),d.pop()}}if(!O.isObject(e))throw new TypeError("data must be an object");return g(e),r}function ip(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function Yl(e,r){this._pairs=[],e&&rs(e,this,r)}const Cy=Yl.prototype;Cy.append=function(r,t){this._pairs.push([r,t])};Cy.toString=function(r){const t=r?function(n){return r.call(this,n,ip)}:ip;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function zb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Py(e,r,t){if(!r)return e;const n=t&&t.encode||zb,i=t&&t.serialize;let o;if(i?o=i(r,t):o=O.isURLSearchParams(r)?r.toString():new Yl(r,t).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class op{constructor(){this.handlers=[]}use(r,t,n){return this.handlers.push({fulfilled:r,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){O.forEach(this.handlers,function(n){n!==null&&r(n)})}}const Oy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wb=typeof URLSearchParams<"u"?URLSearchParams:Yl,Hb=typeof FormData<"u"?FormData:null,Qb=typeof Blob<"u"?Blob:null,qb={isBrowser:!0,classes:{URLSearchParams:Wb,FormData:Hb,Blob:Qb},protocols:["http","https","file","blob","url","data"]},Jl=typeof window<"u"&&typeof document<"u",xu=typeof navigator=="object"&&navigator||void 0,Kb=Jl&&(!xu||["ReactNative","NativeScript","NS"].indexOf(xu.product)<0),Gb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yb=Jl&&window.location.href||"http://localhost",Jb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jl,hasStandardBrowserEnv:Kb,hasStandardBrowserWebWorkerEnv:Gb,navigator:xu,origin:Yb},Symbol.toStringTag,{value:"Module"})),We={...Jb,...qb};function Zb(e,r){return rs(e,new We.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,o){return We.isNode&&O.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))}function Xb(e){return O.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function eE(e){const r={},t=Object.keys(e);let n;const i=t.length;let o;for(n=0;n<i;n++)o=t[n],r[o]=e[o];return r}function Ry(e){function r(t,n,i,o){let a=t[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=t.length;return a=!a&&O.isArray(i)?i.length:a,c?(O.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!O.isObject(i[a]))&&(i[a]=[]),r(t,n,i[a],o)&&O.isArray(i[a])&&(i[a]=eE(i[a])),!s)}if(O.isFormData(e)&&O.isFunction(e.entries)){const t={};return O.forEachEntry(e,(n,i)=>{r(Xb(n),i,t,0)}),t}return null}function tE(e,r,t){if(O.isString(e))try{return(r||JSON.parse)(e),O.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const Yi={transitional:Oy,adapter:["xhr","http","fetch"],transformRequest:[function(r,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=O.isObject(r);if(o&&O.isHTMLForm(r)&&(r=new FormData(r)),O.isFormData(r))return i?JSON.stringify(Ry(r)):r;if(O.isArrayBuffer(r)||O.isBuffer(r)||O.isStream(r)||O.isFile(r)||O.isBlob(r)||O.isReadableStream(r))return r;if(O.isArrayBufferView(r))return r.buffer;if(O.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Zb(r,this.formSerializer).toString();if((s=O.isFileList(r))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return rs(s?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),tE(r)):r}],transformResponse:[function(r){const t=this.transitional||Yi.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(O.isResponse(r)||O.isReadableStream(r))return r;if(r&&O.isString(r)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(r)}catch(s){if(a)throw s.name==="SyntaxError"?Y.from(s,Y.ERR_BAD_RESPONSE,this,null,this.response):s}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:We.classes.FormData,Blob:We.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],e=>{Yi.headers[e]={}});const rE=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nE=e=>{const r={};let t,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||r[t]&&rE[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},ap=Symbol("internals");function Jn(e){return e&&String(e).trim().toLowerCase()}function Go(e){return e===!1||e==null?e:O.isArray(e)?e.map(Go):String(e)}function iE(e){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)r[n[1]]=n[2];return r}const oE=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zs(e,r,t,n,i){if(O.isFunction(n))return n.call(this,r,t);if(i&&(r=t),!!O.isString(r)){if(O.isString(n))return r.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(r)}}function aE(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function sE(e,r){const t=O.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(i,o,a){return this[n].call(this,r,i,o,a)},configurable:!0})})}class He{constructor(r){r&&this.set(r)}set(r,t,n){const i=this;function o(s,c,u){const l=Jn(c);if(!l)throw new Error("header name must be a non-empty string");const d=O.findKey(i,l);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=Go(s))}const a=(s,c)=>O.forEach(s,(u,l)=>o(u,l,c));if(O.isPlainObject(r)||r instanceof this.constructor)a(r,t);else if(O.isString(r)&&(r=r.trim())&&!oE(r))a(nE(r),t);else if(O.isHeaders(r))for(const[s,c]of r.entries())o(c,s,n);else r!=null&&o(t,r,n);return this}get(r,t){if(r=Jn(r),r){const n=O.findKey(this,r);if(n){const i=this[n];if(!t)return i;if(t===!0)return iE(i);if(O.isFunction(t))return t.call(this,i,n);if(O.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=Jn(r),r){const n=O.findKey(this,r);return!!(n&&this[n]!==void 0&&(!t||Zs(this,this[n],n,t)))}return!1}delete(r,t){const n=this;let i=!1;function o(a){if(a=Jn(a),a){const s=O.findKey(n,a);s&&(!t||Zs(n,n[s],s,t))&&(delete n[s],i=!0)}}return O.isArray(r)?r.forEach(o):o(r),i}clear(r){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const o=t[n];(!r||Zs(this,this[o],o,r,!0))&&(delete this[o],i=!0)}return i}normalize(r){const t=this,n={};return O.forEach(this,(i,o)=>{const a=O.findKey(n,o);if(a){t[a]=Go(i),delete t[o];return}const s=r?aE(o):String(o).trim();s!==o&&delete t[o],t[s]=Go(i),n[s]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return O.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=r&&O.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const n=new this(r);return t.forEach(i=>n.set(i)),n}static accessor(r){const n=(this[ap]=this[ap]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Jn(a);n[s]||(sE(i,a),n[s]=!0)}return O.isArray(r)?r.forEach(o):o(r),this}}He.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(He.prototype,({value:e},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(n){this[t]=n}}});O.freezeMethods(He);function Xs(e,r){const t=this||Yi,n=r||t,i=He.from(n.headers);let o=n.data;return O.forEach(e,function(s){o=s.call(t,o,i.normalize(),r?r.status:void 0)}),i.normalize(),o}function xy(e){return!!(e&&e.__CANCEL__)}function Nn(e,r,t){Y.call(this,e??"canceled",Y.ERR_CANCELED,r,t),this.name="CanceledError"}O.inherits(Nn,Y,{__CANCEL__:!0});function Ly(e,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):r(new Y("Request failed with status code "+t.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function cE(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function uE(e,r){e=e||10;const t=new Array(e),n=new Array(e);let i=0,o=0,a;return r=r!==void 0?r:1e3,function(c){const u=Date.now(),l=n[o];a||(a=u),t[i]=c,n[i]=u;let d=o,f=0;for(;d!==i;)f+=t[d++],d=d%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-a<r)return;const g=l&&u-l;return g?Math.round(f*1e3/g):void 0}}function lE(e,r){let t=0,n=1e3/r,i,o;const a=(u,l=Date.now())=>{t=l,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const l=Date.now(),d=l-t;d>=n?a(u,l):(i=u,o||(o=setTimeout(()=>{o=null,a(i)},n-d)))},()=>i&&a(i)]}const Ca=(e,r,t=3)=>{let n=0;const i=uE(50,250);return lE(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-n,u=i(c),l=a<=s;n=a;const d={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:u||void 0,estimated:u&&s&&l?(s-a)/u:void 0,event:o,lengthComputable:s!=null,[r?"download":"upload"]:!0};e(d)},t)},sp=(e,r)=>{const t=e!=null;return[n=>r[0]({lengthComputable:t,total:e,loaded:n}),r[1]]},cp=e=>(...r)=>O.asap(()=>e(...r)),dE=We.hasStandardBrowserEnv?function(){const r=We.navigator&&/(msie|trident)/i.test(We.navigator.userAgent),t=document.createElement("a");let n;function i(o){let a=o;return r&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){const s=O.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}(),fE=We.hasStandardBrowserEnv?{write(e,r,t,n,i,o){const a=[e+"="+encodeURIComponent(r)];O.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),O.isString(n)&&a.push("path="+n),O.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pE(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hE(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function jy(e,r){return e&&!pE(r)?hE(e,r):r}const up=e=>e instanceof He?{...e}:e;function Mr(e,r){r=r||{};const t={};function n(u,l,d){return O.isPlainObject(u)&&O.isPlainObject(l)?O.merge.call({caseless:d},u,l):O.isPlainObject(l)?O.merge({},l):O.isArray(l)?l.slice():l}function i(u,l,d){if(O.isUndefined(l)){if(!O.isUndefined(u))return n(void 0,u,d)}else return n(u,l,d)}function o(u,l){if(!O.isUndefined(l))return n(void 0,l)}function a(u,l){if(O.isUndefined(l)){if(!O.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function s(u,l,d){if(d in r)return n(u,l);if(d in e)return n(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(u,l)=>i(up(u),up(l),!0)};return O.forEach(Object.keys(Object.assign({},e,r)),function(l){const d=c[l]||i,f=d(e[l],r[l],l);O.isUndefined(f)&&d!==s||(t[l]=f)}),t}const Ay=e=>{const r=Mr({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=r;r.headers=a=He.from(a),r.url=Py(jy(r.baseURL,r.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(O.isFormData(t)){if(We.hasStandardBrowserEnv||We.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...l]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...l].join("; "))}}if(We.hasStandardBrowserEnv&&(n&&O.isFunction(n)&&(n=n(r)),n||n!==!1&&dE(r.url))){const u=i&&o&&fE.read(o);u&&a.set(i,u)}return r},vE=typeof XMLHttpRequest<"u",mE=vE&&function(e){return new Promise(function(t,n){const i=Ay(e);let o=i.data;const a=He.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:u}=i,l,d,f,g,v;function _(){g&&g(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function y(){if(!w)return;const h=He.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),T={data:!s||s==="text"||s==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:h,config:e,request:w};Ly(function(E){t(E),_()},function(E){n(E),_()},T),w=null}"onloadend"in w?w.onloadend=y:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(y)},w.onabort=function(){w&&(n(new Y("Request aborted",Y.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new Y("Network Error",Y.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||Oy;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new Y(S,T.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,e,w)),w=null},o===void 0&&a.setContentType(null),"setRequestHeader"in w&&O.forEach(a.toJSON(),function(S,T){w.setRequestHeader(T,S)}),O.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),s&&s!=="json"&&(w.responseType=i.responseType),u&&([f,v]=Ca(u,!0),w.addEventListener("progress",f)),c&&w.upload&&([d,g]=Ca(c),w.upload.addEventListener("progress",d),w.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(l=h=>{w&&(n(!h||h.type?new Nn(null,e,w):h),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const p=cE(i.url);if(p&&We.protocols.indexOf(p)===-1){n(new Y("Unsupported protocol "+p+":",Y.ERR_BAD_REQUEST,e));return}w.send(o||null)})},yE=(e,r)=>{const{length:t}=e=e?e.filter(Boolean):[];if(r||t){let n=new AbortController,i;const o=function(u){if(!i){i=!0,s();const l=u instanceof Error?u:this.reason;n.abort(l instanceof Y?l:new Nn(l instanceof Error?l.message:l))}};let a=r&&setTimeout(()=>{a=null,o(new Y(`timeout ${r} of ms exceeded`,Y.ETIMEDOUT))},r);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>O.asap(s),c}},gE=function*(e,r){let t=e.byteLength;if(t<r){yield e;return}let n=0,i;for(;n<t;)i=n+r,yield e.slice(n,i),n=i},_E=async function*(e,r){for await(const t of wE(e))yield*gE(t,r)},wE=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)break;yield n}}finally{await r.cancel()}},lp=(e,r,t,n)=>{const i=_E(e,r);let o=0,a,s=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await i.next();if(u){s(),c.close();return}let d=l.byteLength;if(t){let f=o+=d;t(f)}c.enqueue(new Uint8Array(l))}catch(u){throw s(u),u}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},ns=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dy=ns&&typeof ReadableStream=="function",SE=ns&&(typeof TextEncoder=="function"?(e=>r=>e.encode(r))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Iy=(e,...r)=>{try{return!!e(...r)}catch{return!1}},kE=Dy&&Iy(()=>{let e=!1;const r=new Request(We.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!r}),dp=64*1024,Lu=Dy&&Iy(()=>O.isReadableStream(new Response("").body)),Pa={stream:Lu&&(e=>e.body)};ns&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Pa[r]&&(Pa[r]=O.isFunction(e[r])?t=>t[r]():(t,n)=>{throw new Y(`Response type '${r}' is not supported`,Y.ERR_NOT_SUPPORT,n)})})})(new Response);const TE=async e=>{if(e==null)return 0;if(O.isBlob(e))return e.size;if(O.isSpecCompliantForm(e))return(await new Request(We.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(O.isArrayBufferView(e)||O.isArrayBuffer(e))return e.byteLength;if(O.isURLSearchParams(e)&&(e=e+""),O.isString(e))return(await SE(e)).byteLength},bE=async(e,r)=>{const t=O.toFiniteNumber(e.getContentLength());return t??TE(r)},EE=ns&&(async e=>{let{url:r,method:t,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:u,headers:l,withCredentials:d="same-origin",fetchOptions:f}=Ay(e);u=u?(u+"").toLowerCase():"text";let g=yE([i,o&&o.toAbortSignal()],a),v;const _=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(c&&kE&&t!=="get"&&t!=="head"&&(w=await bE(l,n))!==0){let T=new Request(r,{method:"POST",body:n,duplex:"half"}),b;if(O.isFormData(n)&&(b=T.headers.get("content-type"))&&l.setContentType(b),T.body){const[E,C]=sp(w,Ca(cp(c)));n=lp(T.body,dp,E,C)}}O.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;v=new Request(r,{...f,signal:g,method:t.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:y?d:void 0});let p=await fetch(v);const h=Lu&&(u==="stream"||u==="response");if(Lu&&(s||h&&_)){const T={};["status","statusText","headers"].forEach(A=>{T[A]=p[A]});const b=O.toFiniteNumber(p.headers.get("content-length")),[E,C]=s&&sp(b,Ca(cp(s),!0))||[];p=new Response(lp(p.body,dp,E,()=>{C&&C(),_&&_()}),T)}u=u||"text";let S=await Pa[O.findKey(Pa,u)||"text"](p,e);return!h&&_&&_(),await new Promise((T,b)=>{Ly(T,b,{data:S,headers:He.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:v})})}catch(y){throw _&&_(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,e,v),{cause:y.cause||y}):Y.from(y,y&&y.code,e,v)}}),ju={http:Ub,xhr:mE,fetch:EE};O.forEach(ju,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const fp=e=>`- ${e}`,CE=e=>O.isFunction(e)||e===null||e===!1,My={getAdapter:e=>{e=O.isArray(e)?e:[e];const{length:r}=e;let t,n;const i={};for(let o=0;o<r;o++){t=e[o];let a;if(n=t,!CE(t)&&(n=ju[(a=String(t)).toLowerCase()],n===void 0))throw new Y(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(fp).join(`
`):" "+fp(o[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:ju};function ec(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nn(null,e)}function pp(e){return ec(e),e.headers=He.from(e.headers),e.data=Xs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),My.getAdapter(e.adapter||Yi.adapter)(e).then(function(n){return ec(e),n.data=Xs.call(e,e.transformResponse,n),n.headers=He.from(n.headers),n},function(n){return xy(n)||(ec(e),n&&n.response&&(n.response.data=Xs.call(e,e.transformResponse,n.response),n.response.headers=He.from(n.response.headers))),Promise.reject(n)})}const Ny="1.7.7",Zl={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Zl[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const hp={};Zl.transitional=function(r,t,n){function i(o,a){return"[Axios v"+Ny+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(r===!1)throw new Y(i(a," has been removed"+(t?" in "+t:"")),Y.ERR_DEPRECATED);return t&&!hp[a]&&(hp[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(o,a,s):!0}};function PE(e,r,t){if(typeof e!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=r[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new Y("option "+o+" must be "+c,Y.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Y("Unknown option "+o,Y.ERR_BAD_OPTION)}}const Au={assertOptions:PE,validators:Zl},Wt=Au.validators;class Rr{constructor(r){this.defaults=r,this.interceptors={request:new op,response:new op}}async request(r,t){try{return await this._request(r,t)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=Mr(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:o}=t;n!==void 0&&Au.assertOptions(n,{silentJSONParsing:Wt.transitional(Wt.boolean),forcedJSONParsing:Wt.transitional(Wt.boolean),clarifyTimeoutError:Wt.transitional(Wt.boolean)},!1),i!=null&&(O.isFunction(i)?t.paramsSerializer={serialize:i}:Au.assertOptions(i,{encode:Wt.function,serialize:Wt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&O.merge(o.common,o[t.method]);o&&O.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),t.headers=He.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(c=c&&_.synchronous,s.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let l,d=0,f;if(!c){const v=[pp.bind(this),void 0];for(v.unshift.apply(v,s),v.push.apply(v,u),f=v.length,l=Promise.resolve(t);d<f;)l=l.then(v[d++],v[d++]);return l}f=s.length;let g=t;for(d=0;d<f;){const v=s[d++],_=s[d++];try{g=v(g)}catch(w){_.call(this,w);break}}try{l=pp.call(this,g)}catch(v){return Promise.reject(v)}for(d=0,f=u.length;d<f;)l=l.then(u[d++],u[d++]);return l}getUri(r){r=Mr(this.defaults,r);const t=jy(r.baseURL,r.url);return Py(t,r.params,r.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(r){Rr.prototype[r]=function(t,n){return this.request(Mr(n||{},{method:r,url:t,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(r){function t(n){return function(o,a,s){return this.request(Mr(s||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Rr.prototype[r]=t(),Rr.prototype[r+"Form"]=t(!0)});class Xl{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},r(function(o,a,s){n.reason||(n.reason=new Nn(o,a,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const r=new AbortController,t=n=>{r.abort(n)};return this.subscribe(t),r.signal.unsubscribe=()=>this.unsubscribe(t),r.signal}static source(){let r;return{token:new Xl(function(i){r=i}),cancel:r}}}function OE(e){return function(t){return e.apply(null,t)}}function RE(e){return O.isObject(e)&&e.isAxiosError===!0}const Du={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Du).forEach(([e,r])=>{Du[r]=e});function $y(e){const r=new Rr(e),t=vy(Rr.prototype.request,r);return O.extend(t,Rr.prototype,r,{allOwnKeys:!0}),O.extend(t,r,null,{allOwnKeys:!0}),t.create=function(i){return $y(Mr(e,i))},t}const re=$y(Yi);re.Axios=Rr;re.CanceledError=Nn;re.CancelToken=Xl;re.isCancel=xy;re.VERSION=Ny;re.toFormData=rs;re.AxiosError=Y;re.Cancel=re.CanceledError;re.all=function(r){return Promise.all(r)};re.spread=OE;re.isAxiosError=RE;re.mergeConfig=Mr;re.AxiosHeaders=He;re.formToJSON=e=>Ry(O.isHTMLForm(e)?new FormData(e):e);re.getAdapter=My.getAdapter;re.HttpStatusCode=Du;re.default=re;const Ji="http://localhost:5001",xE=async(e,r)=>{try{return(await re.post(`${Ji}/api/auth/login`,{email:e,password:r},{withCredentials:!0})).data}catch(t){throw console.error("Error during login:",t),t}},LE=async e=>{try{return(await re.post(`${Ji}/api/auth/signup`,e)).data}catch(r){throw console.error("Error during sign-up:",r),r}},jE=async e=>{try{return(await re.post(`${Ji}/api/auth/forgot-password`,{email:e})).data}catch(r){throw console.error("Error during password reset request:",r),r}},AE=async(e,r)=>{try{return await re.post(`${Ji}/api/auth/reset-password/${e}`,{password:r})}catch(t){throw t}},DE=async()=>{try{return(await re.post(`${Ji}/api/auth/logout`,{},{withCredentials:!0})).data}catch(e){throw console.error("Error during logout:",e),e}},xr="/autism-sense/assets/default-profile-BHlb9M6-.png";var Fy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vp=jt.createContext&&jt.createContext(Fy),IE=["attr","size","title"];function ME(e,r){if(e==null)return{};var t=NE(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function NE(e,r){if(e==null)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Oa.apply(this,arguments)}function mp(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Ra(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mp(Object(t),!0).forEach(function(n){$E(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mp(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function $E(e,r,t){return r=FE(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FE(e){var r=UE(e,"string");return typeof r=="symbol"?r:r+""}function UE(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Uy(e){return e&&e.map((r,t)=>jt.createElement(r.tag,Ra({key:t},r.attr),Uy(r.child)))}function VE(e){return r=>jt.createElement(BE,Oa({attr:Ra({},e.attr)},r),Uy(e.child))}function BE(e){var r=t=>{var{attr:n,size:i,title:o}=e,a=ME(e,IE),s=i||t.size||"1em",c;return t.className&&(c=t.className),e.className&&(c=(c?c+" ":"")+e.className),jt.createElement("svg",Oa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:c,style:Ra(Ra({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&jt.createElement("title",null,o),e.children)};return vp!==void 0?jt.createElement(vp.Consumer,null,t=>r(t)):r(Fy)}function Vy(e){return VE({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(e)}const zE=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(""),[c,u]=P.useState(""),[l,d]=P.useState(""),[f,g]=P.useState(null),[v,_]=P.useState(""),[w,y]=P.useState(""),[p,h]=P.useState(""),[S,T]=P.useState(""),[b,E]=P.useState(""),[C,A]=P.useState(""),I=Ft(),Z=J=>{const ee=J.target.files[0];if(ee){const _e=new FileReader;_e.onloadend=()=>{g(_e.result)},_e.readAsDataURL(ee)}},L=J=>/^[A-Za-z]{2,}$/.test(J),$=J=>/^[A-Za-z]{2,}$/.test(J),R=J=>{const ee=new Date;return new Date(J)<=ee},N=J=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J),D=J=>J.length>=8&&/[A-Za-z]/.test(J)&&/\d/.test(J),q=J=>{const ee=J.target.value;r(ee),_(L(ee)?"":"First name should be at least two letters long.")},x=J=>{const ee=J.target.value;n(ee),y($(ee)?"":"Last name should be at least two letters long.")},M=J=>{const ee=J.target.value;o(ee),h(R(ee)?"":"Child's date of birth cannot be in the future.")},B=J=>{const ee=J.target.value;s(ee),T(N(ee)?"":"Please enter a valid email address.")},K=J=>{const ee=J.target.value;u(ee),E(D(ee)?"":"Password must be at least 8 characters long and contain both letters and numbers.")},Q=J=>{const ee=J.target.value;d(ee),A(ee!==c?"Passwords do not match.":"")},G=async J=>{if(J.preventDefault(),!L(e)||!$(t)||!R(i)||!N(a)||!D(c)||c!==l){L(e)||_("First name should be at least two letters long."),$(t)||y("Last name should be at least two letters long."),R(i)||h("Child's date of birth cannot be in the future."),N(a)||T("Please enter a valid email address."),D(c)||E("Password must be at least 8 characters long and contain both letters and numbers."),c!==l&&A("Passwords do not match.");return}const ee={firstName:e,lastName:t,dob:i,email:a,password:c,photo:f};try{const _e=await LE(ee);_e.message==="Child data saved successfully"&&I("/home",{state:{user:_e.user}})}catch(_e){_e.response&&_e.response.status===409?window.alert("This email is already in use. Please use a different email."):console.error("Sign up error:",_e)}},oe=()=>{I("/")};return k.jsxs("div",{className:"form-container",children:[k.jsx("h2",{children:"Add Child"}),k.jsxs("form",{onSubmit:G,children:[k.jsx("div",{className:"form-photo",children:k.jsxs("div",{className:"photo-ring",children:[k.jsx("img",{src:f||xr,alt:"Profile",className:"photo-img"}),k.jsx("label",{htmlFor:"photo-input",className:"photo-pencil",children:k.jsx(Vy,{})}),k.jsx("input",{type:"file",id:"photo-input",accept:"image/*",onChange:Z,className:"photo-input"})]})}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"text",placeholder:"First Name",value:e,onChange:q,required:!0,className:"input-field"}),v&&k.jsx("span",{className:"error-message",children:v})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"text",placeholder:"Last Name",value:t,onChange:x,required:!0,className:"input-field"}),w&&k.jsx("span",{className:"error-message",children:w})]}),k.jsxs("div",{className:"form-group dob-field-container",children:[k.jsx("input",{type:"date",id:"childDOB",value:i,onChange:M,required:!0,max:new Date().toISOString().split("T")[0],className:"dob-input"}),k.jsx("label",{htmlFor:"childDOB",className:"dob-hint",children:"Enter your birthday"}),p&&k.jsx("span",{className:"error-message",children:p})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"email",placeholder:"Email",value:a,onChange:B,required:!0,className:"input-field"}),S&&k.jsx("span",{className:"error-message",children:S})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"password",placeholder:"Password",value:c,onChange:K,required:!0,className:"input-field"}),b&&k.jsx("span",{className:"error-message",children:b})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"password",placeholder:"Confirm Password",value:l,onChange:Q,required:!0,className:"input-field"}),C&&k.jsx("span",{className:"error-message",children:C})]}),k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{type:"button",className:"cancel-btn",onClick:oe,children:"Cancel"}),k.jsx("button",{type:"submit",className:"add-child-btn",children:"Sign up"})]})]})]})},By="/autism-sense/assets/logo-CYO5hS3s.png",WE=()=>{const e=Ft(),r=()=>{e("/host")},t=()=>{e("/sign-up")},n=()=>{e("/login")};return k.jsxs("div",{className:"landing-container",children:[k.jsxs("div",{className:"logo-container",children:[k.jsx("img",{src:By,alt:"AutismSense Logo",className:"logo"}),k.jsx("h1",{className:"title",children:"AutismSense"})]}),k.jsx("button",{className:"btn",onClick:r,children:"Create Meeting (Normal Mode)"}),k.jsx("button",{className:"btn",onClick:t,children:"Create An Account"}),k.jsx("button",{className:"btn",onClick:n,children:"Login"}),k.jsxs("footer",{className:"landing-footer",children:[k.jsx(X0,{to:"/about-us",children:"About Us"}),k.jsx("p",{children:"© 2024 AutismSense. All rights reserved."})]})]})},HE=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(""),[c,u]=P.useState(""),l=Ft(),d=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),f=p=>p.length>=8&&/[A-Za-z]/.test(p)&&/\d/.test(p),g=p=>{const h=p.target.value;r(h),d(h)?o(""):o("Please enter a valid email address.")},v=p=>{const h=p.target.value;n(h),f(h)?s(""):s("Password must be at least 8 characters long and contain both letters and numbers.")},_=async p=>{if(p.preventDefault(),!d(e)){o("Please enter a valid email address.");return}if(!f(t)){s("Password must be at least 8 characters long and contain both letters and numbers.");return}try{const h=await xE(e,t);console.log("Login result:",h),h.message==="Login successful"?h.user?(console.log("Navigating with user:",h.user),l("/home",{state:{user:h.user}})):(console.error("No user data received from backend"),u("No user data received.")):u(h.message||"Login failed. Please try again.")}catch(h){u("An error occurred during login. Please try again."),console.error("Login error:",h)}},w=()=>{l("/")},y=()=>{l("/forget-password")};return k.jsxs("div",{className:"form-container",children:[k.jsx("h2",{children:"Login"}),k.jsxs("form",{onSubmit:_,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:g,required:!0,className:"input-field"}),i&&k.jsx("span",{className:"error-message",children:i})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:v,required:!0,className:"input-field"}),a&&k.jsx("span",{className:"error-message",children:a})]}),k.jsx("div",{children:k.jsx("button",{type:"button",className:"forget-btn",onClick:y,children:"Forget password?"})}),c&&k.jsx("span",{className:"error-message",children:c})," ",k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{type:"button",className:"cancel-btn",onClick:w,children:"Cancel"}),k.jsx("button",{type:"submit",className:"add-child-btn",children:"Login"})]})]})]})},zy="http://localhost:5001",Wy=async e=>{try{return(await re.get(`${zy}/api/child/child-profile/${e}`,{withCredentials:!0})).data}catch(r){throw r}},QE=async(e,r)=>{try{return await re.put(`${zy}/api/child/update-child/${e}`,r,{withCredentials:!0})}catch(t){throw t}},qE=()=>{var y;const e=In(),r=Ft(),[t,n]=P.useState(((y=e.state)==null?void 0:y.user)||null),[i,o]=P.useState(xr),[a,s]=P.useState("First Name Last Name"),[c,u]=P.useState(null),[l,d]=P.useState(!0),[f,g]=P.useState("");P.useEffect(()=>{var p;if(t)o(t.photo||xr),s(`${t.firstName} ${t.lastName}`||"First Name Last Name"),u(t._id||t.id),d(!1);else{const h=(p=e.state)==null?void 0:p.id;h?Wy(h).then(S=>{S?(n(S),o(S.photo||xr),s(`${S.firstName} ${S.lastName}`||"First Name Last Name"),u(S._id||S.id)):r("/login")}).catch(()=>{g("Unable to load user data. Please try again."),r("/login")}).finally(()=>d(!1)):(g("No child ID available"),r("/login"))}},[t,r,e.state]);const v=async()=>{try{await DE(),r("/")}catch(p){console.error("Error during logout:",p)}},_=()=>{c?r(`/child-profile/${c}`,{state:{user:t,id:c}}):console.error("Child ID not found. Please wait for data to load.")},w=()=>{r("/gust")};return k.jsxs("div",{className:"container",children:[l&&k.jsx("p",{children:"Loading..."}),f&&k.jsx("p",{className:"error-message",children:f}),k.jsxs("header",{className:"navbar",children:[k.jsx("div",{className:"navbar-section logo-section",children:k.jsx("div",{className:"ring-holder",children:k.jsx("img",{src:By,alt:"Logo",className:"logo-image"})})}),k.jsxs("button",{className:"navbar-section profile-section",onClick:_,disabled:l,children:[k.jsx("div",{className:"ring-holder",children:k.jsx("img",{src:i,alt:"Profile",className:"profile-image"})}),k.jsx("span",{children:a})]}),k.jsx("div",{className:"navbar-section logout-section",children:k.jsx("button",{onClick:v,children:"Logout"})})]}),k.jsxs("section",{className:"dashboard-content",children:[k.jsxs("div",{className:"progress-report",children:[k.jsx("h2",{children:"Progress Overview"}),k.jsx("p",{children:"This section will display an overview of the child's progress."})]}),k.jsxs("div",{className:"detailed-reports",children:[k.jsx("h2",{children:"Detailed Reports"}),k.jsx("p",{children:"This section will display detailed reports and analysis."})]})]}),k.jsx("section",{className:"zoom-navigation",children:k.jsx("button",{className:"btn",onClick:w,children:"Join Meeting (Special Mode)"})}),k.jsx("footer",{className:"footer",children:k.jsx("nav",{className:"bottom-bar",children:k.jsx("p",{children:"© 2024 AutismSense. All rights reserved."})})})]})},KE=()=>{const e=Ft(),r=()=>{e("/")};return k.jsxs("div",{className:"container",children:[k.jsxs("header",{className:"header",children:[k.jsx("h1",{children:"Welcome to AutismSense"}),k.jsx("p",{children:"Your companion in creating a supportive environment for children with Autism."})]}),k.jsxs("section",{className:"content",children:[k.jsx("p",{children:"AutismSense is dedicated to creating a supportive environment for children with High-Functioning Autism (HFA). Our platform offers tools to assist in online interactions, making them more accessible and engaging for children with HFA. We believe that every child deserves the opportunity to connect with others in a way that is comfortable and supportive."}),k.jsx("p",{children:"Our team is passionate about using technology to make a positive impact in the lives of children and their families. We are committed to providing a platform that is both user-friendly and effective in helping children with HFA navigate the challenges of online communication."}),k.jsx("p",{children:"Features"}),k.jsxs("ul",{children:[k.jsx("li",{children:"Facial Expression Analysis"}),k.jsx("li",{children:"Conversation Transcription"}),k.jsx("li",{children:"Gamified Learning Modules"}),k.jsx("li",{children:"Profile Management"})]})]}),k.jsx("button",{className:"btn",onClick:r,children:"Back"}),k.jsx("footer",{className:"landing-footer",children:k.jsx("p",{children:"© 2024 AutismSense. All rights reserved."})})]})},GE=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(""),[i,o]=P.useState(""),a=Ft(),s=f=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f),c=f=>{const g=f.target.value;r(g),s(g)?n(""):n("Please enter a valid email address.")},[u,l]=P.useState(!1),d=async f=>{if(f.preventDefault(),l(!0),!s(e)){n("Please enter a valid email address."),l(!1);return}try{(await jE(e)).message==="Password reset email sent"&&(alert("Check your email for a password reset link"),a("/"))}catch(g){console.error("Error during reset password:",g),o("An error occurred while sending the reset email. Please try again.")}finally{l(!1)}};return k.jsxs("div",{className:"form-container",children:[k.jsx("h2",{children:"Forgot Password"}),k.jsx("p",{children:"If you forgot your password, enter your email and we will send you a reset link."}),k.jsxs("form",{onSubmit:d,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("input",{type:"email",placeholder:"Enter your email",value:e,onChange:c,required:!0,className:"input-field"}),t&&k.jsx("span",{className:"error-message",children:t}),i&&k.jsx("span",{className:"server-error-message",children:i})]}),k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{type:"button",onClick:()=>a("/"),children:"Cancel"}),k.jsx("button",{type:"submit",disabled:u,children:u?"Sending...":"Send Reset Email"})]})]})]})},YE=()=>{var K;const e=In(),r=Ft(),{childId:t}=dy(),[n,i]=P.useState(((K=e.state)==null?void 0:K.user)||null),[o,a]=P.useState(!0),[s,c]=P.useState(""),[u,l]=P.useState(!1),[d,f]=P.useState(""),[g,v]=P.useState(""),[_,w]=P.useState(""),[y,p]=P.useState(""),[h,S]=P.useState(null),[T,b]=P.useState(""),[E,C]=P.useState(""),[A,I]=P.useState(""),[Z,L]=P.useState("");if(P.useEffect(()=>{!n&&t?Wy(t).then(Q=>{i(Q),f(Q.firstName||""),v(Q.lastName||""),w(Q.dob?new Date(Q.dob).toISOString().split("T")[0]:""),p(Q.email||""),S(Q.photo||xr)}).catch(Q=>{c("Unable to load user data. Please try again."),console.error("Error fetching child data:",Q)}).finally(()=>{a(!1)}):n&&(f(n.firstName||""),v(n.lastName||""),w(n.dob?new Date(n.dob).toISOString().split("T")[0]:""),p(n.email||""),S(n.photo||xr),a(!1))},[n,t]),o)return k.jsx("p",{children:"Loading profile..."});if(s)return k.jsx("p",{children:s});const $=Q=>{const G=Q.target.files[0];if(G){const oe=new FileReader;oe.onloadend=()=>{S(oe.result)},oe.readAsDataURL(G)}},R=Q=>{const G=Q.target.value;f(G),b(/^[A-Za-z]{2,}$/.test(G)?"":"First name should be at least two letters long.")},N=Q=>{const G=Q.target.value;v(G),C(/^[A-Za-z]{2,}$/.test(G)?"":"Last name should be at least two letters long.")},D=Q=>{const G=Q.target.value;w(G),I(x(G)?"":"Child's date of birth cannot be in the future.")},q=Q=>{const G=Q.target.value;p(G),L(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G)?"":"Please enter a valid email address.")},x=Q=>{const G=new Date;return new Date(Q)<=G},M=async Q=>{var oe;if(Q.preventDefault(),T||E||A||Z)return;const G={firstName:d,lastName:g,dob:_,email:y,photo:h};try{const J=await QE(t,G);J.status===200?(l(!1),i(J.data.updatedChild),r("/home",{replace:!0,state:{user:J.data.updatedChild}})):console.error("Error updating child data")}catch(J){console.error("Error:",((oe=J.response)==null?void 0:oe.data)||J.message)}},B=()=>{l(!1)};return k.jsxs("div",{className:"profile-container",children:[k.jsxs("header",{className:"profile-header",children:[k.jsx("img",{src:h||xr,alt:"Profile",className:"profile-img"}),u&&k.jsxs("label",{htmlFor:"photo-input",className:"photo-label",children:[k.jsx(Vy,{}),k.jsx("p",{children:"Change Image"})]})]}),k.jsx("section",{className:"profile-details",children:u?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"form-group",children:k.jsx("input",{type:"file",id:"photo-input",accept:"image/*",className:"photo-input",onChange:$})}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{className:"input-field",placeholder:"First Name",type:"text",value:d,onChange:R}),T&&k.jsx("p",{children:T})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{className:"input-field",type:"text",value:g,onChange:N}),E&&k.jsx("p",{children:E})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{className:"input-field",type:"date",value:_,onChange:D,max:new Date().toISOString().split("T")[0]}),A&&k.jsx("p",{children:A})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("input",{className:"input-field",type:"email",value:y,onChange:q}),Z&&k.jsx("p",{children:Z})]})]}):k.jsxs(k.Fragment,{children:[k.jsx("h1",{children:`${d||"First Name"} ${g||"Last Name"}`}),k.jsxs("p",{children:[k.jsx("strong",{children:"Email:"})," ",y||"Not provided"]}),k.jsxs("p",{children:[k.jsx("strong",{children:"Date of Birth:"})," ",_?new Date(_).toLocaleDateString():"Not provided"]})]})}),k.jsx("footer",{className:"profile-footer",children:u?k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{className:"cancel-btn",onClick:B,children:"Cancel"}),k.jsx("button",{className:"save-btn",onClick:M,children:"Save Changes"})]}):k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{className:"back-btn",onClick:()=>r(-1),children:"Go Back"}),k.jsx("button",{className:"edit-btn",onClick:()=>l(!0),children:"Edit Profile"})]})})]})};var JE={};const ZE=()=>{const[e,r]=P.useState(null),[t,n]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(!1),c=l=>{r(l.target.files[0]),o("")},u=async l=>{if(l.preventDefault(),n(""),o(""),s(!0),!e){o("Please select a file to upload."),s(!1);return}const d=new FormData;d.append("image",e);try{const f=await re.post(`${JE.REACT_APP_BACKEND_URL}/detect-emotion`,d,{headers:{"Content-Type":"multipart/form-data"}});console.log("Full response from server:",f),console.log("Emotion detected:",f.data.emotion),f.data&&f.data.emotion?n(f.data.emotion):o("Unexpected response format.")}catch(f){console.error("Error during API request:",f),o("Error detecting emotion. Please try again.")}finally{s(!1)}};return k.jsxs("div",{children:[k.jsx("h1",{children:"Emotion Detection"}),k.jsxs("form",{onSubmit:u,children:[k.jsx("input",{type:"file",onChange:c}),k.jsx("button",{type:"submit",disabled:a,children:a?"Detecting...":"Detect Emotion"})]}),t&&k.jsxs("p",{children:["Detected Emotion: ",t]}),i&&k.jsx("p",{style:{color:"red"},children:i})]})},XE=()=>{const{token:e}=dy(),[r,t]=P.useState(""),[n,i]=P.useState(""),[o,a]=P.useState(""),s=Ft(),c=f=>{t(f.target.value)},u=f=>{i(f.target.value)},l=f=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(f)?null:"Password must be at least 8 characters long, and contain at least one uppercase letter, one lowercase letter, and one number.",d=async f=>{f.preventDefault();const g=l(r);if(g){a(g);return}if(r!==n){a("Passwords do not match.");return}try{const v=await AE(e,r);alert("Password has been reset. You can now log in with your new password."),console.log(r),s("/login")}catch(v){v.response&&v.response.status===400?a("Invalid or expired token."):a("Unable to reset password. Please try again later."),console.error(v)}};return k.jsxs("div",{className:"form-container",children:[k.jsx("h2",{children:"Reset Your Password"}),k.jsxs("form",{onSubmit:d,children:[k.jsx("input",{type:"password",placeholder:"New Password",value:r,onChange:c,required:!0,className:"input-field"}),k.jsx("input",{type:"password",placeholder:"Confirm New Password",value:n,onChange:u,required:!0,className:"input-field"}),o&&k.jsx("p",{className:"error-message",children:o}),k.jsx("button",{type:"submit",children:"Reset Password"})]})]})},eC=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(""),[i,o]=P.useState(30),[a,s]=P.useState(""),c=async u=>{u.preventDefault();try{const l=await re.post("http://localhost:5001/api/zoom/create-meeting",{topic:e,startTime:t,duration:i,password:a});alert(`Meeting created: ${l.data.join_url}`)}catch(l){console.error("Error creating meeting:",l),alert("Failed to create meeting. Please try again.")}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Create Zoom Meeting"}),k.jsxs("form",{onSubmit:c,children:[k.jsxs("div",{children:[k.jsx("label",{children:"Meeting Topic:"}),k.jsx("input",{type:"text",value:e,onChange:u=>r(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{children:"Start Time:"}),k.jsx("input",{type:"datetime-local",value:t,onChange:u=>n(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{children:"Duration (minutes):"}),k.jsx("input",{type:"number",value:i,onChange:u=>o(u.target.value),required:!0,min:"1"})]}),k.jsxs("div",{children:[k.jsx("label",{children:"Meeting Password:"}),k.jsx("input",{type:"text",value:a,onChange:u=>s(u.target.value)})]}),k.jsx("button",{type:"submit",children:"Create Meeting"})]})]})},tC=()=>{const[e,r]=P.useState([]);return P.useEffect(()=>{(async()=>{try{const n=await re.get("http://localhost:5001/api/zoom/meetings");r(n.data)}catch(n){console.error("Error fetching meetings:",n)}})()},[]),k.jsxs("div",{children:[k.jsx("h2",{children:"Your Zoom Meetings"}),e.length===0?k.jsx("p",{children:"No meetings scheduled."}):k.jsx("ul",{children:e.map(t=>k.jsxs("li",{children:[k.jsx("strong",{children:t.topic}),k.jsx("br",{}),"Start Time: ",new Date(t.start_time).toLocaleString(),k.jsx("br",{}),"Duration: ",t.duration," minutes",k.jsx("br",{}),k.jsx("a",{href:t.join_url,target:"_blank",rel:"noopener noreferrer",children:"Join Meeting"})]},t.id))})]})},rC=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(!1),[i,o]=P.useState(!1),[a,s]=P.useState("");P.useEffect(()=>{const v=setInterval(()=>{window.ZoomMtg&&(console.log("Zoom SDK loaded"),n(!0),window.ZoomMtg.setZoomJSLib("https://source.zoom.us/2.18.3/lib","/av"),window.ZoomMtg.preLoadWasm(),window.ZoomMtg.prepareJssdk(),clearInterval(v))},500);return()=>clearInterval(v)},[]);const c=v=>{r(v.target.value)},u=v=>{try{const _=new URL(v),w=_.pathname.split("/")[2],y=_.searchParams.get("pwd");return{meetingId:w,password:y}}catch{return console.error("Invalid Zoom link format."),s("Invalid Zoom link format."),null}},l=v=>/^https:\/\/(us\d{1,2}web\.zoom\.us|zoom\.us)\/j\/\d{9,11}/.test(v),d=async(v,_)=>{try{const w=await fetch("https://autism-sense-backend.onrender.com/api/zoom/generateSignature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({meetingNumber:v,role:_})}),y=await w.json();return w.ok?y.signature:(console.error("Error fetching signature:",y.error),s("Failed to get signature."),null)}catch(w){return console.error("Error fetching signature:",w),s("Failed to get signature."),null}},f=async(v,_)=>{const w=await d(v,0);w&&(o(!0),window.ZoomMtg.init({leaveUrl:"https://ghosson16.github.io/autism-sense/#/home",isSupportAV:!0,success:()=>{window.ZoomMtg.join({meetingNumber:v,userName:"Guest User",signature:w,apiKey:"xzItAoLSXm8tOVvDOsTg",passWord:_,success:()=>{console.log("Join meeting success"),o(!1)},error:y=>{console.error("Error joining meeting:",y),s("Failed to join meeting."),o(!1)}})},error:y=>{console.error("Error initializing Zoom SDK:",y),s("Error initializing Zoom SDK."),o(!1)}}))},g=()=>{if(!e||!l(e)){s("Please enter a valid Zoom meeting link.");return}if(!t){s("Zoom SDK is not yet loaded. Please wait...");return}const v=u(e);if(!v)return;const{meetingId:_,password:w}=v;f(_,w)};return k.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[k.jsx("h3",{children:"Enter Zoom Meeting Link"}),k.jsx("input",{type:"text",value:e,onChange:c,placeholder:"Enter Zoom Meeting Link",style:{padding:"10px",width:"60%",borderRadius:"5px",border:"1px solid #ccc",marginBottom:"10px"}}),k.jsx("br",{}),k.jsx("button",{onClick:g,style:{padding:"10px 20px",backgroundColor:i?"#ccc":"#007bff",color:"#fff",borderRadius:"5px",border:"none",cursor:"pointer",fontSize:"16px"},disabled:i||!t,children:i?"Joining...":"Join Meeting"}),a&&k.jsx("p",{style:{color:"red",marginTop:"10px"},children:a}),k.jsx("div",{id:"zmmtg-root"}),"  "]})};var ed={exports:{}},is={},On={},os={},nC=function(e){var r=e.location,t=e.URL;return[r,t].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: "+i+": dynamicImport is not supported"))}:(e.__twilioVideoImportedModules={},function(i){return i in e.__twilioVideoImportedModules?Promise.resolve(e.__twilioVideoImportedModules[i]):new Function("scope","return import('"+new t(i,r)+"').then(m => scope.__twilioVideoImportedModules['"+i+"'] = m);")(e)})}(globalThis),Hy=function(){},St="undefined",iC=typeof window!==St&&typeof window.navigator!==St&&/Trident\/|MSIE /.test(window.navigator.userAgent),Iu=["trace","debug","info","warn","error"];function yp(e,r){var t=e[r];if(typeof t.bind=="function")return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch{return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function oC(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function aC(e){return e==="debug"&&(e="log"),typeof console===St?!1:e==="trace"&&iC?oC:console[e]!==void 0?yp(console,e):console.log!==void 0?yp(console,"log"):Hy}function Qy(e,r){for(var t=0;t<Iu.length;t++){var n=Iu[t];this[n]=t<e?Hy:this.methodFactory(n,e,r)}this.log=this.debug}function sC(e,r,t){return function(){typeof console!==St&&(Qy.call(this,r,t),this[e].apply(this,arguments))}}function cC(e,r,t){return aC(e)||sC.apply(this,arguments)}function qy(e,r,t){var n=this,i,o="loglevel";typeof e=="string"?o+=":"+e:typeof e=="symbol"&&(o=void 0);function a(u){var l=(Iu[u]||"silent").toUpperCase();if(!(typeof window===St||!o)){try{window.localStorage[o]=l;return}catch{}try{window.document.cookie=encodeURIComponent(o)+"="+l+";"}catch{}}}function s(){var u;if(!(typeof window===St||!o)){try{u=window.localStorage[o]}catch{}if(typeof u===St)try{var l=window.document.cookie,d=l.indexOf(encodeURIComponent(o)+"=");d!==-1&&(u=/^([^;]+)/.exec(l.slice(d))[1])}catch{}return n.levels[u]===void 0&&(u=void 0),u}}n.name=e,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=t||cC,n.getLevel=function(){return i},n.setLevel=function(u,l){if(typeof u=="string"&&n.levels[u.toUpperCase()]!==void 0&&(u=n.levels[u.toUpperCase()]),typeof u=="number"&&u>=0&&u<=n.levels.SILENT){if(i=u,l!==!1&&a(u),Qy.call(n,u,e),typeof console===St&&u<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+u},n.setDefaultLevel=function(u){s()||n.setLevel(u,!1)},n.enableAll=function(u){n.setLevel(n.levels.TRACE,u)},n.disableAll=function(u){n.setLevel(n.levels.SILENT,u)};var c=s();c==null&&(c=r??"WARN"),n.setLevel(c,!1)}var bt=new qy,Mu={};bt.getLogger=function(r){if(typeof r!="symbol"&&typeof r!="string"||r==="")throw new TypeError("You must supply a name when creating a logger.");var t=Mu[r];return t||(t=Mu[r]=new qy(r,bt.getLevel(),bt.methodFactory)),t};var uC=typeof window!==St?window.log:void 0;bt.noConflict=function(){return typeof window!==St&&window.log===bt&&(window.log=uC),bt};bt.getLoggers=function(){return Mu};bt.default=bt;var Ky=bt,td={exports:{}};const lC="twilio-video",dC="Twilio Video",fC="Twilio Video JavaScript Library",pC="2.28.1",hC="https://twilio.com",vC="Mark Andrus Roberts <mroberts@twilio.com>",mC=["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],yC=["twilio","webrtc","library","javascript","video","rooms"],gC={type:"git",url:"https://github.com/twilio/twilio-video.js.git"},_C={"@babel/core":"^7.14.2","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1",browserify:"^17.0.0",cheerio:"^0.22.0",cors:"^2.8.5",electron:"^17.2.0",envify:"^4.0.0",eslint:"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1",express:"^4.16.2",glob:"^7.1.7","ink-docstrap":"^1.3.2",inquirer:"^7.0.0","is-docker":"^2.0.0",jsdoc:"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7",karma:"6.4.1","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1",mocha:"^3.2.0","mock-require":"^3.0.3",ncp:"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2",nyc:"^15.1.0",requirejs:"^2.3.3",rimraf:"^2.6.1","simple-git":"^1.126.0",sinon:"^4.0.1","ts-node":"4.0.1",tslint:"5.8.0",twilio:"^3.49.0","twilio-release-tool":"^1.0.2",typescript:"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0",watchify:"^3.11.1","webrtc-adapter":"^7.7.1"},wC={node:">=0.12"},SC="BSD-3-Clause",kC="./es5/index.js",TC="./tsdef/index.d.ts",bC={"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts",lint:"npm-run-all lint:js lint:ts",printVersion:"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:unit:quick":"nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov mocha -r ts-node/register","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@19.2.2","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react",test:"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && mkdir -p es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":'uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments "/^! twilio-video.js/" -b beautify=false,ascii_only=true',build:"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js",docs:"node ./scripts/docs.js ./dist/docs",watch:"tsc -w",clean:"rimraf ./coverage ./es5 ./dist"},EC={events:"^3.3.0",util:"^0.12.4",ws:"^7.4.6",xmlhttprequest:"^1.8.0"},CC={ws:"./src/ws.js",xmlhttprequest:"./src/xmlhttprequest.js"},Gy={name:lC,title:dC,description:fC,version:pC,homepage:hC,author:vC,contributors:mC,keywords:yC,repository:gC,devDependencies:_C,engines:wC,license:SC,main:kC,types:TC,scripts:bC,dependencies:EC,browser:CC};td.exports;(function(e){var r=Gy;e.exports.SDK_NAME=r.name+".js",e.exports.SDK_VERSION=r.version,e.exports.SDP_FORMAT="unified",e.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},e.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},e.exports.DEFAULT_ENVIRONMENT="prod",e.exports.DEFAULT_REALM="us1",e.exports.DEFAULT_REGION="gll",e.exports.DEFAULT_LOG_LEVEL="warn",e.exports.DEFAULT_LOGGER_NAME="twilio-video",e.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://"+i+".vss.twilio.com/signaling":"wss://"+i+".vss."+n+".twilio.com/signaling"},e.exports.PUBLISH_MAX_ATTEMPTS=5,e.exports.PUBLISH_BACKOFF_JITTER=10,e.exports.PUBLISH_BACKOFF_MS=20;function t(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}e.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to "+n+": "+i)},INVALID_TYPE:function(n,i){return new TypeError(n+" must be "+t(i)+" "+i)},INVALID_VALUE:function(n,i){return new RangeError(n+" must be one of "+i.join(", "))},REQUIRED_ARGUMENT:function(n){return new TypeError(n+" must be specified")}},e.exports.DEFAULT_FRAME_RATE=24,e.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,e.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,e.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,e.exports.DEFAULT_NQ_LEVEL_LOCAL=1,e.exports.DEFAULT_NQ_LEVEL_REMOTE=0,e.exports.MAX_NQ_LEVEL=3,e.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,e.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,e.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:e.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},e.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},e.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},e.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},e.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},e.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},e.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(td);var se=td.exports,PC=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},OC=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},RC=Ky.getLogger,Yy=se,gp=Yy.DEFAULT_LOG_LEVEL,xC=Yy.DEFAULT_LOGGER_NAME,Yo=se.typeErrors,Zn;function LC(e){if(Zn=Zn||new Map,Zn.has(e))return Zn.get(e);var r=new Set;return Zn.set(e,r),r}var rd=function(){function e(r,t,n,i,o){if(typeof r!="string")throw Yo.INVALID_TYPE("moduleName","string");if(!t)throw Yo.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),o=o||RC,_p(n),Object.defineProperties(this,{_component:{value:t},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:xC;return this._logLevelsEqual||(s=s+"-"+r),s}},_logger:{get:function(){var s=o(this._loggerName),c=this._logLevels[r]||gp;return c=c==="off"?"silent":c,s.setDefaultLevel(c),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return e.getLevelByName(n[r]||gp)}},name:{get:t.toString.bind(t)}})}return e.getLevelByName=function(r){return isNaN(r)?(r=r.toUpperCase(),Xy(r),e[r]):parseInt(r,10)},e.prototype.createLog=function(r,t){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new e(r,t,this._logLevels,n)},e.prototype.setLevels=function(r){return _p(r),Object.assign(this._logLevels,r),this},e.prototype.log=function(r,t){var n=e._levels[r];if(!n)throw Yo.INVALID_VALUE("logLevel",Zy);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,OC([],PC(i.concat(t)))),this},e.prototype.debug=function(){return this.log(e.DEBUG,[].slice.call(arguments))},e.prototype.deprecated=function(r){var t=LC(this._component.constructor);return t.has(r)?this:(t.add(r),this.warn(r))},e.prototype.info=function(){return this.log(e.INFO,[].slice.call(arguments))},e.prototype.warn=function(){return this.log(e.WARN,[].slice.call(arguments))},e.prototype.warnOnce=function(r){return this._warnings.has(r)?this:(this._warnings.add(r),this.warn(r))},e.prototype.error=function(){return this.log(e.ERROR,[].slice.call(arguments))},e.prototype.throw=function(r,t){throw r.clone&&(r=r.clone(t)),this.log(e.ERROR,r),r},e}();Object.defineProperties(rd,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var Jy={},Zy=[],jC=rd._levels.map(function(e,r){return Jy[e]=!0,Zy.push(r),e});function Xy(e){if(!(e in Jy))throw Yo.INVALID_VALUE("level",jC)}function _p(e){Object.keys(e).forEach(function(r){Xy(e[r].toUpperCase())})}var Ut=rd,AC=m&&m.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},DC=m&&m.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(os,"__esModule",{value:!0});os.createNoiseCancellationAudioProcessor=void 0;var IC=nC,MC={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},NC=function(e){var r=e.supportedVersion,t=e.plugin,n=e.log;if(!t.getVersion||!t.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=t.getVersion();n.debug("Plugin Version = "+i);var o=r.split(".").map(function(u){return Number(u)}),a=i.split(".").map(function(u){return Number(u)});if(o.length!==3||a.length!==3)throw new Error("Unsupported Plugin version format: "+r+", "+i);if(o[0]!==a[0])throw new Error("Major version mismatch: [Plugin version "+i+"],  [Supported Version "+r+"]");if(a[1]<o[1])throw new Error("Minor version mismatch: [Plugin version "+i+"] < [Supported Version "+r+"]");var s=new AudioContext,c=t.isSupported(s);if(s.close(),!c)throw new Error("Noise Cancellation plugin is not supported on your browser")},wp=new Map;function $C(e,r){return AC(this,void 0,void 0,function(){var t,n,i,o,a,s,c,u,l;return DC(this,function(d){switch(d.label){case 0:if(t=wp.get(e.vendor),t)return[3,6];if(n=MC[e.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: "+e.vendor);i=n.supportedVersion,o=n.pluginFile,a=e.sdkAssetsPath,s=a+"/"+o,d.label=1;case 1:return d.trys.push([1,5,,6]),r.debug("loading noise cancellation sdk: ",s),[4,IC(s)];case 2:return c=d.sent(),r.debug("Loaded noise cancellation sdk:",c),u=c.default,NC({supportedVersion:i,plugin:u,log:r}),u.isInitialized()?[3,4]:(r.debug("initializing noise cancellation sdk: ",a),[4,u.init({rootDir:a})]);case 3:d.sent(),r.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return t={vendor:e.vendor,isInitialized:function(){return u.isInitialized()},isConnected:function(){return u.isConnected()},isEnabled:function(){return u.isEnabled()},disconnect:function(){return u.disconnect()},enable:function(){return u.enable()},disable:function(){return u.disable()},destroy:function(){return u.destroy()},setLogging:function(f){return u.setLogging(f)},connect:function(f){r.debug("connect: ",f.id),u.isConnected()&&u.disconnect();var g=u.connect(new MediaStream([f]));if(!g)throw new Error("Error connecting with noise cancellation sdk");var v=g.getAudioTracks()[0];if(!v)throw new Error("Error getting clean track from noise cancellation sdk");return u.enable(),v}},wp.set(e.vendor,t),[3,6];case 5:throw l=d.sent(),r.error("Error loading noise cancellation sdk:"+s,l),l;case 6:return[2,t]}})})}os.createNoiseCancellationAudioProcessor=$C;var eg=m&&m.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},tg=m&&m.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(On,"__esModule",{value:!0});On.applyNoiseCancellation=On.NoiseCancellationImpl=void 0;var FC=os,rg=function(){function e(r,t){this._processor=r,this._sourceTrack=t,this._disabledPermanent=!1}return Object.defineProperty(e.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),e.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},e.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},e.prototype.reacquireTrack=function(r){return eg(this,void 0,void 0,function(){var t,n,i;return tg(this,function(o){switch(o.label){case 0:return t=this._processor.isEnabled(),this._processor.disconnect(),[4,r()];case 1:return n=o.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=o.sent(),t?this._processor.enable():this._processor.disable(),[2,i]}})})},e.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},e.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},e}();On.NoiseCancellationImpl=rg;function UC(e,r,t){return eg(this,void 0,void 0,function(){var n,i,o,a;return tg(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,FC.createNoiseCancellationAudioProcessor(r,t)];case 1:return n=s.sent(),i=n.connect(e),o=new rg(n,e),[2,{cleanTrack:i,noiseCancellation:o}];case 2:return a=s.sent(),t.warn("Failed to create noise cancellation. Returning normal audio track: "+a),[2,{cleanTrack:e}];case 3:return[2]}})})}On.applyNoiseCancellation=UC;var U={},ie={},ng=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},VC=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};function BC(){var e={};return e.promise=new Promise(function(r,t){e.resolve=r,e.reject=t}),e}function zC(e,r,t,n){if(!(n in r)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var o=Object.getOwnPropertyDescriptor(e,n);i=o&&!!o.get}catch{}if(!i){var a;try{a=typeof e[n]}catch{}a==="function"&&(r[n]=function(){return this[t][n].apply(this[t],arguments)})}}}function WC(e,r,t){for(var n in e)zC(e,r,t,n)}function HC(e,r){e=Array.isArray(e)?new Set(e):new Set(e.values()),r=Array.isArray(r)?new Set(r):new Set(r.values());var t=new Set;return e.forEach(function(n){r.has(n)||t.add(n)}),t}function QC(e,r){var t=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t.reduce(function(n,i){return n.concat(r(i))},[])}function nd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function id(e){return typeof e>"u"&&(e=nd()),/Chrome|CriOS/.test(e)?"chrome":/Firefox|FxiOS/.test(e)?"firefox":/Safari|iPhone|iPad|iPod/.test(e)?"safari":null}function qC(e){typeof e>"u"&&(e=nd());var r={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[id(e)];if(!r)return null;var t=new RegExp("("+r+")/([^\\s]+)"),n=ng(e.match(t)||[],3),i=n[2];if(!i)return null;var o=i.split(".").map(Number);return{major:isNaN(o[0])?null:o[0],minor:isNaN(o[1])?null:o[1]}}function KC(e){return typeof e>"u"&&(e=nd()),/Mobi/.test(e)&&id()==="chrome"&&/iPad|iPhone|iPod/.test(e)}function GC(e,r){var t=null;Object.defineProperty(e,"on"+r,{get:function(){return t},set:function(n){t&&this.removeEventListener(r,t),typeof n=="function"?(t=n,this.addEventListener(r,t)):t=null}})}function YC(e,r,t){return r?e.then(r,t):e}function JC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=Math.random()*16|0,t=e==="x"?r:r&3|8;return t.toString(16)})}function ZC(e,r,t){Object.getOwnPropertyNames(e).forEach(function(n){XC(e,r,t,n)})}function XC(e,r,t,n){if(!(n in r)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(r,n,{value:null,writable:!0}),t.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.dispatchEvent.apply(r,VC([],ng(i)))});return}Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}}function eP(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function tP(e){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(e).codecs.map(function(t){var n=t.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var r=new RTCPeerConnection;return r.addTransceiver(e),r.createOffer().then(function(t){var n=t.sdp;return r.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return r.close(),new Set})}var Nu=new Map;function rP(e,r){var t=Nu.get(r);return t?Promise.resolve(t.has(e.toLowerCase())):tP(r).then(function(n){return Nu.set(r,n),n.has(e.toLowerCase())})}function nP(){Nu.clear()}ie.clearCachedSupportedCodecs=nP;ie.defer=BC;ie.delegateMethods=WC;ie.difference=HC;ie.flatMap=QC;ie.guessBrowser=id;ie.guessBrowserVersion=qC;ie.isCodecSupported=rP;ie.isIOSChrome=KC;ie.interceptEvent=GC;ie.legacyPromise=YC;ie.makeUUID=JC;ie.proxyProperties=ZC;ie.support=eP;var as={},Sp="1234567890abcdef",iP=32;function ig(e){for(var r="",t=0;t<iP;t++)r+=Sp.charAt(Math.floor(Math.random()*Sp.length));return""+e+r}as.sessionSID=ig("SS");as.createSID=ig;var oP={recordingMediaLost:"recording-media-lost"},og=oP,aP=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qe=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Nr=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},od=se,sP=od.typeErrors,tc=od.trackPriority,cP=ie,uP=as.sessionSID,lP=og;function dP(e,r){if(e instanceof r.LocalAudioTrack||e instanceof r.LocalVideoTrack||e instanceof r.LocalDataTrack)return e;if(e instanceof r.MediaStreamTrack)return e.kind==="audio"?new r.LocalAudioTrack(e,r):new r.LocalVideoTrack(e,r);throw sP.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function fP(e,r,t,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[e.kind];return new i(r,e,t,n)}function pP(e){return e[0].toUpperCase()+e.slice(1)}function hP(e,r,t,n){var i=new Set;r.on("newListener",function o(a){t.has(a)&&!i.has(a)&&(n.deprecated(e+"#"+a+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(t.get(a)?" Use "+e+"#"+t.get(a)+" instead.":"")),i.add(a)),i.size>=t.size&&r.removeListener("newListener",o)})}function vP(e,r){e=Array.isArray(e)?new Set(e):new Set(e.values()),r=Array.isArray(r)?new Set(r):new Set(r.values());var t=new Set;return e.forEach(function(n){r.has(n)||t.add(n)}),t}function mP(e,r){return Object.keys(e).reduce(function(t,n){return e[n]!==r&&(t[n]=e[n]),t},{})}function yP(e,r){var t=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return r=r||function(i){return i},t.reduce(function(n,i){var o=r(i);return n.concat(o)},[])}function ag(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function gP(){var e=ag(),r=Qe(e.match(/\(([^)]+)\)/)||[],2),t=r[1],n=t===void 0?"unknown":t,i=Qe(n.split(";").map(function(a){return a.trim()}),1),o=i[0];return o.toLowerCase()}function _P(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=Math.random()*16|0,t=e==="x"?r:r&3|8;return t.toString(16)})}function wP(e){var r=null;function t(){r=null,e()}return function(){r&&clearTimeout(r),r=setTimeout(t)}}function SP(e,r,t,n){return new Promise(function(i,o){function a(){var c=[].slice.call(arguments);n&&r.removeListener(n,s),i.apply(void 0,Nr([],Qe(c)))}function s(){var c=[].slice.call(arguments);r.removeListener(t,a),o.apply(void 0,Nr([],Qe(c)))}r.once(t,a),n&&r.once(n,s),e()})}function kP(e,r){return r.split(".").reduce(function(t,n){return t?t[n]:null},e)}function TP(){var e={};return e.promise=new Promise(function(r,t){e.resolve=r,e.reject=t}),e}function bP(e,r,t,n){if(!(n in r)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof e[n]}catch{}i==="function"&&(r[n]=function(){for(var o,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(o=this[t])[n].apply(o,Nr([],Qe(a)))})}}function EP(e,r,t){for(var n in e)bP(e,r,t,n)}function Jo(e,r){if(e===r)return!0;if(typeof e!=typeof r)return!1;if(e===null)return r===null;if(r===null)return!1;if(Array.isArray(e))return Array.isArray(r)&&e.length===r.length&&e.every(function(i,o){return Jo(i,r[o])});if(typeof e=="object"){var t=Object.keys(e).sort(),n=Object.keys(r).sort();return!Array.isArray(r)&&Jo(t,n)&&t.every(function(i){return Jo(e[i],r[i])})}return!1}function sg(e){return typeof e=="object"&&!Array.isArray(e)}function CP(e,r,t){Object.getOwnPropertyNames(e).forEach(function(n){PP(e,r,t,n)})}function PP(e,r,t,n){if(!(n in r)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(r,n,{value:null,writable:!0}),t.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r.dispatchEvent.apply(r,Nr([],Qe(i)))});return}Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})}}function OP(e,r,t){return r?e.then(function(n){r(n)},function(n){t(n)}):e}function RP(e){return typeof e=="string"?{default:e,media:e,signaling:e,webrtc:e}:e}function xP(e,r){return r=r?"Local":"",r+(e.kind||"").replace(/\w{1}/,function(t){return t.toUpperCase()})+"Track"}function LP(e,r){return r=r?"Local":"",r+(e.kind||"").replace(/\w{1}/,function(t){return t.toUpperCase()})+"TrackPublication"}function cg(e){Object.getOwnPropertyNames(e).forEach(function(r){r.startsWith("_")&&ug(e,r)})}function jP(e,r){return function(t){aP(n,t);function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=t.apply(this,Nr([],Qe(i)))||this;return cg(a),AP(a,r),a}return n}(e)}function ug(e,r){var t=Object.getOwnPropertyDescriptor(e,r);t.enumerable=!1,Object.defineProperty(e,r,t)}function AP(e,r){r===void 0&&(r=[]),r.forEach(function(t){e.hasOwnProperty(t)&&ug(e,t)})}function lg(e){return e.map(ss)}function DP(e){return lg(Nr([],Qe(e)))}function IP(e){return Nr([],Qe(e.entries())).reduce(function(r,t){var n,i=Qe(t,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=ss(a),n),r)},{})}function MP(e){return Object.entries(e).reduce(function(r,t){var n,i=Qe(t,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=ss(a),n),r)},{})}function ss(e){return Array.isArray(e)?lg(e):e instanceof Set?DP(e):e instanceof Map?IP(e):e&&typeof e=="object"?MP(e):e}function NP(e){function r(i){return i?"true":"false"}var t={sessionSID:uP,iceServers:(e.iceServers||[]).length,audioTracks:(e.tracks||[]).filter(function(i){return i.kind==="audio"}).length,videoTracks:(e.tracks||[]).filter(function(i){return i.kind==="video"}).length,dataTracks:(e.tracks||[]).filter(function(i){return i.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(i){var o=Qe(i,2),a=o[0],s=o[1];s=s||a,t[s]=r(!!e[a])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(i){var o=Qe(i,2),a=o[0],s=o[1];s=s||a,typeof e[a]=="number"?t[s]=e[a]:isNaN(Number(e[a]))||(t[s]=Number(e[a]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(i){var o=Qe(i,2),a=o[0],s=o[1];s=s||a,typeof e[a]=="string"?t[s]=e[a]:typeof e[a]=="number"&&a==="name"&&(t[s]=e[a].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(i){i in e&&(t[i]=JSON.stringify(e[i]))}),"networkQuality"in e&&(t.networkQualityConfiguration={},sg(e.networkQuality)?["local","remote"].forEach(function(i){typeof e.networkQuality[i]=="number"&&(t.networkQualityConfiguration[i]=e.networkQuality[i])}):(t.networkQualityConfiguration.remote=0,t.networkQualityConfiguration.local=e.networkQuality?1:0)),e.bandwidthProfile&&e.bandwidthProfile.video){var n=e.bandwidthProfile.video||{};t.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(i){typeof n[i]=="number"||typeof n[i]=="string"?t.bandwidthProfileOptions[i]=n[i]:typeof n[i]=="boolean"?t.bandwidthProfileOptions[i]=r(n[i]):typeof n[i]=="object"&&(t.bandwidthProfileOptions[i]=JSON.stringify(n[i]))})}return{group:"room",name:"connect",level:"info",payload:t}}function $P(e){return cs(e,[{prop:"video",type:"object",transform:FP}])}function FP(e){return cs(e,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:VP},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function UP(e,r,t,n,i,o){var a={transports:[{type:"data-channel"}]};return Object.assign(e?{active_speaker:a}:{},r?{network_quality:a}:{},o?{render_hints:a}:{},i?{publisher_hints:a}:{},t?{track_priority:a}:{},n?{track_switch_off:a}:{})}function rc(e){return cs(e,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function VP(e){var r=tc.PRIORITY_HIGH,t=tc.PRIORITY_LOW,n=tc.PRIORITY_STANDARD;return cs(e,[{prop:r,type:"object",transform:rc},{prop:t,type:"object",transform:rc},{prop:n,type:"object",transform:rc}])}function cs(e,r){return r.reduce(function(t,n){var i,o=n.prop,a=n.type,s=n.payloadProp,c=s===void 0?o:s,u=n.transform,l=u===void 0?function(d){return d}:u;return typeof e[o]===a?Object.assign((i={},i[c]=l(e[o]),i),t):t},{})}function BP(e){return{rules:[{type:e?"include":"exclude",all:!0}],revision:1}}function zP(e){var r,t=(r={},r[lP.recordingMediaLost]="recordings",r);return e.map(function(n){return t[n]}).filter(function(n){return!!n})}function WP(e,r){var t=Math.random();return e-r+Math.floor(2*r*t+.5)}function HP(e,r,t){return r<=e&&e<=t}function QP(e){return cP.guessBrowser()==="chrome"&&e.kind==="video"&&"displaySurface"in e.getSettings()}function qP(e){return e===void 0&&(e=10),new Promise(function(r){return setTimeout(r,e)})}function KP(e,r){return new Promise(function(t){e.addEventListener(r,function n(i){e.removeEventListener(r,n),t(i)})})}U.constants=od;U.createBandwidthProfilePayload=$P;U.createMediaSignalingPayload=UP;U.createMediaWarningsPayload=zP;U.createRoomConnectEventPayload=NP;U.createSubscribePayload=BP;U.asLocalTrack=dP;U.asLocalTrackPublication=fP;U.capitalize=pP;U.deprecateEvents=hP;U.difference=vP;U.filterObject=mP;U.flatMap=yP;U.getPlatform=gP;U.getUserAgent=ag;U.hidePrivateProperties=cg;U.hidePrivateAndCertainPublicPropertiesInClass=jP;U.isDeepEqual=Jo;U.isNonArrayObject=sg;U.inRange=HP;U.makeUUID=_P;U.oncePerTick=wP;U.promiseFromEvents=SP;U.getOrNull=kP;U.defer=TP;U.delegateMethods=EP;U.proxyProperties=CP;U.legacyPromise=OP;U.buildLogLevels=RP;U.trackClass=xP;U.trackPublicationClass=LP;U.valueToJSON=ss;U.withJitter=WP;U.isChromeScreenShareTrack=QP;U.waitForSometime=qP;U.waitForEvent=KP;var qe={},dg=ie,GP=dg.flatMap,YP=dg.guessBrowser,mr=null;function JP(){if(typeof mr=="boolean")return mr;if(typeof RTCPeerConnection>"u")return mr=!1,mr;try{new RTCPeerConnection({sdpSemantics:"foo"}),mr=!1}catch{mr=!0}return mr}var Yr=null;function ZP(){Yr=null}function XP(){if(!Yr)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var e=new RTCPeerConnection;try{e.addTransceiver("audio"),Yr="unified"}catch{Yr="planb"}e.close()}else Yr="planb";return Yr}function eO(e){return!e||!JP()?XP():{"plan-b":"planb","unified-plan":"unified"}[e]}function tO(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function rO(e){return{chrome:eO(e),firefox:"unified",safari:tO()}[YP()]||null}function ad(e,r){var t=r.match(new RegExp(e,"gm"))||[];return t.reduce(function(n,i){var o=i.match(new RegExp(e));return o?n.add(o[1]):n},new Set)}function fg(e,r){return ad(e,r)}function pg(e){return fg("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",e)}function hg(e){return fg("^a=msid:.+ +(.+) *$",e)}function vg(e,r){var t="^a=ssrc:([0-9]+) +msid:[^ ]+ +"+r+" *$";return ad(t,e)}function mg(e,r,t){return r===void 0&&(r=".*"),t===void 0&&(t=".*"),e.split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+r,"gm"),o=new RegExp("a="+t,"gm");return i.test(n)&&o.test(n)})}function nO(e){return Array.from(ad("^a=ssrc:([0-9]+) +.*$",e))}function yg(e,r){var t=mg(e),n=new RegExp("^a=msid:[^ ]+ +"+r+" *$","gm"),i=t.filter(function(o){return o.match(n)});return new Set(GP(i,nO))}function gg(e,r,t){return new Map(Array.from(e(t)).map(function(n){return[n,r(t,n)]}))}function iO(e){return gg(pg,vg,e)}function oO(e){return gg(hg,yg,e)}function _g(e,r,t){var n=e(t),i=new Map;n.forEach(function(s,c){if(!r.has(c)){r.set(c,s);return}var u=Array.from(r.get(c)),l=Array.from(s);u.forEach(function(d,f){var g=l[f];i.set(g,d);var v="^a=ssrc:"+g+" (.*)$",_="a=ssrc:"+d+" $1";t=t.replace(new RegExp(v,"gm"),_)})});var o="^(a=ssrc-group:[^ ]+ +)(.*)$",a=t.match(new RegExp(o,"gm"))||[];return a.forEach(function(s){var c=s.match(new RegExp(o));if(c){var u=c[1],l=c[2],d=l.split(" ").map(function(f){var g=i.get(f);return g||f}).join(" ");t=t.replace(c[0],u+d)}}),t}function aO(e,r){return _g(iO,e,r)}function sO(e,r){return _g(oO,e,r)}qe.clearChromeCachedSdpFormat=ZP;qe.getSdpFormat=rO;qe.getMediaSections=mg;qe.getPlanBTrackIds=pg;qe.getUnifiedPlanTrackIds=hg;qe.getPlanBSSRCs=vg;qe.getUnifiedPlanSSRCs=yg;qe.updatePlanBTrackIdsToSSRCs=aO;qe.updateUnifiedPlanTrackIdsToSSRCs=sO;var cO=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},sd=ie,wg=sd.flatMap,uO=sd.guessBrowser,lO=sd.guessBrowserVersion,dO=qe.getSdpFormat,cd=uO(),fO=lO(),ud=cd==="chrome",Sg=cd==="firefox",kg=cd==="safari",kp=ud?fO.major:null,pO=32767;function hO(e,r){return e&&typeof e.getStats=="function"?vO(e,r):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function vO(e,r){var t=ko(e,"audio","local"),n=ko(e,"video","local"),i=ko(e,"audio"),o=ko(e,"video"),a={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=wg([[t,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[o,"remoteVideoTrackStats",!0]],function(c){var u=cO(c,3),l=u[0],d=u[1],f=u[2];return l.map(function(g){return _O(e,g,Object.assign({isRemote:f},r)).then(function(v){v.forEach(function(_){_.trackId=g.id,a[d].push(_)})})})});return Promise.all(s).then(function(){return mO(e,r)}).then(function(c){return a.activeIceCandidatePair=c,a})}function mO(e,r){return r===void 0&&(r={}),typeof r.testForChrome<"u"||ud||typeof r.testForSafari<"u"||kg?e.getStats().then(yO):typeof r.testForFirefox<"u"||Sg?e.getStats().then(gO):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function yO(e){var r=Array.from(e.values()).find(function(c){var u=c.nominated,l=c.type;return l==="candidate-pair"&&u});if(!r)return null;var t=e.get(r.localCandidateId),n=e.get(r.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a=t?o.reduce(function(c,u){var l=u.key,d=u.type;return c[l]=typeof t[l]===d?t[l]:l==="deleted"?!1:null,c},{}):null,s=n?i.reduce(function(c,u){var l=u.key,d=u.type;return c[l]=typeof n[l]===d?n[l]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(c){return c==="inprogress"?"in-progress":c}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,u){var l=u.key,d=u.type,f=u.fixup;return c[l]=typeof r[l]===d?f?f(r[l]):r[l]:null,c},{localCandidate:a,remoteCandidate:s})}function gO(e){var r=Array.from(e.values()).find(function(u){var l=u.nominated,d=u.type;return d==="candidate-pair"&&l});if(!r)return null;var t=e.get(r.localCandidateId),n=e.get(r.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=t?o.reduce(function(u,l){var d=l.ffKeys,f=l.key,g=l.type,v=d&&d.find(function(_){return _ in t})||f;return u[f]=typeof t[v]===g?v==="candidateType"&&a[t[v]]||t[v]:v==="deleted"?!1:null,u},{}):null,c=n?i.reduce(function(u,l){var d=l.ffKeys,f=l.key,g=l.type,v=d&&d.find(function(_){return _ in n})||f;return u[f]=typeof n[v]===g?v==="candidateType"&&a[n[v]]||n[v]:null,u},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(u,l){var d=l.key,f=l.type;return u[d]=typeof r[d]===f?r[d]:null,u},{localCandidate:s,remoteCandidate:c})}function ko(e,r,t){var n=t==="local"?"getSenders":"getReceivers";if(e[n])return e[n]().map(function(a){var s=a.track;return s}).filter(function(a){return a&&a.kind===r});var i=t==="local"?"getLocalStreams":"getRemoteStreams",o=r==="audio"?"getAudioTracks":"getVideoTracks";return wg(e[i](),function(a){return a[o]()})}function _O(e,r,t){return t===void 0&&(t={}),typeof t.testForChrome<"u"||ud?Tp(e,r,t):typeof t.testForFirefox<"u"||Sg?wO(e,r,t):typeof t.testForSafari<"u"||kg?typeof t.testForSafari<"u"||dO()==="unified"?Tp(e,r,t):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function Tp(e,r,t){return kp&&kp<67?new Promise(function(n,i){e.getStats(function(o){n([SO(o,r)])},null,i)}):e.getStats(r).then(function(n){return kO(n,t)})}function wO(e,r,t){return e.getStats(r).then(function(n){return[TO(n,t)]})}function SO(e,r){var t=e.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===r.id}),n={};return t&&(n.timestamp=Math.round(Number(t.timestamp)),n=t.names().reduce(function(i,o){switch(o){case"googCodecName":i.codecName=t.stat(o);break;case"googRtt":i.roundTripTime=Number(t.stat(o));break;case"googJitterReceived":i.jitter=Number(t.stat(o));break;case"googFrameWidthInput":i.frameWidthInput=Number(t.stat(o));break;case"googFrameHeightInput":i.frameHeightInput=Number(t.stat(o));break;case"googFrameWidthSent":i.frameWidthSent=Number(t.stat(o));break;case"googFrameHeightSent":i.frameHeightSent=Number(t.stat(o));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(t.stat(o));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(t.stat(o));break;case"googFrameRateInput":i.frameRateInput=Number(t.stat(o));break;case"googFrameRateSent":i.frameRateSent=Number(t.stat(o));break;case"googFrameRateReceived":i.frameRateReceived=Number(t.stat(o));break;case"ssrc":i[o]=t.stat(o);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[o]=Number(t.stat(o));break}return i},n)),n}function kO(e,r){var t=r.simulateExceptionWhileStandardizingStats,n=t===void 0?!1:t;if(n)throw new Error("Error while gathering stats");var i=null,o=[],a=null,s=null,c=null,u=null,l=null;e.forEach(function(_){var w=_.type;switch(w){case"inbound-rtp":i=_;break;case"outbound-rtp":o.push(_);break;case"media-source":l=_;break;case"track":c=_;break;case"codec":u=_;break;case"remote-inbound-rtp":a=_;break;case"remote-outbound-rtp":s=_;break}});var d=c?c.remoteSource:!l,f=d?[i]:o,g=[],v=d?s:a;return f.forEach(function(_){var w={},y=[_,l,c,u,v&&v.ssrc===_.ssrc?v:null];function p(J){var ee=y.find(function(_e){return _e&&typeof _e[J]<"u"})||null;return ee?ee[J]:null}var h=p("ssrc");typeof h=="number"&&(w.ssrc=String(h));var S=p("timestamp");w.timestamp=Math.round(S);var T=p("mimeType");typeof T=="string"&&(T=T.split("/"),w.codecName=T[T.length-1]);var b=p("roundTripTime");typeof b=="number"&&(w.roundTripTime=Math.round(b*1e3));var E=p("jitter");typeof E=="number"&&(w.jitter=Math.round(E*1e3));var C=p("frameWidth");typeof C=="number"&&(d?w.frameWidthReceived=C:(w.frameWidthSent=C,w.frameWidthInput=c?c.frameWidth:l.width));var A=p("frameHeight");typeof A=="number"&&(d?w.frameHeightReceived=A:(w.frameHeightSent=A,w.frameHeightInput=c?c.frameHeight:l.height));var I=p("framesPerSecond");typeof I=="number"&&(w[d?"frameRateReceived":"frameRateSent"]=I);var Z=p("bytesReceived");typeof Z=="number"&&(w.bytesReceived=Z);var L=p("bytesSent");typeof L=="number"&&(w.bytesSent=L);var $=p("packetsLost");typeof $=="number"&&(w.packetsLost=$);var R=p("packetsReceived");typeof R=="number"&&(w.packetsReceived=R);var N=p("packetsSent");typeof N=="number"&&(w.packetsSent=N);var D=p("audioLevel");typeof D=="number"&&(D=Math.round(D*pO),d?w.audioOutputLevel=D:w.audioInputLevel=D);var q=p("totalPacketSendDelay");typeof q=="number"&&(w.totalPacketSendDelay=q);var x=p("totalEncodeTime");typeof x=="number"&&(w.totalEncodeTime=x);var M=p("framesEncoded");typeof M=="number"&&(w.framesEncoded=M);var B=p("estimatedPlayoutTimestamp");typeof B=="number"&&(w.estimatedPlayoutTimestamp=B);var K=p("totalDecodeTime");typeof K=="number"&&(w.totalDecodeTime=K);var Q=p("framesDecoded");typeof Q=="number"&&(w.framesDecoded=Q);var G=p("jitterBufferDelay");typeof G=="number"&&(w.jitterBufferDelay=G);var oe=p("jitterBufferEmittedCount");typeof oe=="number"&&(w.jitterBufferEmittedCount=oe),g.push(w)}),g}function TO(e,r){e===void 0&&(e=new Map);var t=r.isRemote,n=r.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var o=null,a=null;e.forEach(function(R){var N=R.isRemote,D=R.remoteId,q=R.type;if(!N)switch(q){case"inbound-rtp":o=R,a=e.get(D);break;case"outbound-rtp":a=R,o=e.get(D);break}});var s=t?o:a,c=t?a:o;function u(R){return s&&typeof s[R]<"u"?s[R]:c&&typeof c[R]<"u"?c[R]:null}var l={},d=u("timestamp");l.timestamp=Math.round(d);var f=u("ssrc");typeof f=="number"&&(l.ssrc=String(f));var g=u("bytesSent");typeof g=="number"&&(l.bytesSent=g);var v=u("packetsLost");typeof v=="number"&&(l.packetsLost=v);var _=u("packetsSent");typeof _=="number"&&(l.packetsSent=_);var w=u("roundTripTime");typeof w=="number"&&(l.roundTripTime=Math.round(w*1e3));var y=u("jitter");typeof y=="number"&&(l.jitter=Math.round(y*1e3));var p=u("framerateMean");typeof p=="number"&&(l.frameRateSent=Math.round(p));var h=u("bytesReceived");typeof h=="number"&&(l.bytesReceived=h);var S=u("packetsReceived");typeof S=="number"&&(l.packetsReceived=S);var T=u("framerateMean");typeof T=="number"&&(l.frameRateReceived=Math.round(T));var b=u("totalPacketSendDelay");typeof b=="number"&&(l.totalPacketSendDelay=b);var E=u("totalEncodeTime");typeof E=="number"&&(l.totalEncodeTime=E);var C=u("framesEncoded");typeof C=="number"&&(l.framesEncoded=C);var A=u("estimatedPlayoutTimestamp");typeof A=="number"&&(l.estimatedPlayoutTimestamp=A);var I=u("totalDecodeTime");typeof I=="number"&&(l.totalDecodeTime=I);var Z=u("framesDecoded");typeof Z=="number"&&(l.framesDecoded=Z);var L=u("jitterBufferDelay");typeof L=="number"&&(l.jitterBufferDelay=L);var $=u("jitterBufferEmittedCount");return typeof $=="number"&&(l.jitterBufferEmittedCount=$),l}var bO=hO;function EO(e){return e===void 0&&(e={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(e):Promise.reject(new Error("getUserMedia is not supported"))}var CO=EO,$u={exports:{}};typeof MediaStream=="function"?$u.exports=MediaStream:$u.exports=function(){throw new Error("MediaStream is not supported")};var Tg=$u.exports,Fu={exports:{}};typeof MediaStreamTrack=="function"?Fu.exports=MediaStreamTrack:Fu.exports=function(){throw new Error("MediaStreamTrack is not supported")};var PO=Fu.exports,Uu={exports:{}};typeof RTCIceCandidate=="function"?Uu.exports=RTCIceCandidate:Uu.exports=function(){throw new Error("RTCIceCandidate is not supported")};var OO=Uu.exports,Jr={exports:{}},nc,bp;function bg(){if(bp)return nc;bp=1;var e=function(){function r(t){this.descriptionInitDict=t;var n=t&&t.type==="rollback"?null:new RTCSessionDescription(t);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(r.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),r}();return nc=e,nc}var ld={exports:{}},_n=typeof Reflect=="object"?Reflect:null,Ep=_n&&typeof _n.apply=="function"?_n.apply:function(r,t,n){return Function.prototype.apply.call(r,t,n)},Zo;_n&&typeof _n.ownKeys=="function"?Zo=_n.ownKeys:Object.getOwnPropertySymbols?Zo=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Zo=function(r){return Object.getOwnPropertyNames(r)};function RO(e){console&&console.warn&&console.warn(e)}var Eg=Number.isNaN||function(r){return r!==r};function ae(){ae.init.call(this)}ld.exports=ae;ld.exports.once=AO;ae.EventEmitter=ae;ae.prototype._events=void 0;ae.prototype._eventsCount=0;ae.prototype._maxListeners=void 0;var Cp=10;function us(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ae,"defaultMaxListeners",{enumerable:!0,get:function(){return Cp},set:function(e){if(typeof e!="number"||e<0||Eg(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Cp=e}});ae.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ae.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Eg(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Cg(e){return e._maxListeners===void 0?ae.defaultMaxListeners:e._maxListeners}ae.prototype.getMaxListeners=function(){return Cg(this)};ae.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=r==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[r];if(c===void 0)return!1;if(typeof c=="function")Ep(c,this,t);else for(var u=c.length,l=Lg(c,u),n=0;n<u;++n)Ep(l[n],this,t);return!0};function Pg(e,r,t,n){var i,o,a;if(us(t),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),o=e._events),a=o[r]),a===void 0)a=o[r]=t,++e._eventsCount;else if(typeof a=="function"?a=o[r]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=Cg(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=r,s.count=a.length,RO(s)}return e}ae.prototype.addListener=function(r,t){return Pg(this,r,t,!1)};ae.prototype.on=ae.prototype.addListener;ae.prototype.prependListener=function(r,t){return Pg(this,r,t,!0)};function xO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Og(e,r,t){var n={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},i=xO.bind(n);return i.listener=t,n.wrapFn=i,i}ae.prototype.once=function(r,t){return us(t),this.on(r,Og(this,r,t)),this};ae.prototype.prependOnceListener=function(r,t){return us(t),this.prependListener(r,Og(this,r,t)),this};ae.prototype.removeListener=function(r,t){var n,i,o,a,s;if(us(t),i=this._events,i===void 0)return this;if(n=i[r],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[r],i.removeListener&&this.emit("removeListener",r,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():LO(n,o),n.length===1&&(i[r]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",r,s||t)}return this};ae.prototype.off=ae.prototype.removeListener;ae.prototype.removeAllListeners=function(r){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[r]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(r,t[i]);return this};function Rg(e,r,t){var n=e._events;if(n===void 0)return[];var i=n[r];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?jO(i):Lg(i,i.length)}ae.prototype.listeners=function(r){return Rg(this,r,!0)};ae.prototype.rawListeners=function(r){return Rg(this,r,!1)};ae.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):xg.call(e,r)};ae.prototype.listenerCount=xg;function xg(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}ae.prototype.eventNames=function(){return this._eventsCount>0?Zo(this._events):[]};function Lg(e,r){for(var t=new Array(r),n=0;n<r;++n)t[n]=e[n];return t}function LO(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function jO(e){for(var r=new Array(e.length),t=0;t<r.length;++t)r[t]=e[t].listener||e[t];return r}function AO(e,r){return new Promise(function(t,n){function i(a){e.removeListener(r,o),n(a)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),t([].slice.call(arguments))}jg(e,r,o,{once:!0}),r!=="error"&&DO(e,i,{once:!0})})}function DO(e,r,t){typeof e.on=="function"&&jg(e,"error",r,t)}function jg(e,r,t,n){if(typeof e.on=="function")n.once?e.once(r,t):e.on(r,t);else if(typeof e.addEventListener=="function")e.addEventListener(r,function i(o){n.once&&e.removeEventListener(r,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Ne=ld.exports,ic,Pp;function dd(){if(Pp)return ic;Pp=1;var e=m&&m.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s=a.call(i),c,u=[],l;try{for(;(o===void 0||o-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},r=m&&m.__spreadArray||function(i,o){for(var a=0,s=o.length,c=i.length;a<s;a++,c++)i[c]=o[a];return i},t=Ne.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new t}})}return i.prototype.dispatchEvent=function(o){return this._eventEmitter.emit(o.type,o)},i.prototype.addEventListener=function(){var o;return(o=this._eventEmitter).addListener.apply(o,r([],e(arguments)))},i.prototype.removeEventListener=function(){var o;return(o=this._eventEmitter).removeListener.apply(o,r([],e(arguments)))},i}();return ic=n,ic}var oc,Op;function Ag(){if(Op)return oc;Op=1;var e=ie.defer,r={high:new Set(["low"]),low:new Set(["high"])},t=function(){function i(o){o===void 0&&(o="low");var a=o;Object.defineProperties(this,{_state:{set:function(s){var c=this;if(a!==s){a=s;var u=this._whenDeferreds.get(a);u.forEach(function(l){return l.resolve(c)}),u.clear()}},get:function(){return a}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(o){if(!r[this.state].has(o))throw n(this.state,o);return this._state=o,this},i.prototype.when=function(o){if(this.state===o)return Promise.resolve(this);if(!r[this.state].has(o))return Promise.reject(n(this.state,o));var a=e();return this._whenDeferreds.get(o).add(a),a.promise},i}();function n(i,o){return new Error('Cannot transition from "'+i+'" to "'+o+'"')}return oc=t,oc}var ac,Rp;function IO(){if(Rp)return ac;Rp=1;var e=function(){function r(t){Object.defineProperties(this,{track:{enumerable:!0,value:t,writable:!0}})}return r}();return ac=e,ac}var sc,xp;function MO(){if(xp)return sc;xp=1;var e=m&&m.__extends||function(){var L=function($,R){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,D){N.__proto__=D}||function(N,D){for(var q in D)Object.prototype.hasOwnProperty.call(D,q)&&(N[q]=D[q])},L($,R)};return function($,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");L($,R);function N(){this.constructor=$}$.prototype=R===null?Object.create(R):(N.prototype=R.prototype,new N)}}(),r=m&&m.__read||function(L,$){var R=typeof Symbol=="function"&&L[Symbol.iterator];if(!R)return L;var N=R.call(L),D,q=[],x;try{for(;($===void 0||$-- >0)&&!(D=N.next()).done;)q.push(D.value)}catch(M){x={error:M}}finally{try{D&&!D.done&&(R=N.return)&&R.call(N)}finally{if(x)throw x.error}}return q},t=m&&m.__spreadArray||function(L,$){for(var R=0,N=$.length,D=L.length;R<N;R++,D++)L[D]=$[R];return L},n=bg(),i=dd(),o=Ag(),a=Tg,s=IO(),c=qe,u=c.getSdpFormat,l=c.updatePlanBTrackIdsToSSRCs,d=c.updateUnifiedPlanTrackIdsToSSRCs,f=ie,g=f.delegateMethods,v=f.interceptEvent,_=f.isIOSChrome,w=f.legacyPromise,y=f.proxyProperties,p=u()==="unified",h=function(L){e($,L);function $(R,N){R===void 0&&(R={});var D=L.call(this)||this,q=Object.assign(R.iceTransportPolicy?{iceTransports:R.iceTransportPolicy}:{},R);v(D,"datachannel"),v(D,"signalingstatechange");var x=u(q.sdpSemantics),M=new RTCPeerConnection(q,N);return Object.defineProperties(D,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new a},_peerConnection:{value:M},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:x},_senders:{value:new Map},_signalingStateLatch:{value:new o},_tracksToSSRCs:{value:new Map,writable:!0}}),M.addEventListener("datachannel",function(B){I(B.channel),D.dispatchEvent(B)}),M.addEventListener("signalingstatechange",function(){for(var B=[],K=0;K<arguments.length;K++)B[K]=arguments[K];M.signalingState==="stable"&&(D._appliedTracksToSSRCs=new Map(D._tracksToSSRCs)),!D._pendingLocalOffer&&!D._pendingRemoteOffer&&D.dispatchEvent.apply(D,t([],r(B)))}),M.ontrack=function(){},typeof M.addTrack!="function"&&M.addStream(D._localStream),y(RTCPeerConnection.prototype,D,M),D}return Object.defineProperty($.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),$.prototype.addTrack=function(R){for(var N,D=[],q=1;q<arguments.length;q++)D[q-1]=arguments[q];if(typeof this._peerConnection.addTrack=="function")return(N=this._peerConnection).addTrack.apply(N,t([R],r(D)));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack ["+R.id+`, 
        `+R.kind+"]: RTCPeerConnection is closed");var x=this._senders.get(R);if(x&&x.track)throw new Error("Cannot add MediaStreamTrack ['"+R.id+`, 
        `+R.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(R),this._peerConnection.addStream(this._localStream),x=new s(R),this._senders.set(R,x),x},$.prototype.removeTrack=function(R){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(R)}catch{}else{var N=R.track;if(!N)return;R=this._senders.get(N),R&&R.track&&(R.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(N),this._peerConnection.addStream(this._localStream))}},$.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},$.prototype.addIceCandidate=function(R){for(var N=this,D=[],q=1;q<arguments.length;q++)D[q-1]=arguments[q];var x;return this.signalingState==="have-remote-offer"?x=this._signalingStateLatch.when("low").then(function(){return N._peerConnection.addIceCandidate(R)}):x=this._peerConnection.addIceCandidate(R),D.length>0?w.apply(void 0,t([x],r(D))):x},$.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},$.prototype.createAnswer=function(){for(var R=this,N=[],D=0;D<arguments.length;D++)N[D]=arguments[D];var q;return this._pendingRemoteOffer?q=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return R._signalingStateLatch.lower(),R._peerConnection.createAnswer()}).then(function(x){return R._pendingRemoteOffer=null,R._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:Z(R._sdpFormat,R._tracksToSSRCs,x.sdp)})},function(x){throw R._pendingRemoteOffer=null,x}):q=this._peerConnection.createAnswer().then(function(x){return R._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:Z(R._sdpFormat,R._tracksToSSRCs,x.sdp)})}),N.length>1?w.apply(void 0,t([q],r(N))):q},$.prototype.createOffer=function(){for(var R=this,N=[],D=0;D<arguments.length;D++)N[D]=arguments[D];var q=r(N,3),x=q[0],M=q[1],B=q[2],K=B||x||{};if(_()){if(K.offerToReceiveVideo&&!this._audioTransceiver&&!(p&&b(this,"audio"))){delete K.offerToReceiveAudio;try{this._audioTransceiver=p?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(G){return Promise.reject(G)}}if(K.offerToReceiveVideo&&!this._videoTransceiver&&!(p&&b(this,"video"))){delete K.offerToReceiveVideo;try{this._videoTransceiver=p?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(G){return Promise.reject(G)}}}var Q=this._peerConnection.createOffer(K).then(function(G){return R._rolledBackTracksToSSRCs.clear(),new n({type:G.type,sdp:Z(R._sdpFormat,R._tracksToSSRCs,G.sdp)})});return N.length>1?w(Q,x,M):Q},$.prototype.createDataChannel=function(R,N){N=A(N);var D=this._peerConnection.createDataChannel(R,N);return I(D),D},$.prototype.setLocalDescription=function(){for(var R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];var D=r(R,3),q=D[0],x=D[1],M=D[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var B=S(this,!0,q);return R.length>1?w(B,x,M):B},$.prototype.setRemoteDescription=function(){for(var R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];var D=r(R,3),q=D[0],x=D[1],M=D[2];this._rolledBackTracksToSSRCs.clear();var B=S(this,!1,q);return R.length>1?w(B,x,M):B},$}(i);g(RTCPeerConnection.prototype,h.prototype,"_peerConnection");function S(L,$,R){function N(G){$?L._pendingLocalOffer=G:L._pendingRemoteOffer=G}function D(){$?L._pendingLocalOffer=null:L._pendingRemoteOffer=null}var q=$?L._pendingLocalOffer:L._pendingRemoteOffer,x=$?L._pendingRemoteOffer:L._pendingLocalOffer,M=$?"have-local-offer":"have-remote-offer",B=$?"setLocalDescription":"setRemoteDescription",K;if(!$&&x&&R.type==="answer")K=T(L,R);else if(R.type==="offer"){if(L.signalingState!==M&&L.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+($?"local":"remote")+" offer in state "+L.signalingState));!q&&L._signalingStateLatch.state==="low"&&L._signalingStateLatch.raise();var Q=L.signalingState;N(E(R)),K=Promise.resolve(),L.signalingState!==Q&&K.then(function(){return L.dispatchEvent(new Event("signalingstatechange"))})}else R.type==="rollback"&&(L.signalingState!==M?K=Promise.reject(new Error("Cannot rollback "+($?"local":"remote")+" description in "+L.signalingState)):(D(),L._rolledBackTracksToSSRCs=new Map(L._tracksToSSRCs),L._tracksToSSRCs=new Map(L._appliedTracksToSSRCs),K=Promise.resolve(),K.then(function(){return L.dispatchEvent(new Event("signalingstatechange"))})));return K||L._peerConnection[B](E(R))}function T(L,$){var R=L._pendingLocalOffer;return L._peerConnection.setLocalDescription(R).then(function(){return L._pendingLocalOffer=null,L.setRemoteDescription($)}).then(function(){L._signalingStateLatch.lower()})}function b(L,$){return!!L.getTransceivers().find(function(R){var N=R.receiver,D=N===void 0?{}:N,q=D.track,x=q===void 0?{}:q;return x.kind===$})}function E(L){return L instanceof n&&L._description?L._description:new RTCSessionDescription(L)}function C(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function A(L){return L=Object.assign({},L),C()&&"maxPacketLifeTime"in L&&(L.maxRetransmitTime=L.maxPacketLifeTime),L}function I(L){return Object.defineProperty(L,"maxRetransmits",{value:L.maxRetransmits===65535?null:L.maxRetransmits}),C()&&Object.defineProperty(L,"maxPacketLifeTime",{value:L.maxRetransmitTime===65535?null:L.maxRetransmitTime}),L}function Z(L,$,R){return L==="unified"?d($,R):l($,R)}return sc=h,sc}var cc,Lp;function Dg(){return Lp||(Lp=1,cc=RTCSessionDescription),cc}var uc,jp;function NO(){if(jp)return uc;jp=1;var e=m&&m.__extends||function(){var _=function(w,y){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},_(w,y)};return function(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");_(w,y);function p(){this.constructor=w}w.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)}}(),r=m&&m.__read||function(_,w){var y=typeof Symbol=="function"&&_[Symbol.iterator];if(!y)return _;var p=y.call(_),h,S=[],T;try{for(;(w===void 0||w-- >0)&&!(h=p.next()).done;)S.push(h.value)}catch(b){T={error:b}}finally{try{h&&!h.done&&(y=p.return)&&y.call(p)}finally{if(T)throw T.error}}return S},t=m&&m.__spreadArray||function(_,w){for(var y=0,p=w.length,h=_.length;y<p;y++,h++)_[h]=w[y];return _},n=dd(),i=Dg(),o=qe.updateUnifiedPlanTrackIdsToSSRCs,a=ie,s=a.delegateMethods,c=a.interceptEvent,u=a.legacyPromise,l=a.proxyProperties,d=function(_){e(w,_);function w(y){var p=_.call(this)||this;c(p,"signalingstatechange");var h=new RTCPeerConnection(y);Object.defineProperties(p,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:h},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var S;return h.addEventListener("signalingstatechange",function(){for(var T=[],b=0;b<arguments.length;b++)T[b]=arguments[b];!p._rollingBack&&p.signalingState!==S&&(S=p.signalingState,p._isClosed?setTimeout(function(){return p.dispatchEvent.apply(p,t([],r(T)))}):p.dispatchEvent.apply(p,t([],r(T))))}),l(RTCPeerConnection.prototype,p,h),p}return Object.defineProperty(w.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"localDescription",{get:function(){return v(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),w.prototype.createAnswer=function(){for(var y=this,p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];var S;return S=this._peerConnection.createAnswer().then(function(T){return g(y,T),v(T,y._initiallyNegotiatedDtlsRole)}),typeof p[0]=="function"?u.apply(void 0,t([S],r(p))):S},w.prototype.createOffer=function(){for(var y=this,p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];var S=r(p,3),T=S[0],b=S[1],E=S[2],C=E||T||{},A;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var I=this.signalingState==="have-local-offer";A=f(this,I,function(){return y.createOffer(C)})}else A=this._peerConnection.createOffer(C);return A=A.then(function(Z){return new i({type:Z.type,sdp:o(y._tracksToSSRCs,Z.sdp)})}),p.length>1?u(A,T,b):A},w.prototype.setLocalDescription=function(){for(var y,p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];var S=r(p),T=S[0],b=S.slice(1),E;return T&&T.type==="answer"&&this.signalingState==="have-local-offer"&&(E=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),E?p.length>1?u.apply(void 0,t([E],r(b))):E:(y=this._peerConnection).setLocalDescription.apply(y,t([],r(p)))},w.prototype.setRemoteDescription=function(){for(var y=this,p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];var S=r(p),T=S[0],b=S.slice(1),E;return T&&this.signalingState==="have-remote-offer"&&(T.type==="answer"?E=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):T.type==="offer"&&(E=f(this,!1,function(){return y._peerConnection.setRemoteDescription(T)}))),E||(E=this._peerConnection.setRemoteDescription(T)),E=E.then(function(){return g(y,T,!0)}),p.length>1?u.apply(void 0,t([E],r(b))):E},w.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},w}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function f(_,w,y){var p=w?"setLocalDescription":"setRemoteDescription";return _._rollingBack=!0,_._peerConnection[p](new i({type:"rollback"})).then(y).then(function(h){return _._rollingBack=!1,h},function(h){throw _._rollingBack=!1,h})}function g(_,w,y){if(!(_._initiallyNegotiatedDtlsRole||w.type==="offer")){var p=w.sdp.match(/a=setup:([a-z]+)/);if(p){var h=p[1];_._initiallyNegotiatedDtlsRole=y?{active:"passive",passive:"active"}[h]:h}}}function v(_,w){return _&&_.type==="answer"&&w?new i({type:_.type,sdp:_.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+w)}):_}return uc=d,uc}var lc,Ap;function $O(){if(Ap)return lc;Ap=1;var e=m&&m.__extends||function(){var S=function(T,b){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(E[A]=C[A])},S(T,b)};return function(T,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");S(T,b);function E(){this.constructor=T}T.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}(),r=m&&m.__read||function(S,T){var b=typeof Symbol=="function"&&S[Symbol.iterator];if(!b)return S;var E=b.call(S),C,A=[],I;try{for(;(T===void 0||T-- >0)&&!(C=E.next()).done;)A.push(C.value)}catch(Z){I={error:Z}}finally{try{C&&!C.done&&(b=E.return)&&b.call(E)}finally{if(I)throw I.error}}return A},t=m&&m.__spreadArray||function(S,T){for(var b=0,E=T.length,C=S.length;b<E;b++,C++)S[C]=T[b];return S},n=dd(),i=Ag(),o=qe,a=o.getSdpFormat,s=o.updatePlanBTrackIdsToSSRCs,c=o.updateUnifiedPlanTrackIdsToSSRCs,u=ie,l=u.delegateMethods,d=u.interceptEvent,f=u.proxyProperties,g=a()==="unified",v=g?c:s,_=function(S){e(T,S);function T(b){var E=S.call(this)||this;d(E,"datachannel"),d(E,"iceconnectionstatechange"),d(E,"signalingstatechange"),d(E,"track");var C=new RTCPeerConnection(b);return Object.defineProperties(E,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:C},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),C.addEventListener("datachannel",function(A){h(A.channel),E.dispatchEvent(A)}),C.addEventListener("iceconnectionstatechange",function(){for(var A=[],I=0;I<arguments.length;I++)A[I]=arguments[I];E._isClosed||E.dispatchEvent.apply(E,t([],r(A)))}),C.addEventListener("signalingstatechange",function(){for(var A=[],I=0;I<arguments.length;I++)A[I]=arguments[I];E._isClosed||(C.signalingState==="stable"&&(E._appliedTracksToSSRCs=new Map(E._tracksToSSRCs)),!E._pendingLocalOffer&&!E._pendingRemoteOffer&&E.dispatchEvent.apply(E,t([],r(A))))}),C.addEventListener("track",function(A){E._pendingRemoteOffer=null,E.dispatchEvent(A)}),f(RTCPeerConnection.prototype,E,C),E}return Object.defineProperty(T.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),T.prototype.addIceCandidate=function(b){var E=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return E._peerConnection.addIceCandidate(b)}):this._peerConnection.addIceCandidate(b)},T.prototype.createOffer=function(b){var E=this;if(b=Object.assign({},b),b.offerToReceiveVideo&&!this._audioTransceiver&&!(g&&p(this,"audio"))){delete b.offerToReceiveAudio;try{this._audioTransceiver=g?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(C){return Promise.reject(C)}}if(b.offerToReceiveVideo&&!this._videoTransceiver&&!(g&&p(this,"video"))){delete b.offerToReceiveVideo;try{this._videoTransceiver=g?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(C){return Promise.reject(C)}}return this._peerConnection.createOffer(b).then(function(C){return E._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:C.type,sdp:v(E._tracksToSSRCs,C.sdp)})})},T.prototype.createAnswer=function(b){var E=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return E._signalingStateLatch.lower(),E._peerConnection.createAnswer()}).then(function(C){return E._pendingRemoteOffer=null,E._rolledBackTracksToSSRCs.clear(),g?new RTCSessionDescription({type:C.type,sdp:v(E._tracksToSSRCs,C.sdp)}):C},function(C){throw E._pendingRemoteOffer=null,C}):this._peerConnection.createAnswer(b).then(function(C){return E._rolledBackTracksToSSRCs.clear(),g?new RTCSessionDescription({type:C.type,sdp:v(E._tracksToSSRCs,C.sdp)}):C})},T.prototype.createDataChannel=function(b,E){var C=this._peerConnection.createDataChannel(b,E);return h(C),C},T.prototype.removeTrack=function(b){b.replaceTrack(null),this._peerConnection.removeTrack(b)},T.prototype.setLocalDescription=function(b){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),w(this,!0,b)},T.prototype.setRemoteDescription=function(b){return this._rolledBackTracksToSSRCs.clear(),w(this,!1,b)},T.prototype.close=function(){var b=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){b.dispatchEvent(new Event("iceconnectionstatechange")),b.dispatchEvent(new Event("signalingstatechange"))}))},T}(n);l(RTCPeerConnection.prototype,_.prototype,"_peerConnection");function w(S,T,b){function E(R){T?S._pendingLocalOffer=R:S._pendingRemoteOffer=R}function C(){T?S._pendingLocalOffer=null:S._pendingRemoteOffer=null}var A=T?S._pendingLocalOffer:S._pendingRemoteOffer,I=T?S._pendingRemoteOffer:S._pendingLocalOffer,Z=T?"have-local-offer":"have-remote-offer",L=T?"setLocalDescription":"setRemoteDescription";if(!T&&I&&b.type==="answer")return y(S,b);if(b.type==="offer"){if(S.signalingState!==Z&&S.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(T?"local":"remote")+`
        offer in state `+S.signalingState));!A&&S._signalingStateLatch.state==="low"&&S._signalingStateLatch.raise();var $=S.signalingState;return E(b),S.signalingState!==$?Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(b.type==="rollback")return S.signalingState!==Z?Promise.reject(new Error(`Cannot rollback 
        `+(T?"local":"remote")+" description in "+S.signalingState)):(C(),S._rolledBackTracksToSSRCs=new Map(S._tracksToSSRCs),S._tracksToSSRCs=new Map(S._appliedTracksToSSRCs),Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}));return S._peerConnection[L](b)}function y(S,T){var b=S._pendingLocalOffer;return S._peerConnection.setLocalDescription(b).then(function(){return S._pendingLocalOffer=null,S.setRemoteDescription(T)}).then(function(){return S._signalingStateLatch.lower()})}function p(S,T){return!!S.getTransceivers().find(function(b){var E=b.receiver,C=E===void 0?{}:E,A=C.track,I=A===void 0?{}:A;return I.kind===T})}function h(S){return Object.defineProperties(S,{maxPacketLifeTime:{value:S.maxPacketLifeTime===65535?null:S.maxPacketLifeTime},maxRetransmits:{value:S.maxRetransmits===65535?null:S.maxRetransmits}})}return lc=_,lc}if(typeof RTCPeerConnection=="function"){var FO=ie.guessBrowser;switch(FO()){case"chrome":Jr.exports=MO();break;case"firefox":Jr.exports=NO();break;case"safari":Jr.exports=$O();break;default:Jr.exports=RTCPeerConnection;break}}else Jr.exports=function(){throw new Error("RTCPeerConnection is not supported")};var UO=Jr.exports,oi={exports:{}};if(typeof RTCSessionDescription=="function"){var VO=ie.guessBrowser;switch(VO()){case"chrome":oi.exports=bg();break;case"firefox":oi.exports=Dg();break;default:oi.exports=RTCSessionDescription;break}}else oi.exports=function(){throw new Error("RTCSessionDescription is not supported")};var BO=oi.exports,Ig={};Object.defineProperties(Ig,{getStats:{enumerable:!0,value:bO},getUserMedia:{enumerable:!0,value:CO},MediaStream:{enumerable:!0,value:Tg},MediaStreamTrack:{enumerable:!0,value:PO},RTCIceCandidate:{enumerable:!0,value:OO},RTCPeerConnection:{enumerable:!0,value:UO},RTCSessionDescription:{enumerable:!0,value:BO}});var Br=Ig,fd=function(r,t){if(r&&t)if(r.super_=t,typeof Object.create=="function")r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}},zO=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function WO(){return/Android/.test(navigator.userAgent)}function Mg(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function Ng(){return Mg()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function $g(){return Mg()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function HO(){return Ng()||$g()}function QO(){return/Mobi/.test(navigator.userAgent)}function qO(e){return e==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function KO(e){if(e!=="chrome")return null;if("brave"in navigator)return"brave";var r=YO(navigator.userAgent),t=r.reduce(function(a,s){return a.replace(s,"")},navigator.userAgent),n=t.match(/[^\s]+/g)||[],i=zO(n.map(function(a){return a.split("/")[0].toLowerCase()})),o=i.slice(2);return o.find(function(a){return!["chrome","mobile","safari"].includes(a)})||null}function GO(e){return e!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(r){return navigator.userAgent.toLowerCase().includes(r)})||null}function YO(e){for(var r=[],t=[],n=0;n<e.length;n++)if(e[n]==="(")r.push(n);else if(e[n]===")"&&r.length>0){var i=r.pop();r.length===0&&t.push(e.substring(i,n+1))}return t}var zr={isAndroid:WO,isIOS:HO,isIpad:Ng,isIphone:$g,isMobile:QO,isNonChromiumEdge:qO,mobileWebKitBrowser:GO,rebrandedChromeBrowser:KO};function JO(e){return e=typeof e=="number"?e:0,new Promise(function(r){return setTimeout(r,e)})}function ZO(e,r,t){t=typeof t=="number"?t:250;var n=e.createMediaStreamSource(r),i=e.createAnalyser();i.fftSize=2048,n.connect(i);var o=new Uint8Array(i.fftSize),a=!1;setTimeout(function(){a=!0},t);function s(){return a?Promise.resolve(!0):(i.getByteTimeDomainData(o),o.some(function(c){return c!==128&&c!==0})?Promise.resolve(!1):JO().then(s))}return s().then(function(c){return n.disconnect(),c},function(c){throw n.disconnect(),c})}var Fg=ZO,dc,Dp;function ls(){if(Dp)return dc;Dp=1;var e=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,r=function(){function t(n){n=Object.assign({AudioContext:e},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:t}})}return t.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},t.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},t}();return dc=new r,dc}var XO=Fg,e1=3,t1=250;function r1(e){var r=ls(),t={},n=r.getOrCreate(t),i=e1;function o(){return i--,XO(n,e.srcObject,t1).then(function(a){return a?i>0?o():!0:!1}).catch(function(){return!0})}return o().finally(function(){r.release(t)})}var Ug=r1,To=U.defer,n1=function(){function e(){Object.defineProperties(this,{_audio:{value:To(),writable:!0},_video:{value:To(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return e.prototype.resolveDeferred=function(r){r==="audio"?this._audio.resolve():this._video.resolve()},e.prototype.startDeferred=function(r){r==="audio"?this._audio=To():this._video=To()},e.prototype.whenResolved=function(r){return r==="audio"?this._audio.promise:this._video.promise},e}(),Vg=new n1,i1=Ne.EventEmitter,o1=U.hidePrivateAndCertainPublicPropertiesInClass,Zi=o1(i1,["domain"]),a1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),s1=Zi,Bg=U,c1=Bg.buildLogLevels,u1=Bg.valueToJSON,l1=se.DEFAULT_LOG_LEVEL,d1=Ut,f1=0,p1=function(e){a1(r,e);function r(t,n,i){var o=this;i=Object.assign({name:t,log:null,logLevel:l1},i),o=e.call(this)||this;var a=String(i.name),s=c1(i.logLevel),c=i.log?i.log.createLog("media",o):new d1("media",o,s,i.loggerName);return Object.defineProperties(o,{_instanceId:{value:++f1},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:a}}),o}return r.prototype.toJSON=function(){return u1(this)},r}(s1),pd=p1,h1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),v1=zr.isIOS,m1=Br.MediaStream,zg=U,y1=zg.waitForEvent,g1=zg.waitForSometime,_1=Vg,w1=pd,S1=function(e){h1(r,e);function r(t,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:v1()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=e.call(this,t.id,t.kind,n)||this;var o=!1;return n=Object.assign({MediaStream:m1},n),Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return o},set:function(a){o=a}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},isStarted:{enumerable:!0,get:function(){return o}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||t.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return r.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},r.prototype._initialize=function(){var t=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function n(){t._end(),t.mediaStreamTrack.removeEventListener("ended",n)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},r.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},r.prototype.attach=function(t){var n=this;if(typeof t=="string"?t=this._selectElement(t):t||(t=this._createElement()),this._log.debug("Attempting to attach to element:",t),t=this._attach(t),this._shouldShimAttachedElements&&!this._elShims.has(t)){var i=this._playPausedElementsIfNotBackgrounded?function(){return k1(t,n._log)}:null;this._elShims.set(t,T1(t,i))}return t},r.prototype._attach=function(t,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=t.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var o=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[o]().forEach(function(a){i.removeTrack(a)}),i.addTrack(n),t.srcObject=i,t.autoplay=!0,t.playsInline=!0,this._attachments.has(t)||this._attachments.add(t),t},r.prototype._selectElement=function(t){var n=document.querySelector(t);if(!n)throw new Error("Selector matched no element: "+t);return n},r.prototype._updateElementsMediaStreamTrack=function(){var t=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return t._attach(n)})},r.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},r.prototype.detach=function(t){var n;return typeof t=="string"?n=[this._selectElement(t)]:t?n=[t]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),t?n[0]:n},r.prototype._detachElements=function(t){return t.map(this._detachElement.bind(this))},r.prototype._detachElement=function(t){if(!this._attachments.has(t))return t;var n=t.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(t),this._shouldShimAttachedElements&&this._elShims.has(t)){var i=this._elShims.get(t);i.unShim(),this._elShims.delete(t)}return t},r.prototype._getAllAttachedElements=function(){var t=[];return this._attachments.forEach(function(n){t.push(n)}),t},r}(w1);function k1(e,r){var t=e.tagName.toLowerCase();r.warn("Unintentionally paused:",e),Promise.race([y1(document,"visibilitychange"),g1(1e3)]).then(function(){document.visibilityState==="visible"&&_1.whenResolved("audio").then(function(){return r.info("Playing unintentionally paused <"+t+"> element"),r.debug("Element:",e),e.play()}).then(function(){r.info("Successfully played unintentionally paused <"+t+"> element"),r.debug("Element:",e)}).catch(function(n){r.warn("Error while playing unintentionally paused <"+t+"> element:",{error:n,el:e})})})}function T1(e,r){r===void 0&&(r=null);var t=e.pause,n=e.play,i=!1;e.pause=function(){return i=!0,t.call(e)},e.play=function(){return i=!1,n.call(e)};var o=r?function(){i||r()}:null;return o&&e.addEventListener("pause",o),{pausedIntentionally:function(){return i},unShim:function(){e.pause=t,e.play=n,o&&e.removeEventListener("pause",o)}}}var Wg=S1,b1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E1=Wg,C1=function(e){b1(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.attach=function(){return e.prototype.attach.apply(this,arguments)},r.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},r}(E1),Hg=C1,Vu=null,P1=3,Ip=50,Mp=250,Np=50;function O1(e){try{var r=Vu.getContext("2d");r.drawImage(e,0,0,Np,Ip);var t=r.getImageData(0,0,Np,Ip),n=t.data.filter(function(o,a){return(a+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(o){return console.log("Error checking silence: ",o),!1}}function R1(e){return Vu=Vu||document.createElement("canvas"),new Promise(function(r){var t=P1;setTimeout(function n(){return t--,O1(e)?t>0?setTimeout(n,Mp):r(!0):r(!1)},Mp)})}var Qg=R1,x1=function(){function e(r){var t=this;r===void 0&&(r=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){t._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<r;n++)this._listeners.push([])}return e.prototype.clear=function(){for(var r=this._listeners.length,t=0;t<r;t++)this._listeners[t]=[]},e.prototype._listenerCount=function(){return this._listeners.reduce(function(r,t){return r+t.length},0)},e.prototype._emitVisible=function(r){for(var t=this,n=Promise.resolve(),i=function(a){n=n.then(function(){return t._emitVisiblePhase(a,r)})},o=1;o<=this._listeners.length;o++)i(o);return n},e.prototype._emitVisiblePhase=function(r,t){var n=this._listeners[r-1];return Promise.all(n.map(function(i){var o=i(t);return o instanceof Promise?o:Promise.resolve(o)}))},e.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},e.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},e.prototype.onVisibilityChange=function(r,t){if(typeof r!="number"||r<=0||r>this._listeners.length)throw new Error("invalid phase: ",r);var n=this._listeners[r-1];return n.push(t),this._listenerCount()===1&&this._start(),this},e.prototype.offVisibilityChange=function(r,t){if(typeof r!="number"||r<=0||r>this._listeners.length)throw new Error("invalid phase: ",r);var n=this._listeners[r-1],i=n.indexOf(t);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},e}(),hd=new x1(2),L1=Fg;function j1(e,r,t,n,i){n=typeof n=="number"?n:3;var o=0,a=ls(),s={},c=a.getOrCreate(s);function u(){return r(t).then(function(l){var d=t.audio?L1(c,l,i).catch(function(f){return e.warn("Encountered an error while detecting silence",f),!0}):Promise.resolve(!1);return d.then(function(f){if(f){if(n<=0)return e.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),l}else return e.info("Got a non-silent audio MediaStreamTrack; returning it."),l;return e.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++o+"."),l.getTracks().forEach(function(g){return g.stop()}),n--,u()})})}return u().then(function(l){return a.release(s),l},function(l){throw a.release(s),l})}var qg=j1,A1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$p=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Fp=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},D1=Ne.EventEmitter,I1=function(e){A1(r,e);function r(){var t=e.call(this)||this;return Object.defineProperties(t,{_queuedEvents:{value:new Map}}),t}return r.prototype.dequeue=function(t){var n=this,i=!0;if(!t)return this._queuedEvents.forEach(function(a,s){i=this.dequeue(s)&&i},this),i;var o=this._queuedEvents.get(t)||[];return this._queuedEvents.delete(t),o.reduce(function(a,s){return n.emit.apply(n,Fp([],$p([t].concat(s))))&&a},i)},r.prototype.queue=function(){var t=[].slice.call(arguments);if(this.emit.apply(this,Fp([],$p(t))))return!0;var n=t[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(t.slice(1)),!1},r}(D1),Kg=I1,M1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),N1=Kg,$1=function(e){M1(r,e);function r(t,n){var i=e.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:t},kind:{enumerable:!0,value:n}}),i}return r.prototype.stop=function(){this.emit("stopped")},r}(N1),Gg=$1,F1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U1=Gg,V1=function(e){F1(r,e);function r(t,n){var i=e.call(this,t,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return r.prototype.stop=function(){this.track.stop(),e.prototype.stop.call(this)},r}(U1),Yg=V1,B1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z1=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},W1=Yg,H1=function(e){B1(r,e);function r(t){var n=e.call(this,t.id,t)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return r.prototype._reemitMediaStreamTrackEvents=function(t){t===void 0&&(t=this._track);var n=this,i=n._eventsToReemitters,o=n._track;if(i.forEach(function(s,c){return t.addEventListener(c,s)}),o!==t&&(i.forEach(function(s,c){return o.removeEventListener(c,s)}),o.muted!==t.muted)){var a=i.get(t.muted?"mute":"unmute");a()}},r.prototype.clone=function(){var t=new r(this.track.clone());return this._clones.add(t),t},r.prototype.removeClone=function(t){this._clones.delete(t)},r.prototype.setMediaStreamTrack=function(t){var n=this,i=Array.from(this._clones),o=Array.from(this._senders);return Promise.all(i.map(function(a){return a.setMediaStreamTrack(t.clone())}).concat(o.map(function(a){return n._replaceTrack(a,t)}))).finally(function(){n._reemitMediaStreamTrackEvents(t),n._track=t})},r.prototype.addSender=function(t,n){return this._senders.add(t),n&&this._senderToPublisherHintCallbacks.set(t,n),this},r.prototype.removeSender=function(t){return this._senders.delete(t),this._senderToPublisherHintCallbacks.delete(t),this},r.prototype.setPublisherHint=function(t){var n=z1(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(t):Promise.resolve("COULD_NOT_APPLY_HINT")},r.prototype._replaceTrack=function(t,n){var i=this;return t.replaceTrack(n).then(function(o){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),o})},r}(W1),Jg=H1,Q1=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),q1=Br.getUserMedia,K1=zr.isIOS,ds=U,Up=ds.capitalize,G1=ds.defer,Y1=ds.waitForSometime,J1=ds.waitForEvent,Z1=se.typeErrors.ILLEGAL_INVOKE,X1=Ug,eR=Qg,Vp=hd,Bp=Vg,tR=qg,rR=Jg;function nR(e){return function(r){Q1(t,r);function t(n,i){var o=this,a=K1()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:q1,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:a,gUMSilentTrackWorkaround:tR},i);var s=new rR(n),c=s.kind;return o=r.call(this,s,i)||this,Object.defineProperties(o,{_constraints:{value:typeof i[c]=="object"?i[c]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return o.emit("muted",o)}],["unmuted",function(){return o.emit("unmuted",o)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),o._workaroundWebKitBug1208516&&(o._workaroundWebKitBug1208516Cleanup=zp(o)),o._reemitTrackSenderEvents(),o}return t.prototype._end=function(){var n=this;this._didCallEnd||(r.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,o){return n._trackSender.removeListener(o,i)}),this.emit("stopped",this))},t.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),r.prototype._initialize.call(this)},t.prototype._reacquireTrack=function(n){var i,o=this,a=o._getUserMedia,s=o._gUMSilentTrackWorkaround,c=o._log,u=o.mediaStreamTrack.kind;c.info("Re-acquiring the MediaStreamTrack"),c.debug("Constraints:",n);var l=Object.assign({audio:!1,video:!1},(i={},i[u]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(c,a,l):a(l);return d.then(function(f){return f.getTracks()[0]})},t.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,o){return n._trackSender.on(o,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},t.prototype._restart=function(n){var i=this,o=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(a){throw o.error("Failed to re-acquire the MediaStreamTrack:",{error:a,constraints:n}),a}).then(function(a){return o.info("Re-acquired the MediaStreamTrack"),o.debug("MediaStreamTrack:",a),i._constraints=Object.assign({},n),i._setMediaStreamTrack(a)})},t.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(o){i._log.warn("setMediaStreamTrack failed:",{error:o,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(o){return i._attach(o)})})},t.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},t.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info((n?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},t.prototype.disable=function(){return this.enable(!1)},t.prototype.restart=function(n){var i=this,o=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(Z1("restart","can only be called on a"+(" Local"+Up(o)+"Track that is created using createLocalTracks")+(" or createLocal"+Up(o)+"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var a=this._restart(n);return this._workaroundWebKitBug1208516&&(a=a.finally(function(){i._workaroundWebKitBug1208516Cleanup=zp(i)})),a},t.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},t}(e)}function zp(e){var r=e._log,t=e.kind,n=e._noiseCancellation,i={audio:X1,video:eR}[t],o=function(){return n?n.sourceTrack:e.mediaStreamTrack},a=e._dummyEl,s=o(),c=null;function u(){return a.play().then(function(){return i(a)}).then(function(w){return w?r.warn("Silence detected"):r.info("Non-silence detected"),w}).catch(function(w){r.warn("Failed to detect silence:",w)}).finally(function(){e.processedTrack||a.pause()})}function l(){var w=e._workaroundWebKitBug1208516Cleanup,y=e.isStopped,p=y&&!!w,h=o().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!c&&(h||p||u())})}function d(){return Promise.race([J1(s,"unmute"),Y1(50)]).then(function(){return l()}).then(function(w){w&&!c&&(c=G1(),e._restart().finally(function(){a=e._dummyEl,v(),s=o(),g(),c.resolve(),c=null}).catch(function(p){r.error("failed to restart track: ",p)}));var y=c&&c.promise||Promise.resolve();return y.finally(function(){return Bp.resolveDeferred(t)})}).catch(function(w){r.error("error in maybeRestart: "+w.message)})}function f(){var w=e._log,y=e.kind;w.info("Muted"),w.debug("LocalMediaTrack:",e),Bp.startDeferred(y)}function g(){s.addEventListener("ended",d),s.addEventListener("mute",f),s.addEventListener("unmute",d)}function v(){s.removeEventListener("ended",d),s.removeEventListener("mute",f),s.removeEventListener("unmute",d)}var _=function(w){return w?d():!1};return Vp.onVisibilityChange(1,_),g(),function(){Vp.offVisibilityChange(1,_),v()}}var Zg=nR,iR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oR=zr.isIOS,aR=Ug,sR=ie.isIOSChrome,cR=Hg,uR=Zg,lR=uR(cR),dR=function(e){iR(r,e);function r(t,n){var i=this,o=(n==null?void 0:n.noiseCancellation)||null;i=e.call(this,t,n)||this;var a=i._log,s=t.label,c=s===void 0?"":s,u=t.getSettings(),l=u.deviceId,d=l===void 0?"":l,f=u.groupId,g=f===void 0?"":f;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:g,label:c},writable:!0},_defaultDeviceCaptureMode:{value:!oR()&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&typeof navigator.mediaDevices.enumerateDevices=="function"?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){navigator.mediaDevices.enumerateDevices().then(function(v){var _=v.find(function(w){var y=w.deviceId,p=w.kind;return p==="audioinput"&&y!=="default"});_&&["deviceId","groupId"].some(function(w){return _[w]!==i._currentDefaultDeviceInfo[w]})&&(a.info("Default device changed, restarting the LocalAudioTrack"),a.debug('Old default device: "'+i._currentDefaultDeviceInfo.deviceId+'" => "'+i._currentDefaultDeviceInfo.label+'"'),a.debug('New default device: "'+_.deviceId+'" => "'+_.label+'"'),i._currentDefaultDeviceInfo=_,i._restartDefaultDevice().catch(function(w){return a.warn("Failed to restart: "+w.message)}))},function(v){a.warn("Failed to run enumerateDevices(): "+v.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:o,writable:!1}}),a.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return r.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},r.prototype.attach=function(t){return t=e.prototype.attach.call(this,t),t.muted=!0,t},r.prototype._end=function(){return e.prototype._end.apply(this,arguments)},r.prototype._maybeRestartOnDefaultDeviceChange=function(){var t=this,n=this,i=n._constraints,o=n._defaultDeviceCaptureMode,a=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,c=s.getSettings().deviceId,u=function(d){return d!==c||d==="default"},l=function d(f){return f===void 0&&(f={}),typeof f=="string"?u(f):Array.isArray(f)?f.every(u):f.exact?d(f.exact):f.ideal?d(f.ideal):!0}(i.deviceId);o==="auto"&&l?this._restartOnDefaultDeviceChangeCleanup||(a.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){a.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",t._onDeviceChange),t._restartOnDefaultDeviceChangeCleanup=null}):(a.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},r.prototype._reacquireTrack=function(t){var n=this;return this._log.debug("_reacquireTrack: ",t),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return e.prototype._reacquireTrack.call(n,t)}):e.prototype._reacquireTrack.call(this,t)},r.prototype._restartDefaultDevice=function(){var t=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){t._constraints=n,t._maybeRestartOnDefaultDeviceChange()})},r.prototype._setMediaStreamTrack=function(t){var n=this,i=this,o=i._log,a=i.noiseCancellation,s=e.prototype._setMediaStreamTrack.call(this,t);return sR()&&a&&(o.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return aR(n._dummyEl)}).then(function(c){return o.debug("Krisp audio is "+(c?"silent, using source audio":"not silent")),c&&a.disablePermanently().then(function(){return e.prototype._setMediaStreamTrack.call(n,a.sourceTrack)})})),s},r.prototype.disable=function(){return e.prototype.disable.apply(this,arguments)},r.prototype.enable=function(){return e.prototype.enable.apply(this,arguments)},r.prototype.restart=function(){return e.prototype.restart.apply(this,arguments)},r.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),e.prototype.stop.apply(this,arguments)},r}(lR),fR=dR,pR=fd,Xg=fR;function vd(e,r){var t=new Xg(e,r);return Object.setPrototypeOf(t,vd.prototype),t}pR(vd,Xg);var hR=vd,vR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mR=Ne.EventEmitter,yR=se.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,gR=function(e){vR(r,e);function r(t){var n=e.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:t},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return r.prototype._getEventData=function(){if(!this._processorInfo)return{};var t=this._processorInfo,n=t.processor,i=t.captureHeight,o=t.captureWidth,a=t.inputFrameRate,s=t.isRemoteVideoTrack,c=t.inputFrameBufferType,u=t.outputFrameBufferContextType,l={captureHeight:i,captureWidth:o,inputFrameRate:a,isRemoteVideoTrack:s,inputFrameBufferType:c,outputFrameBufferContextType:u};return l.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var f=n["_"+d];typeof f<"u"&&(l[d]=f)}),Object.keys(l).forEach(function(d){var f=l[d];typeof f=="boolean"&&(l[d]=f?"true":"false")}),l},r.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var t=this._processorInfo.processor._benchmark;if(t){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:t.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=t.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<yR)){this._lastStatsPublishTime=n;var o=this._stats.splice(0),a=o.reduce(function(s,c,u){return Object.keys(i).forEach(function(l){s[l]||(s[l]=0),s[l]=(s[l]*u+c[l])/(u+1)}),s},{});Object.keys(a).forEach(function(s){a[s]=parseFloat(a[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},a,this._getEventData()))}}}}},r.prototype._reemitEvent=function(t,n){this._log.debug("VideoProcessor:"+t,n),this.emit("event",{name:t,data:n})},r}(mR),_R=gR,wR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),SR=Wg,kR=_R,Wp=se.DEFAULT_FRAME_RATE,e_=function(e){wR(r,e);function r(t,n){var i=e.call(this,t,n)||this;return Object.defineProperties(i,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||kR)(i._log),i}return r.prototype._checkIfCanCaptureFrames=function(t){t===void 0&&(t=!1);var n=!0,i="",o=this.mediaStreamTrack,a=o.enabled,s=o.readyState;return a||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!t&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},r.prototype._captureFrames=function(){var t=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=Date.now(),i;this._dummyEl.play().then(function(){var o=function(s){clearTimeout(t._captureTimeoutId);var c=t.mediaStreamTrack.getSettings().frameRate,u=c===void 0?Wp:c,l=Math.floor(1e3/u),d=l-i;(d<0||typeof i!="number")&&(d=0),t._captureTimeoutId=setTimeout(s,d)},a=function(){var s=t._checkIfCanCaptureFrames();if(!s.canCaptureFrames){t._isCapturing=!1,t._processorEventObserver.emit("stop",s.message),t._log.debug("Cannot capture frames. Stopping capturing frames.");return}n=Date.now();var c=t.mediaStreamTrack.getSettings(),u=c.width,l=u===void 0?0:u,d=c.height,f=d===void 0?0:d;t._outputFrame&&t._outputFrame.width!==l&&(t._outputFrame.width=l,t._outputFrame.height=f),t._inputFrame&&(t._inputFrame.width!==l&&(t._inputFrame.width=l,t._inputFrame.height=f),t._inputFrame.getContext("2d").drawImage(t._dummyEl,0,0,l,f));var g=null;try{var v=t._processorOptions.inputFrameBufferType==="video"?t._dummyEl:t._inputFrame;g=t.processor.processFrame(v,t._outputFrame)}catch(_){t._log.debug("Exception detected after calling processFrame.",_)}(g instanceof Promise?g:Promise.resolve(g)).then(function(){t._outputFrame&&(typeof t.processedTrack.requestFrame=="function"&&t.processedTrack.requestFrame(),t._processorEventObserver.emit("stats"))}).finally(function(){i=Date.now()-n,o(a)})};o(a)}).catch(function(o){return t._log.error("Video element cannot be played",{error:o,track:t})})},r.prototype._initialize=function(){var t=this;e.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){Hp(t,t._dummyEl)&&(t.dimensions.width=t._dummyEl.videoWidth,t.dimensions.height=t._dummyEl.videoHeight)},this._dummyEl.onresize=function(){Hp(t,t._dummyEl)&&(t.dimensions.width=t._dummyEl.videoWidth,t.dimensions.height=t._dummyEl.videoHeight,t.isStarted&&(t._log.debug("Dimensions changed:",t.dimensions),t.emit(r.DIMENSIONS_CHANGED,t)))})},r.prototype._restartProcessor=function(){var t=this.processor;if(t){var n=Object.assign({},this._processorOptions);this.removeProcessor(t),this.addProcessor(t,n)}},r.prototype._start=function(t){return this.dimensions.width=t.videoWidth,this.dimensions.height=t.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(r.DIMENSIONS_CHANGED,this),e.prototype._start.call(this,t)},r.prototype.addProcessor=function(t,n){var i=this;if(!t||typeof t.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",t),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler)),this._processorOptions=n||{};var o=this._processorOptions,a=o.inputFrameBufferType,s=o.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&a==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(a&&a!=="video"&&a!=="canvas"&&a!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of "+a);a||(a=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var c=this.mediaStreamTrack.getSettings(),u=c.width,l=u===void 0?0:u,d=c.height,f=d===void 0?0:d,g=c.frameRate,v=g===void 0?Wp:g;a==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(l,f)),a==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=l,this._inputFrame.height=f),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=l,this._outputFrame.height=f,s=s||"2d";var _=this._outputFrame.getContext(s);if(!_)throw new Error("Cannot get outputFrameBufferContextType: "+s+".");var w=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(w).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=t,this._processorEventObserver.emit("add",{processor:t,captureHeight:f,captureWidth:l,inputFrameRate:v,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:a,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},r.prototype.attach=function(){var t=e.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),t},r.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},r.prototype.removeProcessor=function(t){if(!t)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(t!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",t),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},r}(SR);e_.DIMENSIONS_CHANGED="dimensionsChanged";function Hp(e,r){return e.dimensions.width!==r.videoWidth||e.dimensions.height!==r.videoHeight}var t_=e_,TR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bR=zr.isIOS,ER=Qg,CR=Zg,PR=t_,OR=CR(PR),RR=function(e){TR(r,e);function r(t,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:bR()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=e.call(this,t,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?xR:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return r.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},r.prototype._checkIfCanCaptureFrames=function(){return e.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},r.prototype._end=function(){return e.prototype._end.apply(this,arguments)},r.prototype._setSenderMediaStreamTrack=function(t){var n=this,i=this.mediaStreamTrack,o=t?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(o).catch(function(a){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:a,mediaStreamTrack:o})}).then(function(){n._unprocessedTrack=t?i:null})},r.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var t=e.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),t):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},r.prototype.removeProcessor=function(){var t=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=e.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return t._updateElementsMediaStreamTrack()}),n},r.prototype.disable=function(){var t=e.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),t},r.prototype.enable=function(t){t===void 0&&(t=!0);var n=e.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=t,t&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},r.prototype.restart=function(){var t=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=e.prototype.restart.apply(this,arguments);return this.processor&&n.then(function(){t._restartProcessor()}),this._workaroundSilentLocalVideo&&n.finally(function(){t._workaroundSilentLocalVideoCleanup=t._workaroundSilentLocalVideo(t,document)}),n},r.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),e.prototype.stop.apply(this,arguments)},r}(OR);function xR(e,r){var t=e._log,n=e._dummyEl,i=e.mediaStreamTrack;function o(){e.isEnabled&&(t.info("Unmuted, checking silence"),n.play().then(function(){return ER(n)}).then(function(a){if(!a){t.info("Non-silent frames detected, so no need to restart");return}return t.warn("Silence detected, restarting"),e._stop(),e._restart()}).catch(function(a){t.warn("Failed to detect silence and restart:",a)}).finally(function(){n=e._dummyEl,n&&!n.paused&&!e.processedTrack&&n.pause(),i.removeEventListener("unmute",o),i=e.mediaStreamTrack,i.addEventListener("unmute",o)}))}return i.addEventListener("unmute",o),function(){i.removeEventListener("unmute",o)}}var LR=RR,jR=fd,r_=LR;function md(e,r){var t=new r_(e,r);return Object.setPrototypeOf(t,md.prototype),t}jR(md,r_);var AR=md,DR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),IR=Gg,MR=function(e){DR(r,e);function r(t,n,i,o){var a=e.call(this,t,"data")||this;return Object.defineProperties(a,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:o}}),a}return r}(IR),n_=MR,NR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$R=n_,FR=U.makeUUID,UR=function(e){NR(r,e);function r(t,n,i){var o=e.call(this,FR(),t,n,i)||this;return Object.defineProperties(o,{_clones:{value:new Set},_dataChannels:{value:new Set}}),o}return r.prototype._addClone=function(t){this._clones.add(t)},r.prototype.removeClone=function(t){this._clones.delete(t)},r.prototype.addDataChannel=function(t){return this._dataChannels.add(t),this},r.prototype.clone=function(){var t=this,n=new r(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return t.removeClone(n)}),n},r.prototype.removeDataChannel=function(t){return this._dataChannels.delete(t),this},r.prototype.send=function(t){return this._dataChannels.forEach(function(n){try{n.send(t)}catch{}}),this._clones.forEach(function(n){try{n.send(t)}catch{}}),this},r.prototype.stop=function(){this._dataChannels.forEach(function(t){return t.close()}),this._clones.forEach(function(t){return t.stop()}),e.prototype.stop.call(this)},r}($R),VR=UR,BR=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zR=pd,WR=VR,HR=function(e){BR(r,e);function r(t){var n=this;t=Object.assign({DataTrackSender:WR,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},t);var i=t.DataTrackSender,o=new i(t.maxPacketLifeTime,t.maxRetransmits,t.ordered);return n=e.call(this,o.id,"data",t)||this,Object.defineProperties(n,{_trackSender:{value:o},id:{enumerable:!0,value:o.id},maxPacketLifeTime:{enumerable:!0,value:t.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:t.maxRetransmits},ordered:{enumerable:!0,value:t.ordered},reliable:{enumerable:!0,value:t.maxPacketLifeTime===null&&t.maxRetransmits===null}}),n}return r.prototype.send=function(t){this._trackSender.send(t)},r}(zR),QR=HR,qR=fd,i_=QR;function yd(e){var r=new i_(e);return Object.setPrototypeOf(r,yd.prototype),r}qR(yd,i_);var KR=yd,wn={LocalAudioTrack:hR,LocalVideoTrack:AR,LocalDataTrack:KR},_t=m&&m.__assign||function(){return _t=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_t.apply(this,arguments)},Qp=m&&m.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},qp=m&&m.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Kp=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Gp=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(is,"__esModule",{value:!0});is.createLocalTracks=void 0;var GR=On,YR=U.buildLogLevels,o_=Br,JR=o_.getUserMedia,ZR=o_.MediaStreamTrack,gd=wn,XR=gd.LocalAudioTrack,ex=gd.LocalDataTrack,tx=gd.LocalVideoTrack,rx=Ut,_d=se,nx=_d.DEFAULT_LOG_LEVEL,ix=_d.DEFAULT_LOGGER_NAME,ox=_d.typeErrors.INVALID_VALUE,ax=qg,sx=0;function cx(e){return Qp(this,void 0,void 0,function(){var r,t,n,i,o,a,s,c,u,l,d,f,g,v=this;return qp(this,function(_){switch(_.label){case 0:if(r=!(e&&("audio"in e||"video"in e)),t=_t({audio:r,getUserMedia:JR,loggerName:ix,logLevel:nx,LocalAudioTrack:XR,LocalDataTrack:ex,LocalVideoTrack:tx,MediaStreamTrack:ZR,Log:rx,video:r},e),n="[createLocalTracks #"+ ++sx+"]",i=YR(t.logLevel),o=new t.Log("default",n,i,t.loggerName),a=Object.assign({log:o},t),delete a.name,t.audio===!1&&t.video===!1)return o.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(t.tracks)return o.info("Adding user-provided LocalTracks"),o.debug("LocalTracks:",t.tracks),[2,t.tracks];if(s={audio:typeof t.audio=="object"&&t.audio.name?{name:t.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof t.video=="object"&&t.video.name?{name:t.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof t.audio=="object")if(typeof t.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=t.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in t.audio&&(c=t.audio.noiseCancellationOptions,delete t.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in t.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(w){return w!==t.audio.defaultDeviceCaptureMode}))throw ox("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=t.audio.defaultDeviceCaptureMode}typeof t.video=="object"&&typeof t.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=t.video.workaroundWebKitBug1208516),typeof t.audio=="object"&&delete t.audio.name,typeof t.video=="object"&&delete t.video.name,u={audio:t.audio,video:t.video},l=typeof t.audio=="object"&&t.audio.workaroundWebKitBug180748,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,l?ax(o,t.getUserMedia,u):t.getUserMedia(u)];case 2:return d=_.sent(),f=Gp(Gp([],Kp(d.getAudioTracks())),Kp(d.getVideoTracks())),o.info("Call to getUserMedia successful; got tracks:",f),[4,Promise.all(f.map(function(w){return Qp(v,void 0,void 0,function(){var y,p,h;return qp(this,function(S){switch(S.label){case 0:return w.kind==="audio"&&c?[4,GR.applyNoiseCancellation(w,c,o)]:[3,2];case 1:return y=S.sent(),p=y.cleanTrack,h=y.noiseCancellation,[2,new a.LocalAudioTrack(p,_t(_t(_t({},s.audio),a),{noiseCancellation:h}))];case 2:if(w.kind==="audio")return[2,new a.LocalAudioTrack(w,_t(_t({},s.audio),a))];S.label=3;case 3:return[2,new a.LocalVideoTrack(w,_t(_t({},s.video),a))]}})})}))];case 3:return[2,_.sent()];case 4:throw g=_.sent(),o.warn("Call to getUserMedia failed:",g),g;case 5:return[2]}})})}is.createLocalTracks=cx;var Rn={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.Timer=void 0;var ux=function(){function e(){this._end=void 0,this.start()}return e.prototype.start=function(){return this._start=Date.now(),this},e.prototype.stop=function(){return this._end=Date.now(),this},e.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},e}();fs.Timer=ux;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.mosToScore=xn.calculateMOS=void 0;var Yp=94.768;function lx(e,r,t){var n=e+r*2+10,i=0;switch(!0){case n<160:i=Yp-n/40;break;case n<1e3:i=Yp-(n-120)/10;break}switch(!0){case t<=i/2.5:i=Math.max(i-t*2.5,6.52);break;default:i=0;break}var o=1+.035*i+7e-6*i*(i-60)*(100-i);return o}xn.calculateMOS=lx;function dx(e){var r=0;return e?e>4.2?r=5:e>4?r=4:e>3.6?r=3:e>3?r=2:r=1:r=0,r}xn.mosToScore=dx;var ps={},fx=m&&m.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},px=m&&m.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hx=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(ps,"__esModule",{value:!0});ps.getCombinedConnectionStats=void 0;function Ht(e,r,t,n){var i=[];return e.forEach(function(o){(n.length===0||n.includes(o.type))&&(t.length===0||t.includes(o.kind))&&typeof o[r]=="number"&&i.push(o[r])}),i}function vx(e){var r=e.publisher,t=e.subscriber;return fx(this,void 0,void 0,function(){var n,i,o,a,s,c,u,l,d,f,g,v,_,w,y;return px(this,function(p){switch(p.label){case 0:return[4,Promise.all([r,t].map(function(h){return h.getStats()}))];case 1:return n=hx.apply(void 0,[p.sent(),2]),i=n[0],o=n[1],a=Ht(o,"timestamp",["audio"],["inbound-rtp"]),s=a.length>0?a[0]:0,c=Ht(o,"jitter",["audio"],["inbound-rtp"]).reduce(function(h,S){return Math.max(h,S)},0),u=Ht(o,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(h,S){return h+S},0),l=Ht(o,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(h,S){return h+S},0),d=Ht(i,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(h,S){return Math.max(h,S)},0),f=Ht(o,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(h,S){return Math.max(h,S)},0),g=(f||d)*1e3,v=Ht(i,"bytesSent",[],["candidate-pair"]).reduce(function(h,S){return h+S},0),_=Ht(o,"bytesReceived",[],["candidate-pair"]).reduce(function(h,S){return h+S},0),w=mx(o),y=[],o.forEach(function(h){(h.type==="local-candidate"||h.type==="remote-candidate")&&y.push(Bu(h))}),[2,{timestamp:s,jitter:c,packets:u,packetsLost:l,roundTripTime:g,bytesSent:v,bytesReceived:_,selectedIceCandidatePairStats:w,iceCandidateStats:y}]}})})}ps.getCombinedConnectionStats=vx;function Bu(e){var r=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return r.reduce(function(t,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var o=i.find(function(a){return a in e});return o&&typeof e[o]===n.type&&(t[n.key]=e[o]),t},{})}function mx(e){var r=null,t=[];e.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?r=s.selectedCandidatePairId:s.type==="candidate-pair"&&t.push(s)});var n=t.find(function(s){return s.selected||r&&s.id===r});if(!n)return null;var i=n,o=e.get(i.localCandidateId),a=e.get(i.remoteCandidateId);return!o||!a?null:{localCandidate:Bu(o),remoteCandidate:Bu(a)}}var hs={},yx=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gx=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},_x=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},wx=Ne.EventEmitter,a_=U,Sx=function(e){yx(r,e);function r(t,n){var i=e.call(this)||this,o=null,a=t;return n=bx(n),Object.defineProperties(i,{_lock:{get:function(){return o},set:function(s){o=s}},_reachableStates:{value:Tx(n)},_state:{get:function(){return a},set:function(s){a=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return o!==null}},state:{enumerable:!0,get:function(){return a}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(c){c.when(s,c.resolve,c.reject)})}),i}return r.prototype._whenPromise=function(t){var n=this;if(typeof t!="function")return Promise.reject(new Error("when() executor must be a function"));var i=a_.defer();return i.when=t,this._whenDeferreds.add(i),i.promise.then(function(o){return n._whenDeferreds.delete(i),o},function(o){throw n._whenDeferreds.delete(i),o})},r.prototype.bracket=function(t,n){var i,o=this;function a(s){if(o.hasLock(i)&&o.releaseLockCompletely(i),s)throw s}return this.takeLock(t).then(function(c){return i=c,n(i)}).then(function(c){return a(),c},a)},r.prototype.hasLock=function(t){return this._lock===t},r.prototype.preempt=function(t,n,i){if(!bo(this._states,this.state,t))throw new Error('Cannot transition from "'+this.state+'" to "'+t+'"');var o;this.isLocked&&(o=this._lock,this._lock=null);var a=null;n&&(a=this.takeLockSync(n));var s=a?null:this.takeLockSync("preemption");return this.transition(t,a||s,i),o&&o.resolve(),s&&this.releaseLock(s),a},r.prototype.releaseLock=function(t){if(this.isLocked){if(!this.hasLock(t))throw new Error("Could not release the lock for "+t.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+t.name+" because the StateMachine is not locked");t.depth===0?(this._lock=null,t.resolve()):t.depth--},r.prototype.releaseLockCompletely=function(t){if(this.isLocked){if(!this.hasLock(t))throw new Error("Could not release the lock for "+t.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+t.name+" because the StateMachine is not locked");t.depth=0,this._lock=null,t.resolve()},r.prototype.takeLock=function(t){var n=this;if(typeof t=="object"){var i=t;return new Promise(function(s){s(n.takeLockSync(i))})}var o=t;if(this.isLocked){var a=this.takeLock.bind(this,o);return this._lock.promise.then(a)}return Promise.resolve(this.takeLockSync(o))},r.prototype.takeLockSync=function(t){var n=typeof t=="string"?null:t,i=n?n.name:t;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for "+i+" because the lock for "+this._lock.name+" was not released");if(n)return n.depth++,n;var o=kx(i);return this._lock=o,o},r.prototype.transition=function(t,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for "+n.name+" because "+this._lock.name+" has the lock")}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for "+n.name+", but the StateMachine was not locked (possibly due to preemption)");if(!bo(this._states,this.state,t))throw new Error('Cannot transition from "'+this.state+'" to "'+t+'"');this._state=t,this.emit.apply(this,_x([],gx(["stateChanged",t].concat(i))))},r.prototype.tryTransition=function(t,n,i){try{this.transition(t,n,i)}catch{return!1}return!0},r.prototype.when=function(t){var n=this;return this.state===t?Promise.resolve(this):bo(this._reachableStates,this.state,t)?this._whenPromise(function(i,o,a){i===t?o(n):bo(n._reachableStates,i,t)||a(Jp(i,t))}):Promise.reject(Jp(this.state,t))},r}(wx);function bo(e,r,t){return e.get(r).has(t)}function kx(e){var r=a_.defer();return r.name=e,r.depth=0,r}function Tx(e){return Array.from(e.keys()).reduce(function(r,t){return r.set(t,s_(e,t))},new Map)}function s_(e,r,t){return t=t||new Set,e.get(r).forEach(function(n){t.has(n)||(t.add(n),s_(e,n,t).forEach(t.add,t))}),t}function bx(e){var r=new Map;for(var t in e)r.set(t,new Set(e[t]));return r}function Jp(e,r){return new Error('"'+r+'" cannot be reached from "'+e+'"')}var $n=Sx,Ex=function(){function e(r,t){var n=this;t=Object.assign({navigator,window},t);var i=t.navigator,o=i.connection||{type:null},a=o.type,s=o.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=a!==n.type&&n.isOnline;a=n.type,d&&r()}},_target:{value:o}}:{_events:{value:["online"]},_listener:{value:r},_target:{value:t.window}},c=s._events,u=s._listener,l=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return o.type||null}},_listener:u,_events:c,_target:l})}return e.prototype.start=function(){var r=this;this._events.forEach(function(t){r._target.addEventListener(t,r._listener)})},e.prototype.stop=function(){var r=this;this._events.forEach(function(t){r._target.removeEventListener(t,r._listener)})},e}(),Cx=Ex,Px=function(){function e(r,t,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:t,writable:!0},_fn:{value:r},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),e.prototype.setDelay=function(r){this._delay=r},e.prototype.start=function(){var r=this;this.isSet||(this._timeout=setTimeout(function(){var t=r._fn;r.clear(),t()},this._delay))},e.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},e.prototype.reset=function(){this.clear(),this.start()},e}(),Wr=Px,fc,Zp;function c_(){return Zp||(Zp=1,fc=WebSocket),fc}var Ox=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xp=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Rx=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},xx=$n,u_=U,Lx=u_.buildLogLevels,jx=u_.makeUUID,Ax=Ut,Dx=Cx,qr=Wr,Ix=0,Mx={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},eh={closed:"close",open:"open",waiting:"waiting"},Nx=2,$x=3,Fx=3,Ux=5e3,Vx=15e3,Bx=5e3,zx=200,th=1e3,zu=3e3,Wu=3001,Hu=3002,Qu=3003,l_=3004,Eo=3005,qu=3006,d_=3007,rh=globalThis,Wx=rh.WebSocket?rh.WebSocket:c_(),lt={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},Hx=new Map([[zu,lt.TIMEOUT],[Wu,lt.TIMEOUT],[Hu,lt.FAILED],[Qu,lt.FAILED],[l_,lt.TIMEOUT],[qu,lt.BUSY],[d_,lt.TIMEOUT]]),f_=function(e){Ox(r,e);function r(t,n){var i=e.call(this,"early",Mx)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:Fx,maxConsecutiveMissedHeartbeats:$x,requestedHeartbeatTimeout:Ux,openTimeout:Vx,welcomeTimeout:Bx,Log:Ax,WebSocket:Wx},n);var o=Lx(n.logLevel),a=new n.Log("default",i,o,n.loggerName),s=n.networkMonitor?new Dx(function(){var u=s.type,l="Network changed"+(u?" to "+u:"");a.debug(l),i._close({code:l_,reason:l})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++Ix},_log:{value:a},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:t},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var c={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(u){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];u in eh&&i.emit.apply(i,Rx([eh[u]],Xp(l)));var f={name:u,group:"signaling",level:c[i.state]};if(u==="closed"){var g=Xp(l,1),v=g[0];f.payload={reason:v},f.level=v===lt.LOCAL?"info":"error"}i._eventObserver.emit("event",f)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:c[i.state]}),i._connect(),i}return r.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},r.prototype._close=function(t){var n=t.code,i=t.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==Eo&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var o=this._log;n===th?(o.debug("Closed"),this.transition("closed",null,[lt.LOCAL])):(o.warn("Closed: "+n+" - "+i),n!==Eo&&this.transition("closed",null,[Hx.get(n)||lt.REMOTE]));var a=this._ws.readyState,s=this._options.WebSocket;a!==s.CLOSING&&a!==s.CLOSED&&this._ws.close(n,i)}},r.prototype._connect=function(){var t=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(a){return t._close(a)});var o=this._options.openTimeout;this._openTimeout=new qr(function(){var a="Failed to open in "+o+" ms";t._close({code:d_,reason:a})},o),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),t._openTimeout.clear(),t._startHandshake(),t._networkMonitor&&t._networkMonitor.start()}),i.addEventListener("message",function(a){n.debug("Incoming: "+a.data);try{a=JSON.parse(a.data)}catch(s){t.emit("error",s);return}switch(a.type){case"bad":t._handleBad(a);break;case"busy":t._handleBusy(a);break;case"bye":break;case"msg":t._handleMessage(a);case"heartbeat":t._handleHeartbeat();break;case"welcome":t._handleWelcome(a);break;default:t._log.debug("Unknown message type: "+a.type),t.emit("error",new Error("Unknown message type: "+a.type));break}})},r.prototype._handleBad=function(t){var n=t.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.');return}if(this.state==="connecting"){i.warn("Closing: "+Hu+" - "+n),this._close({code:Hu,reason:n});return}i.debug("Error: "+n),this.emit("error",new Error(n))},r.prototype._handleBusy=function(t){var n=this,i=t.cookie,o=t.keepAlive,a=t.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.');return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var c=a<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+a+" ms";if(a<0){s.warn("Closing: "+qu+" - "+c),this._close({code:qu,reason:c});return}var u=this._options.maxConsecutiveFailedHellos;this._hellosLeft=u,this._cookie=i||null,o?(s.warn(c),this._busyWaitTimeout=new qr(function(){return n._startHandshake()},a)):(s.warn("Closing: "+Eo+" - "+c),this._close({code:Eo,reason:c}),this._busyWaitTimeout=new qr(function(){return n._connect()},a)),this.transition("waiting",null,[o,a])},r.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.');return}this._heartbeatTimeout.reset()},r.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var t=this._log,n=this._options.maxConsecutiveMissedHeartbeats;t.debug("Consecutive heartbeats missed: "+n);var i="Missed "+n+' "heartbeat" messages';t.warn("Closing: "+Wu+" - "+i),this._close({code:Wu,reason:i})}},r.prototype._handleMessage=function(t){var n=t.body;if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.');return}this.emit("message",n)},r.prototype._handleWelcome=function(t){var n=this,i=t.negotiatedTimeout,o=this._log;if(!["connecting","waiting"].includes(this.state)){o.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.');return}this.state==="waiting"&&(o.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var a=this._options.maxConsecutiveMissedHeartbeats,s=i*a,c=i-zx;this._welcomeTimeout.clear(),this._heartbeatTimeout=new qr(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(u){return n._send(u)}),this._sendHeartbeatTimeout=new qr(function(){return n._sendHeartbeat()},c),this.transition("open")},r.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var t=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";t.warn("Closing: "+zu+" - "+n),this._close({code:zu,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;t.warn("Handshake attempt "+(i-this._hellosLeft)+" failed"),this._startHandshake()}},r.prototype._send=function(t){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var o=JSON.stringify(t);this._log.debug("Outgoing: "+o);try{this._ws.send(o),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var a="Failed to send message";this._log.warn("Closing: "+Qu+" - "+a),this._close({code:Qu,reason:a})}}},r.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},r.prototype._sendHello=function(){var t=this._options,n=t.helloBody,i=t.requestedHeartbeatTimeout,o={id:jx(),timeout:i,type:"hello",version:Nx};this._cookie&&(o.cookie=this._cookie),n&&(o.body=n),this._send(o)},r.prototype._sendOrEnqueue=function(t){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(o){return n._send(o)}:function(o){return n._messageQueue.push(o)};i(t)}},r.prototype._startHandshake=function(){var t=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new qr(function(){return t._handleWelcomeTimeout()},n)}},r.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:th,reason:"Normal"}))},r.prototype.sendMessage=function(t){this._sendOrEnqueue({body:t,type:"msg"})},r}(xx);f_.CloseReason=lt;var p_=f_,V={},Qx=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qx=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Kx=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},Gx=function(e){Qx(r,e);function r(t){var n=this,i=[].slice.call(arguments,1);n=e.apply(this,Kx([],qx(i)))||this,Object.setPrototypeOf(n,r.prototype);var o=Error.apply(n,i);return o.name="TwilioError",Object.defineProperty(n,"code",{value:t,enumerable:!0}),Object.getOwnPropertyNames(o).forEach(function(a){Object.defineProperty(this,a,{value:o[a],enumerable:!0})},n),n}return r.prototype.toString=function(){var t=this.message?": "+this.message:"";return this.name+" "+this.code+t},r}(Error),Yx=Gx,H=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),W=Yx,z={};V.createTwilioError=function(r,t){return r=typeof r=="number"?r:0,t=typeof t=="string"&&t?t:"Unknown error",z[r]?new z[r]:new W(r,t)};var h_=function(e){H(r,e);function r(){var t=e.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenInvalidError=h_;Object.defineProperty(z,20101,{value:h_});var v_=function(e){H(r,e);function r(){var t=e.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenHeaderInvalidError=v_;Object.defineProperty(z,20102,{value:v_});var m_=function(e){H(r,e);function r(){var t=e.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenIssuerInvalidError=m_;Object.defineProperty(z,20103,{value:m_});var y_=function(e){H(r,e);function r(){var t=e.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenExpiredError=y_;Object.defineProperty(z,20104,{value:y_});var g_=function(e){H(r,e);function r(){var t=e.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenNotYetValidError=g_;Object.defineProperty(z,20105,{value:g_});var __=function(e){H(r,e);function r(){var t=e.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenGrantsInvalidError=__;Object.defineProperty(z,20106,{value:__});var w_=function(e){H(r,e);function r(){var t=e.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.AccessTokenSignatureInvalidError=w_;Object.defineProperty(z,20107,{value:w_});var S_=function(e){H(r,e);function r(){var t=e.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingConnectionError=S_;Object.defineProperty(z,53e3,{value:S_});var k_=function(e){H(r,e);function r(){var t=e.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingConnectionDisconnectedError=k_;Object.defineProperty(z,53001,{value:k_});var T_=function(e){H(r,e);function r(){var t=e.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingConnectionTimeoutError=T_;Object.defineProperty(z,53002,{value:T_});var b_=function(e){H(r,e);function r(){var t=e.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingIncomingMessageInvalidError=b_;Object.defineProperty(z,53003,{value:b_});var E_=function(e){H(r,e);function r(){var t=e.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingOutgoingMessageInvalidError=E_;Object.defineProperty(z,53004,{value:E_});var C_=function(e){H(r,e);function r(){var t=e.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.SignalingServerBusyError=C_;Object.defineProperty(z,53006,{value:C_});var P_=function(e){H(r,e);function r(){var t=e.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomNameInvalidError=P_;Object.defineProperty(z,53100,{value:P_});var O_=function(e){H(r,e);function r(){var t=e.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomNameTooLongError=O_;Object.defineProperty(z,53101,{value:O_});var R_=function(e){H(r,e);function r(){var t=e.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomNameCharsInvalidError=R_;Object.defineProperty(z,53102,{value:R_});var x_=function(e){H(r,e);function r(){var t=e.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomCreateFailedError=x_;Object.defineProperty(z,53103,{value:x_});var L_=function(e){H(r,e);function r(){var t=e.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomConnectFailedError=L_;Object.defineProperty(z,53104,{value:L_});var j_=function(e){H(r,e);function r(){var t=e.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomMaxParticipantsExceededError=j_;Object.defineProperty(z,53105,{value:j_});var A_=function(e){H(r,e);function r(){var t=e.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomNotFoundError=A_;Object.defineProperty(z,53106,{value:A_});var D_=function(e){H(r,e);function r(){var t=e.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomMaxParticipantsOutOfRangeError=D_;Object.defineProperty(z,53107,{value:D_});var I_=function(e){H(r,e);function r(){var t=e.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomTypeInvalidError=I_;Object.defineProperty(z,53108,{value:I_});var M_=function(e){H(r,e);function r(){var t=e.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomTimeoutOutOfRangeError=M_;Object.defineProperty(z,53109,{value:M_});var N_=function(e){H(r,e);function r(){var t=e.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomStatusCallbackMethodInvalidError=N_;Object.defineProperty(z,53110,{value:N_});var $_=function(e){H(r,e);function r(){var t=e.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomStatusCallbackInvalidError=$_;Object.defineProperty(z,53111,{value:$_});var F_=function(e){H(r,e);function r(){var t=e.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomStatusInvalidError=F_;Object.defineProperty(z,53112,{value:F_});var U_=function(e){H(r,e);function r(){var t=e.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomRoomExistsError=U_;Object.defineProperty(z,53113,{value:U_});var V_=function(e){H(r,e);function r(){var t=e.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomInvalidParametersError=V_;Object.defineProperty(z,53114,{value:V_});var B_=function(e){H(r,e);function r(){var t=e.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomMediaRegionInvalidError=B_;Object.defineProperty(z,53115,{value:B_});var z_=function(e){H(r,e);function r(){var t=e.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomMediaRegionUnavailableError=z_;Object.defineProperty(z,53116,{value:z_});var W_=function(e){H(r,e);function r(){var t=e.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomSubscriptionOperationNotSupportedError=W_;Object.defineProperty(z,53117,{value:W_});var H_=function(e){H(r,e);function r(){var t=e.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomCompletedError=H_;Object.defineProperty(z,53118,{value:H_});var Q_=function(e){H(r,e);function r(){var t=e.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomAudioOnlyFlagNotSupportedError=Q_;Object.defineProperty(z,53124,{value:Q_});var q_=function(e){H(r,e);function r(){var t=e.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.RoomTrackKindNotSupportedError=q_;Object.defineProperty(z,53125,{value:q_});var K_=function(e){H(r,e);function r(){var t=e.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantIdentityInvalidError=K_;Object.defineProperty(z,53200,{value:K_});var G_=function(e){H(r,e);function r(){var t=e.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantIdentityTooLongError=G_;Object.defineProperty(z,53201,{value:G_});var Y_=function(e){H(r,e);function r(){var t=e.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantIdentityCharsInvalidError=Y_;Object.defineProperty(z,53202,{value:Y_});var J_=function(e){H(r,e);function r(){var t=e.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantMaxTracksExceededError=J_;Object.defineProperty(z,53203,{value:J_});var Z_=function(e){H(r,e);function r(){var t=e.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantNotFoundError=Z_;Object.defineProperty(z,53204,{value:Z_});var X_=function(e){H(r,e);function r(){var t=e.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ParticipantDuplicateIdentityError=X_;Object.defineProperty(z,53205,{value:X_});var ew=function(e){H(r,e);function r(){var t=e.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackInvalidError=ew;Object.defineProperty(z,53300,{value:ew});var tw=function(e){H(r,e);function r(){var t=e.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackNameInvalidError=tw;Object.defineProperty(z,53301,{value:tw});var rw=function(e){H(r,e);function r(){var t=e.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackNameTooLongError=rw;Object.defineProperty(z,53302,{value:rw});var nw=function(e){H(r,e);function r(){var t=e.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackNameCharsInvalidError=nw;Object.defineProperty(z,53303,{value:nw});var iw=function(e){H(r,e);function r(){var t=e.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackNameIsDuplicatedError=iw;Object.defineProperty(z,53304,{value:iw});var ow=function(e){H(r,e);function r(){var t=e.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.TrackServerTrackCapacityReachedError=ow;Object.defineProperty(z,53305,{value:ow});var aw=function(e){H(r,e);function r(){var t=e.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaClientLocalDescFailedError=aw;Object.defineProperty(z,53400,{value:aw});var sw=function(e){H(r,e);function r(){var t=e.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaServerLocalDescFailedError=sw;Object.defineProperty(z,53401,{value:sw});var cw=function(e){H(r,e);function r(){var t=e.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaClientRemoteDescFailedError=cw;Object.defineProperty(z,53402,{value:cw});var uw=function(e){H(r,e);function r(){var t=e.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaServerRemoteDescFailedError=uw;Object.defineProperty(z,53403,{value:uw});var lw=function(e){H(r,e);function r(){var t=e.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaNoSupportedCodecError=lw;Object.defineProperty(z,53404,{value:lw});var dw=function(e){H(r,e);function r(){var t=e.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaConnectionError=dw;Object.defineProperty(z,53405,{value:dw});var fw=function(e){H(r,e);function r(){var t=e.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.MediaDTLSTransportFailedError=fw;Object.defineProperty(z,53407,{value:fw});var pw=function(e){H(r,e);function r(){var t=e.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ConfigurationAcquireFailedError=pw;Object.defineProperty(z,53500,{value:pw});var hw=function(e){H(r,e);function r(){var t=e.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(t,r.prototype),t}return r}(W);V.ConfigurationAcquireTurnFailedError=hw;Object.defineProperty(z,53501,{value:hw});Object.defineProperty(hs,"__esModule",{value:!0});hs.getTurnCredentials=void 0;var Jx=p_,Zx=se.ICE_VERSION,vw=V,Xx=vw.createTwilioError,eL=vw.SignalingConnectionError,tL=Ne;function rL(e,r){return new Promise(function(t,n){var i=new tL.EventEmitter,o={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:e,type:"ice",version:Zx}},a=new Jx(r,o),s=!1;a.once("close",function(){s||(s=!0,n(new eL))}),a.on("message",function(c){var u=c.code,l=c.message,d=c.ice_servers,f=c.type;(f==="iced"||f==="error")&&!s&&(s=!0,f==="iced"?t(d):n(Xx(u,l)),a.close())})})}hs.getTurnCredentials=rL;var vs={},nh=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ih=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(vs,"__esModule",{value:!0});vs.makeStat=void 0;function nL(e){if(e&&e.length){var r=Math.min.apply(Math,ih([],nh(e))),t=Math.max.apply(Math,ih([],nh(e))),n=e.reduce(function(i,o){return i+o},0)/e.length;return{min:r,max:t,average:n}}return null}vs.makeStat=nL;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.syntheticAudio=void 0;function iL(){var e=ls(),r={},t=e.getOrCreate(r),n=t.createOscillator(),i=n.connect(t.createMediaStreamDestination());n.start();var o=i.stream.getAudioTracks()[0],a=o.stop;return o.stop=function(){a.call(o),e.release(r)},o}ms.syntheticAudio=iL;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.syntheticVideo=void 0;function oL(e){var r=e===void 0?{}:e,t=r.width,n=t===void 0?640:t,i=r.height,o=i===void 0?480:i,a=Object.assign(document.createElement("canvas"),{width:n,height:o}),s=a.getContext("2d");s.fillStyle="green",s.fillRect(0,0,a.width,a.height);var c=!1;requestAnimationFrame(function f(){if(!c){var g=Math.round(Math.random()*255),v=Math.round(Math.random()*255),_=Math.round(Math.random()*255),w=Math.round(Math.random()*255);s.fillStyle="rgba("+g+", "+v+", "+_+", "+w+")",s.fillRect(Math.random()*n,Math.random()*o,50,50),requestAnimationFrame(f)}});var u=a.captureStream(30),l=u.getTracks()[0],d=l.stop;return l.stop=function(){c=!0,d.call(l)},l}ys.syntheticVideo=oL;var aL=function(){function e(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return e.prototype.get=function(){var r=this._samples,t=r[1].denominator-r[0].denominator||1/0,n=r[1].numerator-r[0].numerator;return n/t},e.prototype.putSample=function(r,t){var n=this._samples;n.shift(),n.push({denominator:t,numerator:r})},e}(),mw=aL,sL=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cL=Ne.EventEmitter,uL=["signaling","room","media","quality","video-processor","preflight"],lL=["debug","error","info","warning"],dL=function(e){sL(r,e);function r(t,n,i,o){o===void 0&&(o=null);var a=e.call(this)||this;return a.on("event",function(s){var c=s.name,u=s.group,l=s.level,d=s.payload;if(typeof c!="string")throw i.error("Unexpected name: ",c),new Error("Unexpected name: ",c);if(!uL.includes(u))throw i.error("Unexpected group: ",u),new Error("Unexpected group: ",u);if(!lL.includes(l))throw i.error("Unexpected level: ",l),new Error("Unexpected level: ",l);var f=Date.now(),g=f-n,v=Object.assign({elapsedTime:g,level:l},d||{});t.publish(u,c,v);var _=Object.assign({elapsedTime:g,group:u,level:l,name:c,timestamp:f},d?{payload:d}:{}),w={debug:"debug",error:"error",info:"info",warning:"warn"}[l];i[w]("event",_),o&&u==="signaling"&&o.emit("event",_)}),a}return r}(cL),yw=dL,fL=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fn=m&&m.__assign||function(){return fn=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fn.apply(this,arguments)},pL=Ne.EventEmitter,hL=U.getUserAgent,vL=5,mL=50,yL=1e3,oh=globalThis,gL=oh.WebSocket?oh.WebSocket:c_(),gw=se,_L=gw.hardwareDevicePublisheriPad,wL=gw.hardwareDevicePublisheriPhone,SL=U,ah=zr,kL=function(e){fL(r,e);function r(t,n,i,o,a,s){var c=e.call(this)||this;return s=Object.assign({gateway:TL(o,a)+"/v1/VideoEvents",maxReconnectAttempts:vL,reconnectIntervalMs:mL,userAgent:hL(),WebSocket:gL},s),Object.defineProperties(c,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:SL.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),c._readyToConnect.promise.then(function(u){var l=u.roomSid,d=u.participantSid,f=c;c.on("disconnected",function g(v){if(f._session=null,v&&f._reconnectAttemptsLeft>0){f.emit("reconnecting"),EL(f,t,n,i,l,d,s);return}f.removeListener("disconnected",g)}),Ku(c,t,n,i,l,d,s)}).catch(function(){}),c}return r.prototype.connect=function(t,n){this._readyToConnect.resolve({roomSid:t,participantSid:n})},r.prototype._publish=function(t){t.session=this._session,this._ws.send(JSON.stringify(t))},r.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},r.prototype.publish=function(t,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var o=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return o({group:t,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},r}(pL);function Ku(e,r,t,n,i,o,a){e._connectTimestamp=Date.now(),e._reconnectAttemptsLeft--,e._ws=new a.WebSocket(a.gateway);var s=e._ws;s.addEventListener("close",function(c){if(c.code===yL){e.emit("disconnected");return}e.emit("disconnected",new Error("WebSocket Error "+c.code+": "+c.reason))}),s.addEventListener("message",function(c){bL(e,JSON.parse(c.data),a)}),s.addEventListener("open",function(){var c={type:"connect",token:r,version:1};c.publisher={name:t,sdkVersion:n,userAgent:a.userAgent,participantSid:o,roomSid:i},ah.isIpad()?c.publisher=fn(fn({},c.publisher),_L):ah.isIphone()&&(c.publisher=fn(fn({},c.publisher),wL)),s.send(JSON.stringify(c))})}function TL(e,r){return e==="prod"?"wss://sdkgw."+r+".twilio.com":"wss://sdkgw."+e+"-"+r+".twilio.com"}function bL(e,r,t){switch(r.type){case"connected":e._session=r.session,e._reconnectAttemptsLeft=t.maxReconnectAttempts,e._eventQueue.splice(0).forEach(e._publish,e),e.emit("connected");break;case"error":e._ws.close(),e.emit("disconnected",new Error(r.message));break}}function EL(e,r,t,n,i,o,a){var s=Date.now()-e._connectTimestamp,c=a.reconnectIntervalMs-s;if(c>0){setTimeout(function(){Ku(e,r,t,n,i,o,a)},c);return}Ku(e,r,t,n,i,o,a)}var _w=kL,CL=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xa=m&&m.__assign||function(){return xa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xa.apply(this,arguments)},Xn=m&&m.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ei=m&&m.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.runPreflight=Rn.PreflightTest=void 0;var Kr=se,Gr=fs,PL=xn,OL=ps,RL=hs,Co=vs,xL=ms,LL=ys,jL=U,AL=se.WS_SERVER,DL=Ut,IL=Zi,pc=mw,ML=yw,NL=_w,ww=as,$L=ww.createSID,FL=ww.sessionSID,Sw=V,UL=Sw.SignalingConnectionTimeoutError,sh=Sw.MediaConnectionError,kw=1e3,VL=10*kw,yr={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function BL(e){return e!==null&&typeof e<"u"}var zL=0,Tw=function(e){CL(r,e);function r(t,n){var i=e.call(this)||this;i._testTiming=new Gr.Timer,i._dtlsTiming=new Gr.Timer,i._iceTiming=new Gr.Timer,i._peerConnectionTiming=new Gr.Timer,i._mediaTiming=new Gr.Timer,i._connectTiming=new Gr.Timer,i._sentBytesMovingAverage=new pc,i._packetLossMovingAverage=new pc,i._progressEvents=[],i._receivedBytesMovingAverage=new pc;var o=n,a=o.environment,s=a===void 0?"prod":a,c=o.region,u=c===void 0?"gll":c,l=o.duration,d=l===void 0?VL:l,f=o.wsServer||AL(s,u);return i._log=new DL("default",i,Kr.DEFAULT_LOG_LEVEL,Kr.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=zL++,i._testTiming.start(),i._runPreflightTest(t,s,f),i}return r.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},r.prototype.stop=function(){this._stopped=!0},r.prototype._generatePreflightReport=function(t){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:Co.makeStat(t==null?void 0:t.jitter),rtt:Co.makeStat(t==null?void 0:t.rtt),packetLoss:Co.makeStat(t==null?void 0:t.packetLoss)},selectedIceCandidatePairStats:t?t.selectedIceCandidatePairStats:null,iceCandidateStats:t?t.iceCandidateStats:[],progressEvents:this._progressEvents,mos:Co.makeStat(t==null?void 0:t.mos)}},r.prototype._executePreflightStep=function(t,n,i){return Xn(this,void 0,void 0,function(){var o,a,s,c,u;return ei(this,function(l){switch(l.label){case 0:if(this._log.debug("Executing step: ",t),o=this._testDuration+10*kw,this._stopped)throw new Error("stopped");a=Promise.resolve().then(n),s=null,c=new Promise(function(d,f){s=setTimeout(function(){f(i||new Error(t+" timeout."))},o)}),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Promise.race([c,a])];case 2:return u=l.sent(),[2,u];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},r.prototype._collectNetworkTimings=function(t){var n=this;return new Promise(function(i){var o;t.addEventListener("iceconnectionstatechange",function(){t.iceConnectionState==="checking"&&n._iceTiming.start(),t.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(yr.iceConnected),(!o||o&&o.state==="connected")&&i())}),t.addEventListener("connectionstatechange",function(){t.connectionState==="connecting"&&n._peerConnectionTiming.start(),t.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(yr.peerConnectionConnected))});var a=t.getSenders(),s=a.map(function(c){return c.transport}).find(BL);typeof s<"u"&&(o=s,o.addEventListener("statechange",function(){o.state==="connecting"&&n._dtlsTiming.start(),o.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(yr.dtlsConnected),t.iceConnectionState==="connected"&&i())}))})},r.prototype._setupInsights=function(t){var n=t.token,i=t.environment,o=i===void 0?Kr.DEFAULT_ENVIRONMENT:i,a=t.realm,s=a===void 0?Kr.DEFAULT_REALM:a,c={},u=new NL(n,Kr.SDK_NAME,Kr.SDK_VERSION,o,s,c);u.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var l=new ML(u,Date.now(),this._log),d=void 0;return{reportToInsights:function(f){var g,v,_=f.report,w=_.stats.jitter||d,y=_.stats.rtt||d,p=_.stats.packetLoss||d,h=_.mos||d,S=new Map;_.iceCandidateStats.forEach(function(E){if(E.candidateType&&E.protocol){var C=S.get(E.candidateType)||[];C.indexOf(E.protocol)<0&&C.push(E.protocol),S.set(E.candidateType,C)}});var T=JSON.stringify(Object.fromEntries(S)),b={name:"report",group:"preflight",level:_.error?"error":"info",payload:{sessionSID:FL,preflightSID:$L("PF"),progressEvents:JSON.stringify(_.progressEvents),testTiming:_.testTiming,dtlsTiming:_.networkTiming.dtls,iceTiming:_.networkTiming.ice,peerConnectionTiming:_.networkTiming.peerConnection,connectTiming:_.networkTiming.connect,mediaTiming:_.networkTiming.media,selectedLocalCandidate:(g=_.selectedIceCandidatePairStats)===null||g===void 0?void 0:g.localCandidate,selectedRemoteCandidate:(v=_.selectedIceCandidatePairStats)===null||v===void 0?void 0:v.remoteCandidate,iceCandidateStats:T,jitterStats:w,rttStats:y,packetLossStats:p,mosStats:h,error:_.error}};l.emit("event",b),setTimeout(function(){return u.disconnect()},2e3)}}},r.prototype._runPreflightTest=function(t,n,i){return Xn(this,void 0,void 0,function(){var o,a,s,c,u,l,d,f,g,v,_,w,y=this;return ei(this,function(p){switch(p.label){case 0:o=[],a=[],s=this._setupInsights({token:t,environment:n}).reportToInsights,p.label=1;case 1:return p.trys.push([1,8,9,10]),c=[],[4,this._executePreflightStep("Acquire media",function(){return[xL.syntheticAudio(),LL.syntheticVideo({width:640,height:480})]})];case 2:return o=p.sent(),this._updateProgress(yr.mediaAcquired),this.emit("debug",{localTracks:o}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return RL.getTurnCredentials(t,i)},new UL)];case 3:return u=p.sent(),this._connectTiming.stop(),this._updateProgress(yr.connected),l=new RTCPeerConnection({iceServers:u,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:u,bundlePolicy:"max-bundle"}),a.push(l),a.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return Xn(y,void 0,void 0,function(){var h,S,T,b;return ei(this,function(E){switch(E.label){case 0:return l.addEventListener("icecandidate",function(C){return C.candidate&&d.addIceCandidate(C.candidate)}),d.addEventListener("icecandidate",function(C){return C.candidate&&l.addIceCandidate(C.candidate)}),o.forEach(function(C){return l.addTrack(C)}),h=new Promise(function(C){var A=[];d.addEventListener("track",function(I){A.push(I.track),A.length===o.length&&C(A)})}),[4,l.createOffer()];case 1:return S=E.sent(),T=S,[4,l.setLocalDescription(T)];case 2:return E.sent(),[4,d.setRemoteDescription(T)];case 3:return E.sent(),[4,d.createAnswer()];case 4:return b=E.sent(),[4,d.setLocalDescription(b)];case 5:return E.sent(),[4,l.setRemoteDescription(b)];case 6:return E.sent(),[4,this._collectNetworkTimings(l)];case 7:return E.sent(),[2,h]}})})},new sh)];case 4:return f=p.sent(),this.emit("debug",{remoteTracks:f}),f.forEach(function(h){h.addEventListener("ended",function(){return y._log.warn(h.kind+":ended")}),h.addEventListener("mute",function(){return y._log.warn(h.kind+":muted")}),h.addEventListener("unmute",function(){return y._log.warn(h.kind+":unmuted")})}),this._updateProgress(yr.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(h){var S=document.createElement("video");S.autoplay=!0,S.playsInline=!0,S.muted=!0,S.srcObject=new MediaStream(f),c.push(S),y.emit("debugElement",S),S.oncanplay=h})},new sh)];case 5:return p.sent(),this._mediaTiming.stop(),this._updateProgress(yr.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return y._collectRTCStatsForDuration(y._testDuration,WL(),l,d)})];case 6:return g=p.sent(),[4,this._executePreflightStep("Generate report",function(){return y._generatePreflightReport(g)})];case 7:return v=p.sent(),s({report:v}),this.emit("completed",v),[3,10];case 8:return _=p.sent(),w=this._generatePreflightReport(),s({report:xa(xa({},w),{error:_==null?void 0:_.toString()})}),this.emit("failed",_,w),[3,10];case 9:return a.forEach(function(h){return h.close()}),o.forEach(function(h){return h.stop()}),[7];case 10:return[2]}})})},r.prototype._collectRTCStats=function(t,n,i){return Xn(this,void 0,void 0,function(){var o,a,s,c,u,l,d,f,g,v,_,w,y,p;return ei(this,function(h){switch(h.label){case 0:return[4,OL.getCombinedConnectionStats({publisher:n,subscriber:i})];case 1:return o=h.sent(),a=o.timestamp,s=o.bytesSent,c=o.bytesReceived,u=o.packets,l=o.packetsLost,d=o.roundTripTime,f=o.jitter,g=o.selectedIceCandidatePairStats,v=o.iceCandidateStats,_=t.jitter.length>0,t.jitter.push(f),t.rtt.push(d),this._sentBytesMovingAverage.putSample(s,a),this._receivedBytesMovingAverage.putSample(c,a),this._packetLossMovingAverage.putSample(l,u),_&&(t.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),t.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),w=this._packetLossMovingAverage.get(),y=Math.min(100,w*100),t.packetLoss.push(y),p=PL.calculateMOS(d,f,w),t.mos.push(p)),t.selectedIceCandidatePairStats||(t.selectedIceCandidatePairStats=g),t.iceCandidateStats.length===0&&(t.iceCandidateStats=v),[2]}})})},r.prototype._collectRTCStatsForDuration=function(t,n,i,o){return Xn(this,void 0,void 0,function(){var a,s,c;return ei(this,function(u){switch(u.label){case 0:return a=Date.now(),s=Math.min(1e3,t),[4,jL.waitForSometime(s)];case 1:return u.sent(),[4,this._collectRTCStats(n,i,o)];case 2:return u.sent(),c=t-(Date.now()-a),c>0?[4,this._collectRTCStatsForDuration(c,n,i,o)]:[3,4];case 3:n=u.sent(),u.label=4;case 4:return[2,n]}})})},r.prototype._updateProgress=function(t){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:t}),this.emit("progress",t)},r}(IL);Rn.PreflightTest=Tw;function WL(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function HL(e,r){r===void 0&&(r={});var t=new Tw(e,r);return t}Rn.runPreflight=HL;var hc=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},vc=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},QL=function(){function e(r,t){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:t}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,o){r(function(a){n._isCancelable=!1,i(a)},function(a){n._isCancelable=!1,o(a)},function(){return n._isCanceled})})})}return e.reject=function(r){return new e(function(n,i){i(r)},function(){})},e.resolve=function(r){return new e(function(n){n(r)},function(){})},e.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},e.prototype.catch=function(){var r=[].slice.call(arguments),t=this._promise;return new e(function(i,o){t.catch.apply(t,vc([],hc(r))).then(i,o)},this._onCancel)},e.prototype.then=function(){var r=[].slice.call(arguments),t=this._promise;return new e(function(i,o){t.then.apply(t,vc([],hc(r))).then(i,o)},this._onCancel)},e.prototype.finally=function(){var r=[].slice.call(arguments),t=this._promise;return new e(function(i,o){t.finally.apply(t,vc([],hc(r))).then(i,o)},this._onCancel)},e}(),wd=QL,ch=wd;function qL(e,r,t,n){var i,o=new Error("Canceled");return new ch(function(s,c,u){var l;e(function(f){return u()?ch.reject(o):(l=r(f),t(l).then(function(v){if(u())throw o;return i=v(),i}))}).then(function(f){if(u())throw f.disconnect(),o;s(n(l,f))}).catch(function(f){c(f)})},function(){i&&i.cancel()})}var KL=qL,GL=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),YL=Ne.EventEmitter,JL=function(e){GL(r,e);function r(t,n){var i=e.call(this)||this;return t=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},t),Object.defineProperties(i,{maxAudioBitrate:{value:t.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:t.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return r.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},r.prototype.update=function(t){var n=this;t=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},t);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(o,a){return n[a]!==t[a]&&(n[a]=t[a],o=!0),o},!1);i&&this.emit("changed")},r}(YL),ZL=JL,Xi={},XL=U.isNonArrayObject,Fn=se,ai=Fn.typeErrors,ej=Fn.clientTrackSwitchOffControl,tj=Fn.videoContentPreferencesMode,rj=Fn.subscriptionMode,bw=Fn.trackPriority,nj=Fn.trackSwitchOffMode;function ij(e){var r=$i(e,"options.bandwidthProfile");return!e||r||(r=$i(e.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(tj)},{prop:"dominantSpeakerPriority",values:Object.values(bw)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(rj)},{prop:"clientTrackSwitchOffControl",values:Object.values(ej)},{prop:"trackSwitchOffMode",values:Object.values(nj)}]),r)?r:e.video?"maxTracks"in e.video&&"clientTrackSwitchOffControl"in e.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in e.video&&"contentPreferencesMode"in e.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):aj(e.video.renderDimensions):null}function oj(e,r){if(!(e instanceof r.LocalAudioTrack||e instanceof r.LocalDataTrack||e instanceof r.LocalVideoTrack||e instanceof r.MediaStreamTrack))throw ai.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function $i(e,r,t){return t===void 0&&(t=[]),typeof e>"u"?null:e===null||!XL(e)?ai.INVALID_TYPE(r,"object"):t.reduce(function(n,i){var o=i.prop,a=i.type,s=i.values;if(n||!(o in e))return n;var c=e[o];return a&&typeof c!==a||a==="number"&&isNaN(c)?ai.INVALID_TYPE(r+"."+o,a):Array.isArray(s)&&!s.includes(c)?ai.INVALID_VALUE(r+"."+o,s):n},null)}function aj(e){var r="options.bandwidthProfile.video.renderDimensions",t=$i(e,r);return e?t||Object.values(bw).reduce(function(n,i){return n||$i(e[i],r+"."+i,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):t}Xi.validateBandwidthProfile=ij;Xi.validateLocalTrack=oj;Xi.validateObject=$i;var sj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cj=Zi,Ew=U,uj=Ew.buildLogLevels,lj=Ew.valueToJSON,dj=se.DEFAULT_LOG_LEVEL,fj=Ut,pj=0,hj=function(e){sj(r,e);function r(t,n,i){var o=e.call(this)||this;i=Object.assign({logLevel:dj},i);var a=uj(i.logLevel);return Object.defineProperties(o,{_instanceId:{value:pj++},_log:{value:i.log?i.log.createLog("default",o):new fj("default",o,a,i.loggerName)},trackName:{enumerable:!0,value:t},trackSid:{enumerable:!0,value:n}}),o}return r.prototype.toJSON=function(){return lj(this)},r.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(cj),Cw=hj,vj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mj=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},yj=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},gj=Cw,Pw=se,_j=Pw.typeErrors,wj=Pw.trackPriority,Sj=function(e){vj(r,e);function r(t,n,i,o){var a=e.call(this,n.name,t.sid,o)||this;return Object.defineProperties(a,{_reemitSignalingEvent:{value:function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return a.emit.apply(a,yj([s&&s.length?"warning":"warningsCleared"],mj(s)))}},_reemitTrackEvent:{value:function(){return a.emit(a.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:t},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return t.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,a._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return t.on(s,a._reemitSignalingEvent)}),a}return r.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r.prototype.setPriority=function(t){var n=Object.values(wj);if(!n.includes(t))throw _j.INVALID_VALUE("priority",n);return this._signaling.setPriority(t),this},r.prototype.unpublish=function(){var t=this;return["disabled","enabled"].forEach(function(n){return t.track.removeListener(n,t._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return t._signaling.removeListener(n,t._reemitSignalingEvent)}),this._unpublish(this),this},r}(gj),Sd=Sj,kj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tj=Sd,bj=function(e){kj(r,e);function r(t,n,i,o){return e.call(this,t,n,i,o)||this}return r.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(Tj),Ej=bj,Cj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pj=Sd,Oj=function(e){Cj(r,e);function r(t,n,i,o){return e.call(this,t,n,i,o)||this}return r.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(Pj),Rj=Oj,xj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lj=Sd,jj=function(e){xj(r,e);function r(t,n,i,o){return e.call(this,t,n,i,o)||this}return r.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(Lj),Aj=jj,Dj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ij=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Mj=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},Ow=se,Nj=Ow.typeErrors,$j=Ow.trackPriority,Fj=zr.isIOS,uh=hd;function Uj(e){return function(r){Dj(t,r);function t(n,i,o,a,s,c,u){var l=this;return u=Object.assign({workaroundWebKitBug212780:Fj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},u),l=r.call(this,i,u)||this,Object.defineProperties(l,{_isEnabled:{value:o,writable:!0},_isSwitchedOff:{value:a,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){l._log.debug("updating render hint:",d),c(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:u.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),l}return t.prototype.setPriority=function(n){var i=Mj([null],Ij(Object.values($j)));if(!i.includes(n))throw Nj.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},t.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},t.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},t.prototype.attach=function(n){var i=r.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||Vj(this)),i},t.prototype.detach=function(n){var i=r.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},t}(e)}function Vj(e){var r=e._log,t=e.kind;function n(i){i&&e._attachments.forEach(function(o){var a=e._elShims.get(o),s=o.paused&&a&&!a.pausedIntentionally();s&&(r.info("Playing inadvertently paused <"+t+"> element"),r.debug("Element:",o),r.debug("RemoteMediaTrack:",e),o.play().then(function(){r.info("Successfully played inadvertently paused <"+t+"> element"),r.debug("Element:",o),r.debug("RemoteMediaTrack:",e)}).catch(function(c){r.warn("Error while playing inadvertently paused <"+t+"> element:",{err:c,el:o,remoteMediaTrack:e})}))})}return uh.onVisibilityChange(2,n),function(){uh.offVisibilityChange(2,n)}}var Rw=Uj,Bj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zj=Hg,Wj=Rw,Hj=Wj(zj),Qj=function(e){Bj(r,e);function r(t,n,i,o,a,s,c){return e.call(this,t,n,i,o,a,s,c)||this}return r.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},r.prototype._start=function(){e.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},r.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},r}(Hj),qj=Qj,Kj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gj=Cw,Yj=function(e){Kj(r,e);function r(t,n){var i=e.call(this,t.name,t.sid,n)||this;Object.defineProperties(i,{_signaling:{value:t},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return t.isEnabled}},kind:{enumerable:!0,value:t.kind},publishPriority:{enumerable:!0,get:function(){return t.priority}},track:{enumerable:!0,get:function(){return this._track}}});var o=t.error,a=t.isEnabled,s=t.isSwitchedOff,c=t.priority;return t.on("updated",function(){if(o!==t.error){o=t.error,i.emit("subscriptionFailed",t.error);return}a!==t.isEnabled&&(a=t.isEnabled,i.track&&i.track._setEnabled(t.isEnabled),i.emit(t.isEnabled?"trackEnabled":"trackDisabled")),s!==t.isSwitchedOff&&(i._log.debug(i.trackSid+": "+(s?"OFF":"ON")+" => "+(t.isSwitchedOff?"OFF":"ON")),s=t.isSwitchedOff,i.track?(i.track._setSwitchedOff(t.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),c!==t.priority&&(c=t.priority,i.emit("publishPriorityChanged",c))}),i}return r.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r.prototype._subscribed=function(t){!this._track&&t&&(this._track=t,this.emit("subscribed",t))},r.prototype._unsubscribe=function(){if(this._track){var t=this._track;this._track=null,this.emit("unsubscribed",t)}},r}(Gj),kd=Yj,Jj=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zj=kd,Xj=function(e){Jj(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(Zj),eA=Xj,tA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rA=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},nA=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},iA=pd,xw=se,oA=xw.typeErrors,aA=xw.trackPriority,sA=function(e){tA(r,e);function r(t,n,i){var o=e.call(this,n.id,"data",i)||this;return Object.defineProperties(o,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:t}}),n.on("message",function(a){o.emit("message",a,o)}),o}return r.prototype.setPriority=function(t){var n=nA([null],rA(Object.values(aA)));if(!n.includes(t))throw oA.INVALID_VALUE("priority",n);return this._priority=t,this},r.prototype._setEnabled=function(){},r.prototype._setSwitchedOff=function(t){this._isSwitchedOff!==t&&(this._isSwitchedOff=t,this.emit(t?"switchedOff":"switchedOn",this))},r}(iA),cA=sA,uA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lA=kd,dA=function(e){uA(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(lA),fA=dA,Lw=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Td=function(){function e(r){Object.defineProperties(this,{_callback:{value:r}})}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.makeVisible=function(r){var t=this._makeFakeEntry(r,!0);this._callback([t])},e.prototype.makeInvisible=function(r){var t=this._makeFakeEntry(r,!1);this._callback([t])},e.prototype._makeFakeEntry=function(r,t){return{target:r,isIntersecting:t}},e}(),pA=function(e){Lw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(Td),hA=function(e){Lw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resize=function(t){var n=this._makeFakeEntry(t,!0);this._callback([n])},r}(Td),vA={NullIntersectionObserver:pA,NullResizeObserver:hA,NullObserver:Td},mA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yA=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},gA=Rw,_A=t_,lh=hd,dh=vA.NullObserver,wA=Wr,SA=gA(_A),kA=50,TA=function(e){mA(r,e);function r(t,n,i,o,a,s,c){var u=this;return c=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},c),c=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||c.clientTrackSwitchOffControl!=="auto"?dh:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||c.contentPreferencesMode!=="auto"?dh:ResizeObserver},c),u=e.call(this,t,n,i,o,a,s,c)||this,Object.defineProperties(u,{_enableDocumentVisibilityTurnOff:{value:c.enableDocumentVisibilityTurnOff===!0&&c.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:c.clientTrackSwitchOffControl},_contentPreferencesMode:{value:c.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new wA(function(){u._setRenderHint({enabled:!1})},kA,!1)},_resizeObserver:{value:new c.ResizeObserver(function(l){var d=l.find(function(f){return!u._invisibleElements.has(f.target)});d&&Po(u)})},_intersectionObserver:{value:new c.IntersectionObserver(function(l){var d=!1;l.forEach(function(f){var g=!u._invisibleElements.has(f.target);g!==f.isIntersecting&&(f.isIntersecting?(u._log.debug("intersectionObserver detected: Off => On"),u._invisibleElements.delete(f.target)):(u._log.debug("intersectionObserver detected: On => Off"),u._invisibleElements.add(f.target)),d=!0)}),d&&(Zr(u),Po(u))},{threshold:.25})}}),u}return r.prototype._start=function(t){var n=e.prototype._start.call(this,t);return Zr(this),n},r.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},r.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},r.prototype.setContentPreferences=function(t){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return t.renderDimensions&&this._setRenderHint({renderDimensions:t.renderDimensions}),this},r.prototype._unObservePip=function(t){var n=this._elToPipCallbacks.get(t);n&&(t.removeEventListener("enterpictureinpicture",n.onEnterPip),t.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(t))},r.prototype._observePip=function(t){var n=this,i=this._elToPipCallbacks.get(t);if(!i){var o=function(c){return n._onEnterPip(c,t)},a=function(c){return n._onLeavePip(c,t)},s=function(c){return n._onResizePip(c,t)};t.addEventListener("enterpictureinpicture",o),t.addEventListener("leavepictureinpicture",a),this._elToPipCallbacks.set(t,{onEnterPip:o,onLeavePip:a,onResizePip:s})}},r.prototype._onEnterPip=function(t,n){this._log.debug("onEnterPip");var i=t.pictureInPictureWindow;this._elToPipWindows.set(n,i);var o=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",o),Zr(this)},r.prototype._onLeavePip=function(t,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,o=t.pictureInPictureWindow;o.removeEventListener("resize",i),Zr(this)},r.prototype._onResizePip=function(){Po(this)},r.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||bA(this)),this._observePip(n),n},r.prototype.detach=function(t){var n=this,i=e.prototype.detach.call(this,t),o=Array.isArray(i)?i:[i];return o.forEach(function(a){n._intersectionObserver.unobserve(a),n._resizeObserver.unobserve(a),n._invisibleElements.delete(a),n._unObservePip(a)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),Zr(this),Po(this),i},r.prototype.addProcessor=function(){return e.prototype.addProcessor.apply(this,arguments)},r.prototype.removeProcessor=function(){return e.prototype.removeProcessor.apply(this,arguments)},r.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},r.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},r}(SA);function bA(e){function r(){Zr(e)}return lh.onVisibilityChange(1,r),function(){lh.offVisibilityChange(1,r)}}function Zr(e){if(e._clientTrackSwitchOffControl==="auto"){var r=e._getAllAttachedElements().filter(function(i){return!e._invisibleElements.has(i)}),t=e._getAllAttachedElements().filter(function(i){return e._elToPipWindows.has(i)}),n=t.length>0||document.visibilityState==="visible"&&r.length>0;n===!0?(e._turnOffTimer.clear(),e._setRenderHint({enabled:!0})):e._turnOffTimer.isSet||e._turnOffTimer.start()}}function Po(e){if(e._contentPreferencesMode==="auto"){var r=e._getAllAttachedElements().filter(function(u){return!e._invisibleElements.has(u)}),t=e._getAllAttachedElements().map(function(u){var l=e._elToPipWindows.get(u);return l?{clientHeight:l.height,clientWidth:l.width}:{clientHeight:0,clientWidth:0}}),n=r.concat(t);if(n.length>0){var i=yA(n.sort(function(u,l){return l.clientHeight+l.clientWidth-u.clientHeight-u.clientWidth-1}),1),o=i[0],a=o.clientHeight,s=o.clientWidth,c={height:a,width:s};e._setRenderHint({renderDimensions:c})}}}var EA=TA,CA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PA=kd,OA=function(e){CA(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},r}(PA),RA=OA,xA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fi=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Gu=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},LA=Zi,jA=qj,AA=eA,DA=cA,IA=fA,MA=EA,NA=RA,Ct=U,$A=0,FA=function(e){xA(r,e);function r(t,n){var i=e.call(this)||this;n=Object.assign({RemoteAudioTrack:jA,RemoteAudioTrackPublication:AA,RemoteDataTrack:DA,RemoteDataTrackPublication:IA,RemoteVideoTrack:MA,RemoteVideoTrackPublication:NA,tracks:[]},n);var o=UA(n.tracks),a=n.log.createLog("default",i),s=new Map(o.audioTracks),c=new Map(o.dataTracks),u=new Map(o.tracks),l=new Map(o.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:c},_instanceId:{value:++$A},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:a},_signaling:{value:t},_tracks:{value:u},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:l},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return t.identity}},networkQualityLevel:{enumerable:!0,get:function(){return t.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return t.networkQualityStats}},sid:{enumerable:!0,get:function(){return t.sid}},state:{enumerable:!0,get:function(){return t.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),i._tracks.forEach(fh.bind(null,i)),t.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),VA(i,t),a.info("Created a new Participant"+(i.identity?": "+i.identity:"")),i}return r.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},r.prototype._getTrackPublicationEvents=function(){return[]},r.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},r.prototype._addTrack=function(t,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,t);var o={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[t.kind];return o.set(n,t),fh(this,t,n),i.info("Added a new "+Ct.trackClass(t)+":",n),i.debug(Ct.trackClass(t)+":",t),t},r.prototype._addTrackPublication=function(t){var n=this._log;if(this.tracks.has(t.trackSid))return null;this.tracks.set(t.trackSid,t);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[t.kind];return i.set(t.trackSid,t),BA(this,t),n.info("Added a new "+Ct.trackPublicationClass(t)+":",t.trackSid),n.debug(Ct.trackPublicationClass(t)+":",t),t},r.prototype._handleTrackSignalingEvents=function(){var t=this,n=t._log,i=t._clientTrackSwitchOffControl,o=t._contentPreferencesMode,a=this;if(this.state==="disconnected")return;var s=this._RemoteAudioTrack,c=this._RemoteAudioTrackPublication,u=this._RemoteVideoTrack,l=this._RemoteVideoTrackPublication,d=this._RemoteDataTrack,f=this._RemoteDataTrackPublication,g=this._signaling;function v(p){var h={audio:c,data:f,video:l}[p.kind],S=new h(p,{log:n});a._addTrackPublication(S);var T=p.isSubscribed;T&&w(p),a._trackSignalingUpdatedEventCallbacks.set(p.sid,function(){if(T!==p.isSubscribed){if(T=p.isSubscribed,T){w(p);return}y(p)}}),p.on("updated",a._trackSignalingUpdatedEventCallbacks.get(p.sid))}function _(p){p.isSubscribed&&p.setTrackTransceiver(null);var h=a._trackSignalingUpdatedEventCallbacks.get(p.sid);h&&(p.removeListener("updated",h),a._trackSignalingUpdatedEventCallbacks.delete(p.sid));var S=a.tracks.get(p.sid);S&&a._removeTrackPublication(S)}function w(p){var h=p.isEnabled,S=p.name,T=p.kind,b=p.sid,E=p.trackTransceiver,C=p.isSwitchedOff,A={audio:s,video:u,data:d}[T],I=a.tracks.get(b);if(!(!A||T!==E.kind)){var Z={log:n,name:S,clientTrackSwitchOffControl:i,contentPreferencesMode:o},L=function(N){return g.updateSubscriberTrackPriority(b,N)},$=function(N){p.isSubscribed&&g.updateTrackRenderHint(b,N)},R=T==="data"?new A(b,E,Z):new A(b,E,h,C,L,$,Z);a._addTrack(R,I,E.id)}}function y(p){var h=Fi(Array.from(a._tracks.entries()).find(function(E){var C=Fi(E,2),A=C[1];return A.sid===p.sid}),2),S=h[0],T=h[1],b=a.tracks.get(p.sid);T&&a._removeTrack(T,b,S)}g.on("trackAdded",v),g.on("trackRemoved",_),g.tracks.forEach(v),g.on("stateChanged",function p(h){h==="disconnected"?(n.debug("Removing event listeners"),g.removeListener("stateChanged",p),g.removeListener("trackAdded",v),g.removeListener("trackRemoved",_)):h==="connected"&&(n.info("reconnected"),setTimeout(function(){return a.emit("reconnected")},0))})},r.prototype._removeTrack=function(t,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[t.kind];i.delete(n);var o=this._trackEventReemitters.get(n)||new Map;o.forEach(function(s,c){t.removeListener(c,s)});var a=this._log;return a.info("Removed a "+Ct.trackClass(t)+":",n),a.debug(Ct.trackClass(t)+":",t),t},r.prototype._removeTrackPublication=function(t){if(t=this.tracks.get(t.trackSid),!t)return null;this.tracks.delete(t.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[t.kind];n.delete(t.trackSid);var i=this._trackPublicationEventReemitters.get(t.trackSid)||new Map;i.forEach(function(a,s){t.removeListener(s,a)});var o=this._log;return o.info("Removed a "+Ct.trackPublicationClass(t)+":",t.trackSid),o.debug(Ct.trackPublicationClass(t)+":",t),t},r.prototype.toJSON=function(){return Ct.valueToJSON(this)},r}(LA);function UA(e){var r=e.map(function(o){return[o.id,o]}),t=r.filter(function(o){return o[1].kind==="audio"}),n=r.filter(function(o){return o[1].kind==="video"}),i=r.filter(function(o){return o[1].kind==="data"});return{audioTracks:t,dataTracks:i,tracks:r,videoTracks:n}}function VA(e,r){var t=e._log;e.state!=="disconnected"&&r.on("stateChanged",function n(i){t.debug("Transitioned to state:",i),e.emit(i,e),i==="disconnected"&&(t.debug("Removing Track event reemitters"),r.removeListener("stateChanged",n),e._tracks.forEach(function(o){var a=e._trackEventReemitters.get(o.id);o&&a&&a.forEach(function(s,c){o.removeListener(c,s)})}),r.tracks.forEach(function(o){var a=e._tracks.get(o.id),s=e._trackEventReemitters.get(o.id);a&&s&&s.forEach(function(c,u){a.removeListener(u,c)})}),e._trackEventReemitters.clear(),e.tracks.forEach(function(o){e._trackPublicationEventReemitters.get(o.trackSid).forEach(function(a,s){o.removeListener(s,a)})}),e._trackPublicationEventReemitters.clear())})}function fh(e,r,t){var n=new Map;e.state!=="disconnected"&&(e._getTrackEvents().forEach(function(i){var o=i[0],a=i[1];n.set(o,function(){var s=[a].concat([].slice.call(arguments));return e.emit.apply(e,Gu([],Fi(s)))}),r.on(o,n.get(o))}),e._trackEventReemitters.set(t,n))}function BA(e,r){var t=new Map;e.state!=="disconnected"&&(e._getTrackPublicationEvents().forEach(function(n){var i=Fi(n,2),o=i[0],a=i[1];t.set(o,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];e.emit.apply(e,Gu(Gu([a],Fi(s)),[r]))}),r.on(o,t.get(o))}),e._trackPublicationEventReemitters.set(r.trackSid,t))}var jw=FA,zA=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WA=Br.MediaStreamTrack,bd=U,HA=bd.asLocalTrack,QA=bd.asLocalTrackPublication,gr=bd.trackClass,Aw=se,Qt=Aw.typeErrors,mc=Aw.trackPriority,qA=Xi.validateLocalTrack,Ed=wn,KA=Ed.LocalAudioTrack,GA=Ed.LocalDataTrack,YA=Ed.LocalVideoTrack,JA=Ej,ZA=Rj,XA=Aj,eD=jw,tD=function(e){zA(r,e);function r(t,n,i){var o=this;i=Object.assign({LocalAudioTrack:KA,LocalVideoTrack:YA,LocalDataTrack:GA,MediaStreamTrack:WA,LocalAudioTrackPublication:JA,LocalVideoTrackPublication:XA,LocalDataTrackPublication:ZA,shouldStopLocalTracks:!1,tracks:n},i);var a=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return o=e.call(this,t,i)||this,Object.defineProperties(o,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:a},signalingRegion:{enumerable:!0,get:function(){return t.signalingRegion}}}),o._handleTrackSignalingEvents(),o}return r.prototype._addTrack=function(t,n,i){var o=e.prototype._addTrack.call(this,t,n);return o&&this.state!=="disconnected"&&this._addLocalTrack(t,i),o},r.prototype._addLocalTrack=function(t,n){var i,o=(i=t.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(t._trackSender,t.name,n,o),this._log.info("Added a new "+gr(t,!0)+":",t.id),this._log.debug(gr(t,!0)+":",t)},r.prototype._removeTrack=function(t,n){var i=e.prototype._removeTrack.call(this,t,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(t._trackSender),this._log.info("Removed a "+gr(t,!0)+":",t.id),this._log.debug(gr(t,!0)+":",t)),i},r.prototype._getTrackEvents=function(){return e.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},r.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},r.prototype._handleTrackSignalingEvents=function(){var t=this,n=this._log;if(this.state!=="disconnected"){var i=function(c){var u=t._signaling.getPublication(c._trackSender);u&&(u.disable(),n.debug("Disabled the "+gr(c,!0)+":",c.id))},o=function(c){var u=t._signaling.getPublication(c._trackSender);u&&(u.enable(),n.debug("Enabled the "+gr(c,!0)+":",c.id))},a=function(c){var u=t._signaling.getPublication(c._trackSender);return u&&u.stop(),u},s=function(c){n.debug("Transitioned to state:",c),c==="disconnected"?(n.debug("Removing LocalTrack event listeners"),t._signaling.removeListener("stateChanged",s),t.removeListener("trackDisabled",i),t.removeListener("trackEnabled",o),t.removeListener("trackStopped",a),t._tracks.forEach(function(u){var l=a(u);l&&u._trackSender.removeClone(l._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping "+t._tracksToStop.size+" automatically-acquired LocalTracks"),t._tracksToStop.forEach(function(u){u.stop()})):c==="connected"&&(n.info("reconnected"),setTimeout(function(){return t.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",o),this.on("trackStopped",a),this._signaling.on("stateChanged",s),this._tracks.forEach(function(c){t._addLocalTrack(c,mc.PRIORITY_STANDARD),t._getOrCreateLocalTrackPublication(c).catch(function(u){n.warn("Failed to get or create LocalTrackPublication for "+c+":",u)})})}},r.prototype._getOrCreateLocalTrackPublication=function(t){var n=Oo(this.tracks,t);if(n)return Promise.resolve(n);var i=this._log,o=this,a=this._signaling.getPublication(t._trackSender);return a?new Promise(function(s,c){function u(){var l=a.error;if(l){a.removeListener("updated",u),i.warn("Failed to publish the "+gr(t,!0)+": "+l.message),o._removeTrack(t,t.id),setTimeout(function(){o.emit("trackPublicationFailed",l,t)}),c(l);return}if(!o._tracks.has(t.id)){a.removeListener("updated",u),c(new Error("The "+t+" was unpublished"));return}var d=a.sid;if(d){a.removeListener("updated",u);var f={log:i,LocalAudioTrackPublication:o._LocalAudioTrackPublication,LocalDataTrackPublication:o._LocalDataTrackPublication,LocalVideoTrackPublication:o._LocalVideoTrackPublication};n=Oo(o.tracks,t);var g=function(y){return o.emit("trackWarning",y,n)},v=function(){return o.emit("trackWarningsCleared",n)},_=function(y){n.removeListener("trackWarning",g),n.removeListener("trackWarningsCleared",v),o.unpublishTrack(y.track)};n||(n=QA(t,a,_,f),o._addTrackPublication(n)),n.on("warning",g),n.on("warningsCleared",v);var w=o._signaling.state;(w==="connected"||w==="connecting")&&(t._processorEventObserver&&t._processorEventObserver.on("event",function(y){o._eventObserver.emit("event",{name:y.name,payload:y.data,group:"video-processor",level:"info"})}),t.processedTrack&&(t._captureFrames(),t._setSenderMediaStreamTrack(!0))),w==="connected"&&setTimeout(function(){o.emit("trackPublished",n)}),s(n)}}a.on("updated",u)}):Promise.reject(new Error("Unexpected error: The "+t+" cannot be published"))},r.prototype.publishTrack=function(t,n){var i=Oo(this.tracks,t);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:mc.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var o;try{o=HA(t,n)}catch(l){return Promise.reject(l)}var a=o.noiseCancellation,s=this._signaling.audioProcessors;a&&!s.includes(a.vendor)&&(this._log.warn(a.vendor+" is not supported in this room. disabling it permanently"),a.disablePermanently());var c=Object.values(mc);if(!c.includes(n.priority))return Promise.reject(Qt.INVALID_VALUE("LocalTrackPublishOptions.priority",c));var u=this._addTrack(o,o.id,n.priority)||this._tracks.get(o.id);return this._getOrCreateLocalTrackPublication(u)},r.prototype.publishTracks=function(t){if(!Array.isArray(t))throw Qt.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(t.map(this.publishTrack,this))},r.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},r.prototype.setNetworkQualityConfiguration=function(t){if(typeof t!="object"||t===null)throw Qt.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in t&&(typeof t[n]!="number"||isNaN(t[n])))throw Qt.INVALID_TYPE("networkQualityConfiguration."+n,"number")}),this._signaling.setNetworkQualityConfiguration(t),this},r.prototype.setParameters=function(t){if(typeof t<"u"&&typeof t!="object")throw Qt.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(t){if(this._signaling.getParameters().adaptiveSimulcast&&t.maxVideoBitrate)throw Qt.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof t[n]<"u"&&typeof t[n]!="number"&&t[n]!==null)throw Qt.INVALID_TYPE("encodingParameters."+n,"number, null or undefined")})}else t===null&&(t={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(t),this},r.prototype.unpublishTrack=function(t){qA(t,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(t.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The "+n+" was unpublished")),n=this._removeTrack(n,n.id),!n)return null;var o=Oo(this.tracks,n);return o&&this._removeTrackPublication(o),o},r.prototype.unpublishTracks=function(t){var n=this;if(!Array.isArray(t))throw Qt.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return t.reduce(function(i,o){var a=n.unpublishTrack(o);return a?i.concat(a):i},[])},r}(eD);function Oo(e,r){return Array.from(e.values()).find(function(t){return t.track===r||t.track.mediaStreamTrack===r})||null}var rD=tD,nD=function(){function e(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return e.prototype.connect=function(){},e.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},e.prototype.publish=function(){return this._connected},e}(),iD=nD,oD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aD=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},sD=Ne.EventEmitter,Cd=se,Ro=Cd.DEFAULT_NQ_LEVEL_LOCAL,xo=Cd.DEFAULT_NQ_LEVEL_REMOTE,ph=Cd.MAX_NQ_LEVEL,yc=U.inRange,cD=function(e){oD(r,e);function r(t){var n=e.call(this)||this;return t=Object.assign({local:Ro,remote:xo},t),Object.defineProperties(n,{local:{value:yc(t.local,Ro,ph)?t.local:Ro,writable:!0},remote:{value:yc(t.remote,xo,ph)?t.remote:xo,writable:!0}}),n}return r.prototype.update=function(t){var n=this;t=Object.assign({local:this.local,remote:this.remote},t),[["local",Ro,3],["remote",xo,3]].forEach(function(i){var o=aD(i,3),a=o[0],s=o[1],c=o[2];n[a]=typeof t[a]=="number"&&yc(t[a],s,c)?t[a]:s})},r}(sD),uD=cD,lD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dD=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},hh=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},fD=jw,pD=function(e){lD(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return r.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},r.prototype._addTrack=function(t,n,i){return e.prototype._addTrack.call(this,t,i)?(n._subscribed(t),this.emit("trackSubscribed",t,n),t):null},r.prototype._addTrackPublication=function(t){var n=e.prototype._addTrackPublication.call(this,t);return n?(this.emit("trackPublished",n),n):null},r.prototype._getTrackPublicationEvents=function(){return hh(hh([],dD(e.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},r.prototype._unsubscribeTracks=function(){var t=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),t.emit("trackUnsubscribed",i,n)}})},r.prototype._removeTrack=function(t,n,i){var o=this._tracks.get(i);return o?(e.prototype._removeTrack.call(this,o,i),n._unsubscribe(),this.emit("trackUnsubscribed",o,n),o):null},r.prototype._removeTrackPublication=function(t){this._signaling.clearTrackHint(t.trackSid);var n=e.prototype._removeTrackPublication.call(this,t);return n?(this.emit("trackUnpublished",n),n):null},r}(fD),hD=pD,vD=function(){function e(r,t){if(typeof r!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:r,enumerable:!0},trackSid:{value:t.trackSid,enumerable:!0},timestamp:{value:t.timestamp,enumerable:!0},ssrc:{value:t.ssrc,enumerable:!0},packetsLost:{value:typeof t.packetsLost=="number"?t.packetsLost:null,enumerable:!0},codec:{value:typeof t.codecName=="string"?t.codecName:null,enumerable:!0}})}return e}(),Dw=vD,mD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yD=Dw,gD=function(e){mD(r,e);function r(t,n,i){var o=e.call(this,t,n)||this;return Object.defineProperties(o,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),o}return r}(yD),Iw=gD,_D=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wD=Iw,SD=function(e){_D(r,e);function r(t,n,i){var o=e.call(this,t,n,i)||this;return Object.defineProperties(o,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),o}return r}(wD),kD=SD,TD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bD=Iw,ED=function(e){TD(r,e);function r(t,n,i){var o=e.call(this,t,n,i)||this,a=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(o,{captureDimensions:{value:a,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0}}),o}return r}(bD),CD=ED,PD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),OD=Dw,RD=function(e){PD(r,e);function r(t,n){var i=e.call(this,t,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0}}),i}return r}(OD),Mw=RD,xD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),LD=Mw,jD=function(e){xD(r,e);function r(t,n){var i=e.call(this,t,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return r}(LD),AD=jD,DD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ID=Mw,MD=function(e){DD(r,e);function r(t,n){var i=e.call(this,t,n)||this,o=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:o,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0}}),i}return r}(ID),ND=MD,$D=kD,FD=CD,UD=AD,VD=ND,BD=function(){function e(r,t,n){if(typeof r!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:r,enumerable:!0},localAudioTrackStats:{value:t.localAudioTrackStats.map(function(i){return new $D(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:t.localVideoTrackStats.map(function(i){return new FD(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:t.remoteAudioTrackStats.map(function(i){return new UD(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:t.remoteVideoTrackStats.map(function(i){return new VD(i.trackId,i)}),enumerable:!0}})}return e}(),Nw=BD,zD=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ui=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Xo=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},WD=Zi,HD=hD,QD=Nw,$w=U,qD=$w.flatMap,KD=$w.valueToJSON,GD=0,YD=function(e){zD(r,e);function r(t,n,i){var o=e.call(this)||this,a=i.log.createLog("default",o),s=new Map;return Object.defineProperties(o,{_log:{value:a},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++GD},_options:{value:i},_participants:{value:s},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),ZD(o,t),XD(o,n.recording),eI(o,n),JD(o),a.info("Created a new Room:",o.name),a.debug("Initial RemoteParticipants:",Array.from(o._participants.values())),o}return r.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},r.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},r.prototype.getStats=function(){var t=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var o=Ui(i,2),a=o[0],s=o[1];return new QD(a,Object.assign({},s,{localAudioTrackStats:vh(t,s.localAudioTrackStats),localVideoTrackStats:vh(t,s.localVideoTrackStats)}))})})},r.prototype.refreshInactiveMedia=function(){var t=this.localParticipant.tracks,n=Array.from(t.values()).filter(function(c){var u=c.track.kind;return u!=="data"}).map(function(c){var u=c.track;return u}),i=qD(this.participants,function(c){return Array.from(c.tracks.values())}).filter(function(c){var u=c.track;return u&&u.kind!=="data"}).map(function(c){var u=c.track;return u}),o=n.concat(i),a=new Event("unmute");n.forEach(function(c){var u=c.isMuted,l=c.mediaStreamTrack;u&&l.dispatchEvent(a)});var s=new Event("pause");return o.forEach(function(c){var u=c._attachments,l=c._elShims;return u.forEach(function(d){var f=l.get(d),g=d.paused&&f&&!f.pausedIntentionally();g&&d.dispatchEvent(s)})}),this},r.prototype.toJSON=function(){return KD(this)},r}(WD);function JD(e){var r=e.localParticipant._signaling.audioProcessors;e.localParticipant.audioTracks.forEach(function(t){var n=t.track,i=n.noiseCancellation;i&&!r.includes(i.vendor)&&(e._log.warn(i.vendor+" is not supported in this room. disabling it permanently"),i.disablePermanently())})}function vh(e,r){var t=e.localParticipant._signaling;return r.reduce(function(n,i){var o=t.tracks.get(i.trackId),a=t.getSender(o);return a?[Object.assign({},i,{trackId:a.id})].concat(n):n},[])}function mh(e,r){var t=e._log,n=e._clientTrackSwitchOffControl,i=e._contentPreferencesMode,o=new HD(r,{log:t,clientTrackSwitchOffControl:n,contentPreferencesMode:i});t.info("A new RemoteParticipant connected:",o),e._participants.set(o.sid,o),e.emit("participantConnected",o);var a=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(s){var c=Ui(Array.isArray(s)?s:[s,s],2),u=c[0],l=c[1];function d(){var f=[].slice.call(arguments);f.unshift(l),f.push(o),e.emit.apply(e,Xo([],Ui(f)))}return o.on(u,d),[u,d]});o.once("disconnected",function(){var c=e.dominantSpeaker;t.info("RemoteParticipant disconnected:",o),e._participants.delete(o.sid),a.forEach(function(u){o.removeListener(u[0],u[1])}),e.emit("participantDisconnected",o),o===c&&e.emit("dominantSpeakerChanged",e.dominantSpeaker)})}function ZD(e,r){var t=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return e.emit.apply(e,Xo([n],Ui(Xo(Xo([],Ui(i)),[r]))))}}});t.forEach(function(n){var i=n.eventName,o=n.handler;return r.on(i,o)}),e.once("disconnected",function(){return t.forEach(function(n){var i=n.eventName,o=n.handler;return r.removeListener(i,o)})})}function XD(e,r){r.on("updated",function(){var n=r.isEnabled;e._log.info("Recording "+(n?"started":"stopped")),e.emit("recording"+(n?"Started":"Stopped"))})}function eI(e,r){var t=e._log;t.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),r.participants.forEach(mh.bind(null,e)),t.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),r.on("participantConnected",mh.bind(null,e)),r.on("dominantSpeakerChanged",function(){return e.emit("dominantSpeakerChanged",e.dominantSpeaker)}),r.on("stateChanged",function n(i,o){switch(t.info("Transitioned to state:",i),i){case"disconnected":e.participants.forEach(function(a){a._unsubscribeTracks()}),e.emit(i,e,o),e.localParticipant.tracks.forEach(function(a){a.unpublish()}),r.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return e.emit("reconnecting",o)},0);break;default:setTimeout(function(){return e.emit("reconnected")},0)}})}var tI=YD,rI=function(){function e(r){Object.defineProperties(this,{_min:{value:r.min||100},_max:{value:r.max||1e4},_jitter:{value:r.jitter>0&&r.jitter<=1?r.jitter:0},_factor:{value:r.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var t=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*t);t=Math.floor(n*10)&1?t+i:t-i}return Math.min(t,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return e.prototype.backoff=function(r){var t=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){t._attempts++,r()},n)},e.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},e}(),Fw=rI,$e={},nI=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Uw=U,gc=Uw.difference,Lt=Uw.flatMap;function _c(){var e=4294967295;return String(Math.floor(Math.random()*e))}var iI=function(){function e(r,t,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:t},trackId:{enumerable:!0,value:r}})}return e.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var r=[_c(),_c()];r.forEach(function(t){this.primarySSRCs.add(t)},this),this.rtxPairs.size&&r.forEach(function(t){this.rtxPairs.set(_c(),t)},this)}},e.prototype.addSSRC=function(r,t,n){t?this.rtxPairs.set(r,t):this.primarySSRCs.add(r),this.isSimulcastEnabled=this.isSimulcastEnabled||n},e.prototype.toSdpLines=function(r){var t=this,n=r?[]:Array.from(this.rtxPairs.entries()).map(function(u){return u.reverse()}),i=Array.from(this.primarySSRCs.values()),o=n.length?Lt(n):i,a=Lt(o,function(u){return["a=ssrc:"+u+" cname:"+t.cName,"a=ssrc:"+u+" msid:"+t.streamId+" "+t.trackId]}),s=n.map(function(u){return"a=ssrc-group:FID "+u.join(" ")}),c=["a=ssrc-group:SIM "+i.join(" ")];return s.concat(a).concat(c)},e}();function La(e,r){var t=e.match(new RegExp(r,"gm"))||[];return t.map(function(n){var i=n.match(new RegExp(r))||[];return i.slice(1)})}function oI(e){var r="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(Lt(La(e,r)))}function aI(e,r,t){var n="a=ssrc:"+r+" "+t+":(.+)";return e.match(new RegExp(n))[1]}function sI(e){var r="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(La(e,r).map(function(t){return t.reverse()}))}function cI(e){var r=nI(Lt(La(e,"^a=msid:(.+) (.+)$")),2),t=r[0],n=r[1],i=Lt(La(e,"^a=ssrc:(.+) cname:.+$"));return i.map(function(o){return[o,t,n]})}function uI(e){var r=oI(e),t=sI(e),n=cI(e);return n.reduce(function(i,o){var a=o[0],s=o[1],c=o[2],u=i.get(c)||new iI(c,s,aI(e,a,"cname")),l=t.get(a)||null;return u.addSSRC(a,l,r.has(a)),i.set(c,u)},new Map)}function lI(e,r){var t=uI(e),n=Array.from(t.keys()),i=Array.from(r.keys()),o=gc(n,i),a=gc(i,n),s=Lt(o,function(v){return t.get(v)});s.forEach(function(v){v.addSimulcastSSRCs(),r.set(v.trackId,v)}),i=Array.from(r.keys());var c=gc(i,a),u=Lt(c,function(v){return r.get(v)}),l=!e.match(/a=rtpmap:[0-9]+ rtx/),d=Lt(u,function(v){return v.toSdpLines(l)}),f=Lt(new Set(e.split(`\r
`).concat(d))),g="a=x-google-flag:conference";return e.match(g)||f.push(g),f.join(`\r
`)}var dI=lI,eo=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Vw=U,fI=Vw.difference,Yu=Vw.flatMap,pI=dI,yh={0:"PCMU",8:"PCMA"};function Un(e){return Array.from(gs(e)).reduce(function(r,t){var n=t[0],i=t[1],o=r.get(i)||[];return r.set(i,o.concat(n))},new Map)}function Ju(e){return Et(e).reduce(function(r,t){var n=Ln(t);return n?r.set(n,t):r},new Map)}function gs(e){return to(e).reduce(function(r,t){var n=new RegExp("a=rtpmap:"+t+" ([^/]+)"),i=e.match(n),o=i?i[1].toLowerCase():yh[t]?yh[t].toLowerCase():"";return r.set(t,o)},new Map)}function ja(e,r){var t=new RegExp("^a=fmtp:"+e+" (.+)$","m"),n=r.match(t);return n&&n[1].split(";").reduce(function(i,o){var a=eo(o.split("="),2),s=a[0],c=a[1];return i[s]=isNaN(c)?c:parseInt(c,10),i},{})}function Ln(e){var r=e.match(/^a=mid:(.+)$/m);return r&&r[1]}function Et(e,r,t){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+(r||".*"),"gm"),o=new RegExp("a="+(t||".*"),"gm");return i.test(n)&&o.test(n)})}function to(e){var r=e.split(`\r
`)[0],t=r.match(/([0-9]+)/g);return t?t.slice(1).map(function(n){return parseInt(n,10)}):[]}function hI(e,r){r=r.map(function(o){var a=o.codec;return a.toLowerCase()});var t=Yu(r,function(o){return e.get(o)||[]}),n=fI(Array.from(e.keys()),r),i=Yu(n,function(o){return e.get(o)});return t.concat(i)}function Pd(e,r){var t=r.split(`\r
`),n=t[0],i=t.slice(1);return n=n.replace(/([0-9]+\s?)+$/,e.join(" ")),[n].concat(i).join(`\r
`)}function vI(e,r,t){var n=Et(e),i=e.split(`\r
m=`)[0];return[i].concat(n.map(function(o){if(!/^m=(audio|video)/.test(o))return o;var a=o.match(/^m=(audio|video)/)[1],s=Un(o),c=a==="audio"?r:t,u=hI(s,c),l=Pd(u,o),d=s.get("pcma")||[],f=s.get("pcmu")||[],g=a==="audio"?new Set(d.concat(f)):new Set;return g.has(u[0])?l.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):l})).join(`\r
`)}function mI(e,r){var t=Et(e),n=e.split(`\r
m=`)[0];return[n].concat(t.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var o=Un(i),a=to(i),s=new Set(o.get("vp8")||[]),c=a.some(function(u){return s.has(u)});return c?pI(i,r):i})).concat("").join(`\r
`)}function yI(e,r,t,n,i){var o=t.get(e)||[];if(o.length<=1)return o;var a=ja(r,i);if(!a)return o;var s=o.find(function(c){var u=ja(c,n);return u&&Object.keys(a).every(function(l){return a[l]===u[l]})});return typeof s=="number"?[s]:o}function gI(e,r,t){if(!/^m=(audio|video)/.test(e))return e;var n=Ln(e),i=n&&r.get(n);if(!i)return e;var o=gs(i),a=Un(e),s=Yu(Array.from(o),function(d){var f=eo(d,2),g=f[0],v=f[1];return v!=="rtx"&&!t.includes(v)?yI(v,g,a,e,i):[]}),c=a.get("rtx")||[];s=s.concat(c.filter(function(d){var f=ja(d,e);return f&&s.includes(f.apt)}));var u=e.split(`\r
`).filter(function(d){var f=d.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),g=f&&f[2];return!f||g&&s.includes(parseInt(g,10))}),l=to(e).filter(function(d){return s.includes(d)});return Pd(l,u.join(`\r
`))}function _I(e,r){var t=Et(e),n=e.split(`\r
m=`)[0],i=Ju(r);return[n].concat(t.map(function(o){return gI(o,i,[])})).join(`\r
`)}function wI(e,r,t,n){n===void 0&&(n=!1);var i=Ju(t),o=Ju(r),a=Et(e),s=e.split(`\r
m=`)[0];return[s].concat(a.map(function(c){if(c=c.replace(/\r\n$/,""),!/^m=video/.test(c))return c;var u=c.match(/^a=mid:(.+)$/m),l=u&&u[1];if(!l)return c;var d=i.get(l),f=gs(d),g=to(d),v=g.length&&f.get(g[0])==="vp8",_=n||!v;return _?o.get(l).replace(/\r\n$/,""):c})).concat("").join(`\r
`)}function SI(e,r,t){var n=Array.from(t).reduce(function(i,o){var a=eo(o,2),s=a[0],c=a[1],u=Et(e,s,"send(only|recv)"),l=u.map(Ln).filter(function(d){return!r.has(d)});return l.forEach(function(d,f){return i.set(d,c[f])}),i},new Map);return Bw(e,n)}function Bw(e,r){var t=Et(e),n=e.split(`\r
m=`)[0];return[n].concat(t.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var o=Ln(i);if(!o)return i;var a=r.get(o);if(!a)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var c=eo(s.split(" "),2),u=c[0],l=c[1],d=new RegExp("msid:"+u+(l?" "+l:"")+"$","gm");return i.replace(d,"msid:"+u+" "+a)})).join(`\r
`)}function kI(e,r){return e.split(`\r
`).filter(function(t){return!r.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(t)})}).join(`\r
`)}function TI(e){var r=Et(e),t=e.split(`\r
m=`)[0];return[t].concat(r.map(function(n){if(!/^m=video/.test(n))return n;var i=Un(n),o=i.get("rtx");if(!o)return n;var a=new Set(to(n));o.forEach(function(l){return a.delete(l)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),c=s&&s[1],u=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(c?[new RegExp("^a=ssrc:"+c+" .+$")]:[]);return n=n.split(`\r
`).filter(function(l){return u.every(function(d){return!d.test(l)})}).join(`\r
`),Pd(Array.from(a),n)})).join(`\r
`)}function gh(e,r){var t=Object.entries(r).map(function(n){var i=eo(n,2),o=i[0],a=i[1];return o+"="+a}).join(";");return"a=fmtp:"+e+" "+t}function bI(e,r){var t=Et(e),n=e.split(`\r
m=`)[0];return r=r||t.filter(function(i){return/^m=audio/.test(i)}).map(Ln),[n].concat(t.map(function(i){if(!/^m=audio/.test(i))return i;var o=Un(i),a=o.get("opus");if(!a)return i;var s=ja(a,i);if(!s)return i;var c=gh(a,s),u=new RegExp(c),l=Ln(i);r.includes(l)?s.usedtx=1:delete s.usedtx;var d=gh(a,s);return i.replace(u,d)})).join(`\r
`)}$e.addOrRewriteNewTrackIds=SI;$e.addOrRewriteTrackIds=Bw;$e.createCodecMapForMediaSection=Un;$e.createPtToCodecName=gs;$e.disableRtx=TI;$e.enableDtxForOpus=bI;$e.filterLocalCodecs=_I;$e.getMediaSections=Et;$e.removeSSRCAttributes=kI;$e.revertSimulcast=wI;$e.setCodecPreferences=vI;$e.setSimulcast=mI;var EI=function(){function e(r){r=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},r),Object.defineProperties(this,{_getKey:{value:r.getKey},_getValue:{value:r.getValue},_isLessThanOrEqualTo:{value:r.isLessThanOrEqualTo},_map:{value:new Map}})}return e.prototype.toMap=function(){return new Map(this._map)},e.prototype.updateAndFilter=function(r){return r.filter(this.update,this)},e.prototype.update=function(r){var t=this._getKey(r),n=this._getValue(r);return this._map.has(t)&&this._isLessThanOrEqualTo(n,this._map.get(t))?!1:(this._map.set(t,n),!0)},e}(),CI=EI,PI=CI,OI=function(){function e(){Object.defineProperties(this,{_filter:{value:new PI({getKey:function(t){return t.ufrag},isLessThanOrEqualTo:function(t,n){return t.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return e.prototype.setUfrag=function(r){this._ufrag=r;var t=this._filter.toMap().get(r);return t?t.candidates:[]},e.prototype.update=function(r){r.candidates=r.candidates||[];var t=this._filter.toMap().get(r.ufrag),n=t?t.candidates:[];return this._filter.update(r)&&this._ufrag===r.ufrag?r.candidates.slice(n.length):[]},e}(),RI=OI,zw=se,xI=zw.ICE_ACTIVITY_CHECK_PERIOD_MS,LI=zw.ICE_INACTIVITY_THRESHOLD_MS,jI=function(){function e(r,t){t=Object.assign({activityCheckPeriodMs:xI,inactivityThresholdMs:LI},t),Object.defineProperties(this,{_activityCheckPeriodMs:{value:t.activityCheckPeriodMs},_inactivityThresholdMs:{value:t.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:r},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return e.prototype._getActivePairStat=function(r){var t=Array.from(r.values()),n=t.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},e.prototype._getIceConnectionStats=function(){var r=this;return this._peerConnection.getStats().then(function(t){return r._getActivePairStat(t)}).catch(function(){return null})},e.prototype._scheduleInactivityCallback=function(r){var t=this;r&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){t._peerConnection.iceConnectionState==="disconnected"&&r()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!r&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},e.prototype.start=function(r){var t=this;this.stop(),this._timer=setInterval(function(){t._getIceConnectionStats().then(function(n){n&&((!t._lastActivity||t._lastActivity.bytesReceived!==n.bytesReceived)&&(t._lastActivity=n,t._scheduleInactivityCallback(null)),n.timestamp-t._lastActivity.timestamp>=t._inactivityThresholdMs&&(t._peerConnection.iceConnectionState==="disconnected"?r():t._onIceConnectionStateChanged===null&&t._scheduleInactivityCallback(r)))})},this._activityCheckPeriodMs)},e.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},e}(),AI=jI,DI=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),II=Ne.EventEmitter,MI=function(e){DI(r,e);function r(t){var n=e.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:t},_messageQueue:{value:[]}}),t.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),t.addEventListener("message",function(i){var o=i.data;try{var a=JSON.parse(o);n.emit("message",a)}catch{}}),n.publish({type:"ready"}),n}return r.prototype._publish=function(t){var n=JSON.stringify(t);try{this._dataChannel.send(n)}catch{}},r.prototype.publish=function(t){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(t),!0):(this._publish(t),!0)},r}(II),NI=MI,$I=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),FI=n_,UI=NI,VI=function(e){$I(r,e);function r(t){var n=e.call(this,t.label,t.maxPacketLifeTime,t.maxRetransmits,t.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:t}}),t.binaryType="arraybuffer",t.addEventListener("message",function(i){n.emit("message",i.data)}),t.addEventListener("close",function(){n.emit("close")}),n}return r.prototype.stop=function(){this._dataChannel.close(),e.prototype.stop.call(this)},r.prototype.toDataTransport=function(){return new UI(this._dataChannel)},r}(FI),BI=VI,zI=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WI=Yg,HI=function(e){zI(r,e);function r(t,n){return e.call(this,t,n)||this}return r}(WI),QI=HI,qI=$e.getMediaSections,KI=function(){function e(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return e.prototype.match=function(r){return this._midsToTrackIds.get(r.transceiver.mid)||null},e.prototype.update=function(r){var t=qI(r,"(audio|video)");this._midsToTrackIds=t.reduce(function(n,i){var o=i.match(/^a=mid:(.+)$/m)||[],a=i.match(/^a=msid:.+ (.+)$/m)||[],s=o[1],c=a[1];return s&&c?n.set(s,c):n},this._midsToTrackIds)},e}(),GI=KI,YI=Br.RTCSessionDescription,Ww=$e,JI=Ww.createPtToCodecName,ZI=Ww.getMediaSections;function XI(e){var r={type:e.type};return e.type!=="rollback"&&(r.sdp=eM(e.sdp)),new YI(r)}function eM(e){var r=ZI(e),t=e.split(`\r
m=`)[0];return[t].concat(r.map(tM)).join(`\r
`)}function tM(e){var r=JI(e);e=rM(e,r);var t=nM(r),n=t.get("rtx")||new Set,i=new Set,o=iM(e,r,n,i),a=oM(o,i),s=Array.from(i),c=["h264","vp8","vp9"],u=c.reduce(function(l,d){var f=t.get(d)||new Set;return Array.from(f).reduce(function(g,v){return a.has(v)?g:g.add(v)},l)},new Set);return u.forEach(function(l){if(s.length){var d=s.shift();e=_h(e,d),e=sM(e,d,l)}}),s.forEach(function(l){e=_h(e,l),e=aM(e,l)}),e}function rM(e,r){return Array.from(r.keys()).reduce(function(t,n){var i=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(t.match(i)||[]).slice(r.get(n)==="rtx"?1:0).reduce(function(o,a){var s=new RegExp(`\r
`+a),c=new RegExp(`\r
a=fmtp:`+n+" apt=[0-9]+");return o.replace(s,"").replace(c,"")},t)},e)}function nM(e){var r=new Map;return e.forEach(function(t,n){var i=r.get(t)||new Set;return r.set(t,i.add(n))}),r}function iM(e,r,t,n){return Array.from(t).reduce(function(i,o){var a=new RegExp("a=fmtp:"+o+" apt=(\\d+)"),s=e.match(a);if(!s)return n.add(o),i;var c=Number.parseInt(s[1]);if(!r.has(c))return n.add(o),i;var u=r.get(c);return u==="rtx"?(n.add(o),i):i.set(o,c)},new Map)}function oM(e,r){var t=Array.from(e).reduce(function(n,i){var o=i[0],a=i[1],s=n.get(a)||new Set;return n.set(a,s.add(o))},new Map);return Array.from(t).reduce(function(n,i){var o=i[0],a=Array.from(i[1]);return a.length>1?(a.forEach(function(s){r.add(s)}),n):n.set(o,a[0])},new Map)}function _h(e,r){var t=new RegExp("a=fmtp:"+r+`.*\r
`,"gm");return e.replace(t,"")}function aM(e,r){var t=new RegExp("a=rtpmap:"+r+`.*\r
`,"gm");return e.replace(t,"")}function sM(e,r,t){return e.endsWith(`\r
`)?e+"a=fmtp:"+r+" apt="+t+`\r
`:e+`\r
a=fmtp:`+r+" apt="+t}var cM=XI,uM=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lM=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},dM=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},fM=Fw,_s=Br,pM=_s.RTCIceCandidate,hM=_s.RTCPeerConnection,vM=_s.RTCSessionDescription,mM=_s.getStats,Hw=ie,ws=se,yM=ws.DEFAULT_ICE_GATHERING_TIMEOUT_MS,gM=ws.DEFAULT_LOG_LEVEL,_M=ws.DEFAULT_SESSION_TIMEOUT_SEC,wM=ws.iceRestartBackoffConfig,mt=$e,SM=mt.addOrRewriteNewTrackIds,kM=mt.addOrRewriteTrackIds,Qw=mt.createCodecMapForMediaSection,wh=mt.disableRtx,Lo=mt.enableDtxForOpus,TM=mt.filterLocalCodecs,yi=mt.getMediaSections,Sh=mt.removeSSRCAttributes,bM=mt.revertSimulcast,EM=mt.setCodecPreferences,CM=mt.setSimulcast,PM=Wr,qw=V,wc=qw.MediaClientLocalDescFailedError,Sc=qw.MediaClientRemoteDescFailedError,ro=U,OM=ro.buildLogLevels,RM=ro.getPlatform,xM=ro.isChromeScreenShareTrack,LM=ro.oncePerTick,jM=ro.defer,AM=RI,DM=AI,IM=BI,MM=QI,NM=$n,$M=Ut,FM=GI,kh=cM,Od=Hw.guessBrowser(),UM=RM(),VM=/android/.test(UM),BM=Od==="chrome",kr=Od==="firefox",zM=Od==="safari",WM=0,HM={open:["closed","updating"],updating:["closed","open"],closed:[]},QM=function(e){uM(r,e);function r(t,n,i,o){var a=e.call(this,"open",HM)||this;o=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:xM,iceServers:[],logLevel:gM,offerOptions:{},revertSimulcast:bM,sessionTimeout:_M*1e3,setCodecPreferences:EM,setSimulcast:CM,Backoff:fM,IceConnectionMonitor:DM,RTCIceCandidate:pM,RTCPeerConnection:hM,RTCSessionDescription:vM,Timeout:PM},o);var s=Ch(o),c=OM(o.logLevel),u=o.RTCPeerConnection;o.enableDscp===!0&&(o.chromeSpecificConstraints=o.chromeSpecificConstraints||{},o.chromeSpecificConstraints.optional=o.chromeSpecificConstraints.optional||[],o.chromeSpecificConstraints.optional.push({googDscp:!0}));var l=o.log?o.log.createLog("webrtc",a):new $M("webrtc",a,c,o.loggerName),d=new u(s,o.chromeSpecificConstraints);o.dummyAudioMediaStreamTrack&&d.addTrack(o.dummyAudioMediaStreamTrack),Object.defineProperties(a,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:o.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:o.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new o.Timeout(function(){return a._handleIceGatheringTimeout()},yM,!1)},_iceRestartBackoff:{value:new o.Backoff(wM)},_instanceId:{value:++WM},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:l},_eventObserver:{value:o.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new o.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:o.offerOptions},_onEncodingParametersChanged:{value:LM(function(){a._needsAnswer||Kw(a)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(g){var v=g.codec;return v!=="opus"})||i.audio.some(function(g){var v=g.codec,_=g.dtx;return v==="opus"&&_})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new o.Timeout(function(){l.debug("ICE reconnect timed out"),a.close()},o.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new AM},_setCodecPreferences:{value:kr&&VM&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(g){return g}:o.setCodecPreferences},_setSimulcast:{value:o.setSimulcast},_revertSimulcast:{value:o.revertSimulcast},_RTCIceCandidate:{value:o.RTCIceCandidate},_RTCPeerConnection:{value:o.RTCPeerConnection},_RTCSessionDescription:{value:o.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:t}}),n.on("changed",a._onEncodingParametersChanged),d.addEventListener("connectionstatechange",a._handleConnectionStateChange.bind(a)),d.addEventListener("datachannel",a._handleDataChannelEvent.bind(a)),d.addEventListener("icecandidate",a._handleIceCandidateEvent.bind(a)),d.addEventListener("iceconnectionstatechange",a._handleIceConnectionStateChange.bind(a)),d.addEventListener("icegatheringstatechange",a._handleIceGatheringStateChange.bind(a)),d.addEventListener("signalingstatechange",a._handleSignalingStateChange.bind(a)),d.addEventListener("track",a._handleTrackEvent.bind(a));var f=a;return a.on("stateChanged",function g(v){v==="closed"&&(f.removeListener("stateChanged",g),f._dataChannels.forEach(function(_,w){f.removeDataTrackSender(w)}))}),a}return r.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},r.prototype.setEffectiveAdaptiveSimulcast=function(t){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",t),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=t)})},Object.defineProperty(r.prototype,"_shouldApplySimulcast",{get:function(){if(!BM&&!zM)return!1;var t=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?yi(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var t=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return t&&t.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),r.prototype._maybeUpdateEncodings=function(t,n,i){if(i===void 0&&(i=!1),t.kind!=="video"||t.readyState==="ended")return!1;var o=t.getSettings(),a=o.height,s=o.width;if(typeof a!="number"||typeof s!="number")return!1;var c=Hw.guessBrowser();return c==="safari"||c==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(t,n,i),!0):!1},r.prototype._updateEncodings=function(t,n,i){if(this._isChromeScreenShareTrack(t)){var o=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(g,v){var _=o[v];_?(g.scaleResolutionDownBy=_.scaleResolutionDownBy,i&&delete g.active):(g.active=!1,delete g.scaleResolutionDownBy)})}else{var a=t.getSettings(),s=a.width,c=a.height,u=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],l=s*c,d=u.find(function(g){return l>=g.pixels}),f=Math.min(n.length,d.maxActiveLayers);n.forEach(function(g,v){var _=v<f;_?(g.scaleResolutionDownBy=1<<f-v-1,i&&(g.active=!0)):(g.active=!1,delete g.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(g,v){var _=g.active,w=g.scaleResolutionDownBy;return"["+v+": "+_+", "+(w||0)+"]"}).join(", "))},r.prototype._addIceCandidate=function(t){var n=this;return Promise.resolve().then(function(){return t=new n._RTCIceCandidate(t),n._peerConnection.addIceCandidate(t)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate "+(t?'"'+t.candidate+'"':"null")+": "+i.message)})},r.prototype._addIceCandidates=function(t){return Promise.all(t.map(this._addIceCandidate,this)).then(function(){})},r.prototype._addOrUpdateTransceiver=function(t){var n=this,i=JM(this,t.kind);if(i&&i.sender){var o=i.sender.track?i.sender.track.id:null;return o&&this._log.warn("Reusing transceiver: "+i.mid+"] "+o+" => "+t.id),this._replaceTrackPromises.set(i,i.sender.replaceTrack(t).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(t)},r.prototype._checkIceBox=function(t){var n=Eh(t);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},r.prototype._answer=function(t){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(t)}).catch(function(){throw new Sc}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){kr?i=new n._RTCSessionDescription({sdp:wh(i.sdp),type:i.type}):i=kh(i);var o=Sh(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var a=o;o=n._setSimulcast(a,n._trackIdsToAttributes),o=n._revertSimulcast(o,a,t.sdp)}return o=o.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:o})}).then(function(){return n._checkIceBox(t)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var o=i instanceof Sc?i:new wc;throw n._publishMediaWarning({message:"Failed to _answer",code:o.code,error:i}),o})},r.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},r.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},r.prototype._handleDataChannelEvent=function(t){var n=this,i=t.channel,o=new IM(i);this._dataTrackReceivers.add(o),i.addEventListener("close",function(){n._dataTrackReceivers.delete(o)}),this.emit("trackAdded",o)},r.prototype._handleGlare=function(t){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(t)}).then(function(i){return i?Promise.resolve():n._offer()})},r.prototype._publishMediaWarning=function(t){var n=t.message,i=t.code,o=t.error,a=t.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:o.message,sdp:a})}})},r.prototype._handleIceCandidateEvent=function(t){t.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(t.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};t.candidate||(n.ice.complete=!0),this._isIceLite&&t.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},r.prototype._handleIceConnectionStateChange=function(){var t=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),o=this._log;o.debug('ICE connection state is "'+n+'"'),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(o.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&o.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){t._iceConnectionMonitor.stop(),!t._shouldRestartIce&&!t._isRestartingIce&&(o.warn("ICE Connection Monitor detected inactivity"),t._isIceConnectionInactive=!0,t._initiateIceRestartBackoff(),t.emit("iceConnectionStateChanged"),t.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},r.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},r.prototype._handleIceGatheringStateChange=function(){var t=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'+t+'"');var i=this._iceGatheringTimeout,o=i.delay,a=i.isSet;t==="gathering"&&!this._didGenerateLocalCandidates&&!a&&(n.debug("Starting ICE gathering timeout: "+o),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},r.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},r.prototype._handleTrackEvent=function(t){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new FM,this._trackMatcher.update(i);var o=t.track,a=this._trackMatcher.match(t)||o.id,s=new MM(a,o);this._mediaTrackReceivers.forEach(function(c){c.track.id===s.track.id&&n._mediaTrackReceivers.delete(c)}),this._mediaTrackReceivers.add(s),o.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}),this.emit("trackAdded",s)},r.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var t=this._log;t.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,o=n.isSet;o||(t.debug("Starting ICE reconnect timeout: "+i),this._iceReconnectTimeout.start()),this.offer().catch(function(a){t.error("offer failed in _initiateIceRestart with: "+a.message)})}},r.prototype._initiateIceRestartBackoff=function(){var t=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return t._initiateIceRestart()}))},r.prototype._maybeReoffer=function(t){var n=this._shouldOffer;if(t&&t.sdp){var i=this._peerConnection.getSenders().filter(function(u){return u.track});n=["audio","video"].reduce(function(u,l){var d=yi(t.sdp,l,"(sendrecv|sendonly)"),f=i.filter(KM.bind(null,l));return u||d.length<f.length},n);var o=this._dataChannels.size>0,a=yi(t.sdp,"application").length>0,s=o&&!a;n=n||s}var c=n?this._offer():Promise.resolve();return c.then(function(){return n})},r.prototype._offer=function(){var t=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return t._peerConnection.createOffer(n)}).catch(function(i){var o=new wc;throw t._publishMediaWarning({message:"Failed to create offer",code:o.code,error:i}),o}).then(function(i){kr?i=new t._RTCSessionDescription({sdp:wh(i.sdp),type:i.type}):i=kh(i);var o=Sh(i.sdp,["mslabel","label"]);o=t._peerConnection.remoteDescription?TM(o,t._peerConnection.remoteDescription.sdp):o;var a=t._setCodecPreferences(o,t._preferredAudioCodecs,t._preferredVideoCodecs);return t._shouldOffer=!1,t._negotiationRole||(t._negotiationRole="offerer"),t._shouldApplySimulcast&&(t._localDescriptionWithoutSimulcast={type:"offer",sdp:a},a=t._setSimulcast(a,t._trackIdsToAttributes)),t._setLocalDescription({type:"offer",sdp:a})})},r.prototype._getMediaTrackSenderId=function(t){var n=Array.from(this._rtpSenders.keys()).find(function(i){var o=i.track.id;return o===t});return n?n.id:t},r.prototype._addOrRewriteLocalTrackIds=function(t){var n=this,i=this._peerConnection.getTransceivers(),o=i.filter(function(f){var g=f.sender,v=f.stopped;return!v&&g&&g.track}),a=o.filter(function(f){var g=f.mid;return g}),s=new Map(a.map(function(f){var g=f.mid,v=f.sender;return[g,n._getMediaTrackSenderId(v.track.id)]})),c=kM(t.sdp,s),u=o.filter(function(f){var g=f.mid;return!g}),l=new Map(["audio","video"].map(function(f){return[f,u.filter(function(g){var v=g.sender;return v.track.kind===f}).map(function(g){var v=g.sender;return n._getMediaTrackSenderId(v.track.id)})]})),d=SM(c,s,l);return new this._RTCSessionDescription({sdp:d,type:t.type})},r.prototype._rollbackAndApplyOffer=function(t){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(t)})},r.prototype._setLocalDescription=function(t){var n=this;return t.type!=="rollback"&&this._shouldApplyDtx&&(t=new this._RTCSessionDescription({sdp:Lo(t.sdp),type:t.type})),this._peerConnection.setLocalDescription(t).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+t.type+'" failed with the error "'+i.message+'".',i);var o=new wc,a={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+t.type+'" failed',code:o.code,error:i};throw t.sdp&&(n._log.warn("The SDP was "+t.sdp),a.sdp=t.sdp),n._publishMediaWarning(a),o}).then(function(){t.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(t),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:Lo(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],t.type==="offer"?n._descriptionRevision++:t.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,Ph(n)),n._localUfrag=Eh(t),n.emit("description",n.getState()))})},r.prototype._setRemoteDescription=function(t){var n=this;return t.sdp&&(t.sdp=this._setCodecPreferences(t.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?t.sdp=Lo(t.sdp):t.sdp=Lo(t.sdp,[]),kr&&(t.sdp=GM(t.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(t.sdp))),t=new this._RTCSessionDescription(t),Promise.resolve().then(function(){if(t.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),o=!!i&&i.adaptiveSimulcast===!1,a=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,t.sdp,o);if(n._localDescriptionWithoutSimulcast=null,a!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:a})}}).then(function(){return n._peerConnection.setRemoteDescription(t)}).then(function(){t.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),Ph(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+t.type+'" failed with the error "'+i.message+'".',i),t.sdp&&n._log.warn("The SDP was "+t.sdp),i})},r.prototype._updateDescription=function(t){var n=this;switch(t.type){case"answer":case"pranswer":if(t.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=t.revision;break;case"close":return this._close();case"create-offer":return t.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=t,Promise.resolve()):(this._descriptionRevision=t.revision,this._offer());case"offer":return t.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=t,Promise.resolve()):(this._descriptionRevision=t.revision,this._handleGlare(t)):(this._descriptionRevision=t.revision,this._answer(t).then(function(){}))}var i=t.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(t)}).catch(function(o){var a=new Sc;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+t.type+'" failed',code:a.code,error:o,sdp:t.sdp}),a}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(t)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},r.prototype._updateIce=function(t){var n=this._remoteCandidates.update(t);return this._addIceCandidates(n)},r.prototype.addDataTrackSender=function(t){if(!this._dataChannels.has(t))try{var n={ordered:t.ordered};t.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=t.maxPacketLifeTime),t.maxRetransmits!==null&&(n.maxRetransmits=t.maxRetransmits);var i=this._peerConnection.createDataChannel(t.id,n);t.addDataChannel(i),this._dataChannels.set(t,i)}catch(o){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+t.id+'": '+o.message)}},r.prototype._handleQueuedPublisherHints=function(){var t=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var o=n.deferred,a=n.encodings;t._mediaTrackSenderToPublisherHints.delete(i),t._setPublisherHint(i,a).then(function(s){return o.resolve(s)}).catch(function(s){return o.reject(s)})})},r.prototype._setPublisherHint=function(t,n){var i=this;if(kr)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(t)){var o=this._mediaTrackSenderToPublisherHints.get(t);o.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(t)}var a=this._rtpSenders.get(t);if(!a)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=jM();return this._mediaTrackSenderToPublisherHints.set(t,{deferred:s,encodings:n}),s.promise}var c=a.getParameters();return n!==null&&n.forEach(function(u){var l=u.enabled,d=u.layer_index;c.encodings.length>d?(i._log.debug("layer:"+d+", active:"+c.encodings[d].active+" => "+l),c.encodings[d].active=l):i._log.warn("invalid layer:"+d+", active:"+l)}),this._maybeUpdateEncodings(a.track,c.encodings,n===null),a.setParameters(c).then(function(){return"OK"}).catch(function(u){return i._log.error("Failed to apply publisher hints:",u),"COULD_NOT_APPLY_HINT"})},r.prototype.addMediaTrackSender=function(t){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(t))){var i=this._addOrUpdateTransceiver(t.track),o=i.sender;t.addSender(o,function(a){return n._setPublisherHint(t,a)}),this._rtpNewSenders.add(o),this._rtpSenders.set(t,o)}},r.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},r.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},r.prototype.getState=function(){if(!this._localDescription)return null;var t=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:t};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},r.prototype.offer=function(){var t=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){t.transition("updating",n);var i=t._needsAnswer||t._isRestartingIce?Promise.resolve():t._offer();return i.then(function(){t.tryTransition("open",n)},function(o){throw t.tryTransition("open",n),o})})},r.prototype.removeDataTrackSender=function(t){var n=this._dataChannels.get(t);n&&(t.removeDataChannel(n),this._dataChannels.delete(t),n.close())},r.prototype.removeMediaTrackSender=function(t){var n=this._rtpSenders.get(t);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),t.removeSender(n),this._mediaTrackSenderToPublisherHints.has(t)){var i=this._mediaTrackSenderToPublisherHints.get(t);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(t)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(t)}},r.prototype.setConfiguration=function(t){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(Ch(t))},r.prototype.setIceReconnectTimeout=function(t){return this._iceReconnectTimeout.setDelay(t),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},r.prototype.update=function(t){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var o=[];return t.ice&&o.push(n._updateIce(t.ice)),t.description&&o.push(n._updateDescription(t.description)),Promise.all(o).then(function(){n.tryTransition("open",i)},function(a){throw n.tryTransition("open",i),a})})},r.prototype.getStats=function(){var t=this;return mM(this._peerConnection).then(function(n){return qM(t,n)})},r}(NM);function Th(e,r){var t=e._getMediaTrackSenderId(r.trackId);return Object.assign(r,{trackId:t})}function bh(e,r){var t=dM([],lM(e._mediaTrackReceivers)).find(function(i){return i.track.id===r.trackId}),n=t?t.id:null;return Object.assign(r,{trackId:n})}function qM(e,r){return Object.assign(r,{remoteAudioTrackStats:r.remoteAudioTrackStats.map(function(t){return bh(e,t)}),remoteVideoTrackStats:r.remoteVideoTrackStats.map(function(t){return bh(e,t)}),localAudioTrackStats:r.localAudioTrackStats.map(function(t){return Th(e,t)}),localVideoTrackStats:r.localVideoTrackStats.map(function(t){return Th(e,t)})})}function Eh(e){if(e.sdp){var r=e.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(r)return r[1]}return null}function Ch(e){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},e)}function KM(e,r){var t=r.track;return t&&t.kind===e&&t.readyState!=="ended"}function GM(e){return e.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function YM(e,r){return!e.stopped&&!r._replaceTrackPromises.has(e)&&["inactive","recvonly"].includes(e.direction)}function JM(e,r){var t={audio:e._preferredAudioCodecs.map(function(a){var s=a.codec;return s.toLowerCase()}),video:e._preferredVideoCodecs.map(function(a){var s=a.codec;return s.toLowerCase()})}[r],n=e._recycledTransceivers[r],i=t.find(function(a){return e._localCodecs.has(a)});if(!i)return n.shift();var o=n.find(function(a){var s=e._remoteCodecMaps.get(a.mid);return s&&s.has(i)});return o&&n.splice(n.indexOf(o),1),o}function ZM(e){var r=e._peerConnection.localDescription;!r||!r.sdp||yi(r.sdp).forEach(function(t){var n=Qw(t);n.forEach(function(i,o){return e._localCodecs.add(o)})})}function XM(e){var r=e._peerConnection.remoteDescription;!r||!r.sdp||yi(r.sdp).forEach(function(t){var n=t.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],o=Qw(t);e._remoteCodecMaps.set(i,o)}})}function eN(e){e._recycledTransceivers.audio=[],e._recycledTransceivers.video=[],e._peerConnection.getTransceivers().forEach(function(r){if(YM(r,e)){var t=r.receiver.track;e._recycledTransceivers[t.kind].push(r)}})}function Ph(e){eN(e),ZM(e),XM(e),Kw(e).then(function(){e._handleQueuedPublisherHints()})}function Kw(e){var r=e._encodingParameters,t=r.maxAudioBitrate,n=r.maxVideoBitrate,i=new Map([["audio",t],["video",n]]),o=[];return e._peerConnection.getSenders().filter(function(a){return a.track}).forEach(function(a){var s=i.get(a.track.kind),c=a.getParameters();s===null||s===0?tN(c):e._isChromeScreenShareTrack(a.track)?e._log.warn("Not setting maxBitrate for "+a.track.kind+" Track "+a.track.id+" because it appears to be screen share track: "+a.track.label):rN(c,s),!kr&&c.encodings.length>0&&(a.track.kind==="audio"?c.encodings[0].priority="high":e._isChromeScreenShareTrack(a.track)&&(c.encodings[0].priority="medium"),e._enableDscp&&(c.encodings[0].networkPriority="high"));var u=e._rtpNewSenders.has(a);e._maybeUpdateEncodings(a.track,c.encodings,u),e._rtpNewSenders.delete(a);var l=a.setParameters(c).catch(function(d){e._log.warn("Error while setting encodings parameters for "+a.track.kind+" Track "+a.track.id+": "+(d.message||d.name))});o.push(l)}),Promise.all(o)}function tN(e){Array.isArray(e.encodings)&&e.encodings.forEach(function(r){return delete r.maxBitrate})}function rN(e,r){kr?e.encodings=[{maxBitrate:r}]:e.encodings.forEach(function(t){t.maxBitrate=r})}var nN=QM,iN=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gw=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Yw=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},oN=ie.guessBrowser,aN=nN,sN=Jg,cN=Kg,er=U,uN=V.MediaConnectionError,lN=oN()==="firefox",dN=function(e){iN(r,e);function r(t,n,i){var o=e.call(this)||this;i=Object.assign({audioContextFactory:lN?ls():null,PeerConnectionV2:aN},i);var a=i.audioContextFactory?i.audioContextFactory.getOrCreate(o):null,s=a?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(o,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:er.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:a?new sN(fN(a)):null},_encodingParameters:{value:t},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),o}return r.prototype.setEffectiveAdaptiveSimulcast=function(t){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(t)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=t)})},Object.defineProperty(r.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),r.prototype._closeAbsentPeerConnections=function(t){var n=new Set(t.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},r.prototype._getConfiguration=function(){return this._configurationDeferred.promise},r.prototype._getOrCreate=function(t,n){var i=this,o=this,a=this._peerConnections.get(t);if(!a){var s=this._PeerConnectionV2,c=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{a=new s(t,this._encodingParameters,this._preferredCodecs,c)}catch{throw new uN}this._peerConnections.set(a.id,a),a.on("candidates",this.queue.bind(this,"candidates")),a.on("description",this.queue.bind(this,"description")),a.on("trackAdded",this.queue.bind(this,"trackAdded")),a.on("stateChanged",function u(l){l==="closed"&&(a.removeListener("stateChanged",u),o._dataTrackSenders.forEach(function(d){return a.removeDataTrackSender(d)}),o._mediaTrackSenders.forEach(function(d){return a.removeMediaTrackSender(d)}),o._peerConnections.delete(a.id),o._closedPeerConnectionIds.add(a.id),Oh(o),jo(o))}),a.on("connectionStateChanged",function(){return Oh(i)}),a.on("iceConnectionStateChanged",function(){return jo(i)}),this._dataTrackSenders.forEach(a.addDataTrackSender,a),this._mediaTrackSenders.forEach(a.addMediaTrackSender,a),jo(this)}return a},r.prototype.close=function(){return this._peerConnections.forEach(function(t){t.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),jo(this),this},r.prototype.createAndOffer=function(){var t=this;return this._getConfiguration().then(function(n){var i;do i=er.makeUUID();while(t._peerConnections.has(i));return t._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return t})},r.prototype.getTrackReceivers=function(){return er.flatMap(this._peerConnections,function(t){return t.getTrackReceivers()})},r.prototype.getStates=function(){var t=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&t.push(i)}),t},r.prototype.setConfiguration=function(t){return this._configuration&&(this._configurationDeferred=er.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(t)})),this._configuration=t,this._configurationDeferred.resolve(t),this},r.prototype.setIceReconnectTimeout=function(t){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(t)}),this._sessionTimeout=t),this},r.prototype.setTrackSenders=function(t){var n=new Set(t.filter(function(a){return a.kind==="data"})),i=new Set(t.filter(function(a){return a&&(a.kind==="audio"||a.kind==="video")})),o=vN(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,pN(this,o),this},r.prototype.update=function(t,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(t),this._getConfiguration().then(function(o){return Promise.all(t.map(function(a){if(i._closedPeerConnectionIds.has(a.id))return null;var s=i._getOrCreate(a.id,o);return s.update(a)}))}).then(function(){return i})},r.prototype.getStats=function(){var t=Array.from(this._peerConnections.values());return Promise.all(t.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},r}(cN);function fN(e){var r=e.createMediaStreamDestination();return r.stream.getAudioTracks()[0]}function pN(e,r){(r.data.add.size||r.data.remove.size||r.media.add.size||r.media.remove.size)&&e._peerConnections.forEach(function(t){r.data.remove.forEach(t.removeDataTrackSender,t),r.media.remove.forEach(t.removeMediaTrackSender,t),r.data.add.forEach(t.addDataTrackSender,t),r.media.add.forEach(t.addMediaTrackSender,t),(r.media.add.size||r.media.remove.size||r.data.add.size&&!t.isApplicationSectionNegotiated)&&t.offer()})}function hN(e,r){var t=er.difference(r,e._dataTrackSenders),n=er.difference(e._dataTrackSenders,r);return{add:t,remove:n}}function vN(e,r,t){return{data:hN(e,r),media:mN(e,t)}}function mN(e,r){var t=er.difference(r,e._mediaTrackSenders),n=er.difference(e._mediaTrackSenders,r);return{add:t,remove:n}}var Aa={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},kc;function yN(){return Object.keys(Aa).reduce(function(e,r){var t;return Object.assign(e,(t={},t[Aa[r]]=r,t))},{})}function Jw(e){return e.length?(kc=kc||yN(),e.reduce(function(r,t){return kc[Math.max(Aa[r],Aa[t])]})):"new"}function jo(e){e._lastIceConnectionState=e.iceConnectionState,e._iceConnectionState=Jw(Yw([],Gw(e._peerConnections.values())).map(function(r){return r.iceConnectionState})),e.iceConnectionState!==e._lastIceConnectionState&&e.emit("iceConnectionStateChanged")}function Oh(e){e._lastConnectionState=e.connectionState,e._connectionState=Jw(Yw([],Gw(e._peerConnections.values())).map(function(r){return r.connectionState})),e.connectionState!==e._lastConnectionState&&e.emit("connectionStateChanged")}var gN=dN,_N=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wN=Ne,SN=0,kN=function(e){_N(r,e);function r(t,n,i){var o=e.call(this)||this;return Object.defineProperties(o,{_instanceId:{value:SN++},channel:{value:n},_log:{value:i.log.createLog("default",o)},_getReceiver:{value:t},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),o}return Object.defineProperty(r.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},r.prototype.setup=function(t){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",t);var i=this._getReceiver(t).then(function(o){if(o.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=o.toDataTransport(),n.emit("ready",n._transport)}catch(a){n._log.error("Failed to toDataTransport: "+a.message)}o.once("close",function(){return n._teardown()})}});this._receiverPromise=i},r.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},r}(wN),Vn=kN,TN=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bN=Vn,EN=function(e){TN(r,e);function r(t,n){var i=e.call(this,t,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"active_speaker":i._setLoudestParticipantSid(a.participant);break}})}),i}return Object.defineProperty(r.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),r.prototype._setLoudestParticipantSid=function(t){this.loudestParticipantSid!==t&&(this._loudestParticipantSid=t,this.emit("updated"))},r}(bN),CN=EN,PN=function(){function e(r,t,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:t},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:r}})}return e.of=function(r,t){var n=(t.timestamp-r.timestamp)/1e3,i=t.bytesSent-r.bytesSent,o=t.bytesReceived-r.bytesReceived,a=n>0?i/n*8:0,s=n>0?o/n*8:0,c=t.availableOutgoingBitrate,u=t.currentRoundTripTime;return new e(a,s,c,u)},e}(),ON=PN,Tc=ON,RN=function(){function e(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new Tc(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(r){var t=this.lastStats;if(this.lastStats=r,t){var n=t.id===r.id?Tc.of(t,r):new Tc(0,0);this.lastReport=n}return this.lastReport},e}(),xN=RN;function LN(e){return e=e.filter(function(r){return typeof r=="number"}),e.length<1?void 0:e.reduce(function(r,t){return t+r})/e.length}var Zw=LN,jN=function(){function e(r,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:r},trackId:{enumerable:!0,value:t},bitrate:{enumerable:!0,value:n}})}return e}(),Xw=jN;function AN(e){return e.reduce(function(r,t){return typeof t=="number"?t+r:r},0)}var eS=AN,DN=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rh=Zw,IN=Xw,MN=eS,NN=function(e){DN(r,e);function r(t,n,i,o,a,s,c){var u=e.call(this,t,n,i)||this,l=a>0?o/a:0;return Object.defineProperties(u,{deltaPacketsLost:{enumerable:!0,value:o},deltaPacketsReceived:{enumerable:!0,value:a},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:c},phonyFractionLost:{enumerable:!0,value:l}}),u}return r.of=function(t,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,a=i.bytesReceived-n.bytesReceived,s=o>0?a/o*8:0,c=Math.max(i.packetsLost-n.packetsLost,0),u=i.packetsReceived-n.packetsReceived,l=i.fractionLost,d=i.jitter;return new r(n.id,t,s,c,u,l,d)},r.summarize=function(t){var n=t.map(function(s){return s.summarize()}),i=MN(n.map(function(s){return s.bitrate})),o=Rh(n.map(function(s){return s.fractionLost})),a=Rh(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:o,jitter:a}},r.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},r}(IN),tS=NN,$N=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),FN=Zw,UN=Xw,VN=eS,BN=function(e){$N(r,e);function r(t,n,i,o){var a=e.call(this,t,n,i)||this;return Object.defineProperties(a,{rtt:{enumerable:!0,value:o}}),a}return r.of=function(t,n,i,o){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,c=a>0?s/a*8:0,u=o&&typeof o.roundTripTime=="number"?o.roundTripTime/1e3:void 0;return new r(n.id,t,c,u)},r.summarize=function(t){var n=VN(t.map(function(o){return o.bitrate})),i=FN(t.map(function(o){return o.rtt}));return{bitrate:n,rtt:i}},r}(UN),rS=BN,bc=tS,Ec=rS,zN=function(){function e(r,t,n){Object.defineProperties(this,{ice:{enumerable:!0,value:r},audio:{enumerable:!0,value:t},video:{enumerable:!0,value:n}})}return e.prototype.summarize=function(){var r=this.audio.send.concat(this.video.send),t=Ec.summarize(r),n=this.audio.recv.concat(this.video.recv),i=bc.summarize(n);return{ice:this.ice,send:t,recv:i,audio:{send:Ec.summarize(this.audio.send),recv:bc.summarize(this.audio.recv)},video:{send:Ec.summarize(this.video.send),recv:bc.summarize(this.video.recv)}}},e}(),WN=zN,HN=function(){function e(r,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:r,writable:!0},trackId:{enumerable:!0,value:t,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return e}(),nS=HN,QN=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qN=tS,KN=nS,GN=function(e){QN(r,e);function r(t,n){var i=e.call(this,n.id,t,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return r.prototype.next=function(t,n){var i=this.lastStats;this.lastStats=n,this.trackId=t;var o=qN.of(t,i,n);return this.lastReport=o,o},r}(KN),YN=GN,JN=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ZN=nS,XN=rS,e2=function(e){JN(r,e);function r(t,n){var i=e.call(this,n.id,t,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return r.prototype.next=function(t,n,i){var o=this.lastStats;this.lastStats=n,this.trackId=t;var a=XN.of(t,o,n,i);return this.lastReport=a,a},r}(ZN),t2=e2,si=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ao=m&&m.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},Vi=m&&m.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},iS=ie.guessBrowser,r2=xN,n2=WN,i2=YN,o2=t2,a2=function(){function e(r){Object.defineProperties(this,{pc:{enumerable:!0,value:r},ice:{enumerable:!0,value:new r2},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(){var r=this,t=iS()==="firefox"?u2(this):l2(this);return t.then(function(){var n=Ao([],si(r.audio.send.values())),i=Ao([],si(r.video.send.values())),o=Ao([],si(r.audio.recv.values())),a=Ao([],si(r.video.recv.values())),s=new n2(r.ice.lastReport,{send:n.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:o.map(function(c){return c.lastReport}).filter(function(c){return c})},{send:i.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:a.map(function(c){return c.lastReport}).filter(function(c){return c})});return r.lastReport=s,s})},e}();function xh(e){return Promise.all(e.map(function(r){var t=r.track.id;return r.getStats().then(function(n){var i,o;try{for(var a=Vi(n.values()),s=a.next();!s.done;s=a.next()){var c=s.value;c.type==="inbound-rtp"&&(c.id=t+"-"+c.id)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return[t,n]})})).then(function(r){return new Map(r)})}function oS(e,r,t,n,i){var o=r[n.mediaType];if(!i){var a=t.get(n.trackId);a&&(i=a.trackIdentifier)}if(o&&i){if(o.has(n.id))return o.get(n.id);var s=new e(i,n);o.set(n.id,s)}return null}function Rd(e){return{audio:e.audio.send,video:e.video.send}}function xd(e){return{audio:e.audio.recv,video:e.video.recv}}function s2(e,r,t,n){return oS(o2,Rd(e),r,t,n)}function c2(e,r,t,n){return oS(i2,xd(e),r,t,n)}function aS(e){return{audio:new Set(e.audio.send.keys()),video:new Set(e.video.send.keys())}}function sS(e){return{audio:new Set(e.audio.recv.keys()),video:new Set(e.video.recv.keys())}}function cS(e,r,t,n){var i,o;try{for(var a=Vi(r.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="outbound-rtp"&&!c.isRemote){if(iS()!=="firefox"&&!c.trackId)continue;var u=t[c.mediaType];u&&u.delete(c.id);var l=s2(e,r,c,n);if(l){var d=r.get(c.remoteId);l.next(n||l.trackId,c,d)}}}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function uS(e,r,t,n){var i,o;try{for(var a=Vi(r.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="inbound-rtp"&&!c.isRemote){var u=t[c.mediaType];u&&u.delete(c.id);var l=c2(e,r,c,n);l&&l.next(n||l.trackId,c)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function Da(e,r){var t=function(i){var o=e[i],a=r[i];a.forEach(function(s){return o.delete(s)})};for(var n in r)t(n)}function lS(e,r){var t,n,i,o,a;try{for(var s=Vi(r.values()),c=s.next();!c.done;c=s.next()){var u=c.value;u.type==="transport"&&(a=r.get(u.selectedCandidatePairId))}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(a){e.next(a);return}try{for(var l=Vi(r.values()),d=l.next();!d.done;d=l.next()){var u=d.value;u.type==="candidate-pair"&&u.nominated&&(!("selected"in u)||u.selected)&&e.next(u)}}catch(f){i={error:f}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}function u2(e){var r=e.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),t=e.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([xh(r),xh(t),e.pc.getStats()]).then(function(n){var i=si(n,3),o=i[0],a=i[1],s=i[2],c=Rd(e),u=aS(e);o.forEach(function(f,g){return cS(e,f,u,g)}),Da(c,u);var l=xd(e),d=sS(e);a.forEach(function(f,g){return uS(e,f,d,g)}),Da(l,d),lS(e.ice,s)})}function l2(e){return e.pc.getStats().then(function(r){var t=Rd(e),n=aS(e);cS(e,r,n),Da(t,n);var i=xd(e),o=sS(e);uS(e,r,o),Da(i,o),lS(e.ice,r)})}var d2=a2,f2=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),p2=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},h2=Ne,v2=d2,m2=function(e){f2(r,e);function r(t,n){var i=e.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:t},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(r.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),r.prototype.start=function(){var t=this;this.stop();var n=setTimeout(function(){t._timeout===n&&y2(t).then(function(i){if(t._timeout===n){if(i.length){var o=p2(i,1),a=o[0];t._signaling.put(a)}t.start()}})},200);this._timeout=n},r.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},r}(h2);function y2(e){var r=e._manager._peerConnections?Array.from(e._manager._peerConnections.values()):[],t=r.map(function(o){return o._peerConnection}).filter(function(o){return o.signalingState!=="closed"}),n=t.map(function(o){if(e._factories.has(o))return e._factories.get(o);var a=new v2(o);return e._factories.set(o,a),a}),i=n.map(function(o){return o.next().catch(function(){return null})});return Promise.all(i).then(function(o){return o.filter(function(a){return a}).map(function(a){return a.summarize()})})}var g2=m2,_2=U.defer,w2=function(){function e(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return e.prototype.put=function(r){this._hasValue=!0,this._value=r;var t=this._deferreds.shift();return t&&t.resolve(r),this},e.prototype.take=function(){var r=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var t=_2();return this._deferreds.push(t),t.promise.then(function(n){return r._hasValue=!1,n})},e}(),S2=w2,k2=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T2=Vn,b2=S2,E2=Wr,Lh=5e3,C2=function(e){k2(r,e);function r(t,n,i){var o=e.call(this,t,"network_quality",i)||this;return Object.defineProperties(o,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new b2},_resendTimer:{value:new E2(function(){o._resendTimer.setDelay(o._resendTimer.delay*1.5),o._sendNetworkQualityInputs()},Lh,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),o.on("ready",function(a){a.on("message",function(s){switch(o._log.debug("Incoming: ",s),s.type){case"network_quality":o._handleNetworkQualityMessage(s);break}})}),o._sendNetworkQualityInputs(),o}return Object.defineProperty(r.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),r.prototype._handleNetworkQualityMessage=function(t){var n=this,i=!1,o=null,a=t?t.local:null;typeof a=="number"?(o=a,this._levels=null):typeof a=="object"&&a&&(this._levels=a,o=typeof a.level=="number"?a.level:Math.min(a.audio.send,a.audio.recv,a.video.send,a.video.recv)),o!==null&&this.level!==o&&(this._level=o,i=!0),this._remoteLevels=t&&t.remotes?t.remotes.reduce(function(s,c){var u=n._remoteLevels.get(c.sid)||{};return u.level!==c.level&&(i=!0),s.set(c.sid,c)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay(Lh),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},r.prototype._sendNetworkQualityInputs=function(){var t=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){t._transport&&t._transport.publish(P2(n,t._networkQualityReportLevels))}).finally(function(){t._resendTimer.start()})},r.prototype.put=function(t){this._networkQualityInputs.put(t)},r}(T2);function P2(e,r){return Object.assign({type:"network_quality"},e,r)}var O2=C2,R2=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),x2=Ne.EventEmitter,L2=function(e){R2(r,e);function r(){var t=e.call(this)||this;return Object.defineProperties(t,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),t}return r.prototype.disable=function(){return this.enable(!1)},r.prototype.enable=function(t){return t=typeof t=="boolean"?t:!0,this.isEnabled!==t&&(this._isEnabled=t,this.emit("updated")),this},r}(x2),dS=L2,j2=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),A2=dS,D2=function(e){j2(r,e);function r(){var t=e.call(this)||this;return Object.defineProperties(t,{_revision:{value:1,writable:!0}}),t}return r.prototype.update=function(t){return t.revision<this._revision?this:(this._revision=t.revision,this.enable(t.is_recording))},r}(A2),I2=D2,M2=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),N2=dS,$2=$n,F2=Wr,U2=U.buildLogLevels,V2=se.DEFAULT_LOG_LEVEL,B2=Ut,Ld=V,z2=Ld.MediaConnectionError,W2=Ld.MediaDTLSTransportFailedError,H2=Ld.SignalingConnectionDisconnectedError,Q2=0,q2={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},K2=function(e){M2(r,e);function r(t,n,i,o){var a=this;o=Object.assign({logLevel:V2,RecordingSignaling:N2,Timeout:F2},o);var s=U2(o.logLevel);a=e.call(this,"connected",q2)||this;var c=o.RecordingSignaling,u=new o.Timeout(function(){a._disconnect(a._reconnectingError)},o.sessionTimeout,!1);return Object.defineProperties(a,{_instanceId:{value:Q2++},_log:{value:o.log?o.log.createLog("default",a):new B2("default",a,s,o.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:o},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:u},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new c},sid:{enumerable:!0,value:n}}),a.on("connectionStateChanged",function(){a.connectionState==="failed"&&!["disconnected","failed"].includes(a.iceConnectionState)&&a._disconnect(new W2)}),a.on("iceConnectionStateChanged",function(){return Cc(a)}),a.on("signalingConnectionStateChanged",function(){return Cc(a)}),setTimeout(function(){return Cc(a)}),a}return r.prototype._disconnect=function(t){return this.state!=="disconnected"?(this.preempt("disconnected",null,[t]),!0):!1},r.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},r.prototype.connectParticipant=function(t){var n=this;return t.state==="disconnected"||this.participants.has(t.sid)?!1:(this.participants.set(t.sid,t),t.on("stateChanged",function i(o){o==="disconnected"&&(t.removeListener("stateChanged",i),n.participants.delete(t.sid),n.emit("participantDisconnected",t))}),this.emit("participantConnected",t),!0)},r.prototype.disconnect=function(){return this._disconnect()},r.prototype.setDominantSpeaker=function(t){this.dominantSpeakerSid=t,this.emit("dominantSpeakerChanged")},r}($2);function Cc(e){if(e.state==="disconnected"||e.signalingConnectionState==="disconnected"){e._sessionTimeout.clear();return}var r;e.signalingConnectionState==="reconnecting"?r=e.signalingConnectionState:e.iceConnectionState==="failed"?(e._mediaConnectionIsReconnecting=!0,r="reconnecting"):e.iceConnectionState==="new"||e.iceConnectionState==="checking"?r=e._mediaConnectionIsReconnecting?"reconnecting":"connected":(e._mediaConnectionIsReconnecting=!1,e._reconnectingError=null,e._sessionTimeout.clear(),r="connected"),r!==e.state&&(r==="reconnecting"?(e._reconnectingError=e.signalingConnectionState==="reconnecting"?new H2:new z2,e._sessionTimeout.start(),e.preempt(r,null,[e._reconnectingError])):e.preempt(r))}var fS=K2,G2=function(){function e(r){var t=r.actual,n=t===void 0?null:t,i=r.available,o=i===void 0?null:i,a=r.level,s=a===void 0?null:a;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return e}(),Y2=G2,J2=function(){function e(r){var t=r.fractionLost,n=t===void 0?null:t,i=r.level,o=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:o,enumerable:!0}})}return e}(),Z2=J2,X2=function(){function e(r){var t=r.jitter,n=t===void 0?null:t,i=r.rtt,o=i===void 0?null:i,a=r.level,s=a===void 0?null:a;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return e}(),e$=X2,t$=Y2,r$=Z2,n$=e$,i$=function(){function e(r){var t=r.bandwidth,n=t===void 0?null:t,i=r.fractionLost,o=i===void 0?null:i,a=r.latency,s=a===void 0?null:a;Object.defineProperties(this,{bandwidth:{value:n?new t$(n):null,enumerable:!0},fractionLost:{value:o?new r$(o):null,enumerable:!0},latency:{value:s?new n$(s):null,enumerable:!0}})}return e}(),pS=i$,o$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a$=pS,s$=function(e){o$(r,e);function r(t){return e.call(this,t)||this}return r}(a$),c$=s$,u$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),l$=pS,d$=function(e){u$(r,e);function r(t){return e.call(this,t)||this}return r}(l$),f$=d$,p$=c$,h$=f$,v$=function(){function e(r){var t=r.send,n=r.recv,i=r.sendStats,o=i===void 0?null:i,a=r.recvStats,s=a===void 0?null:a;Object.defineProperties(this,{send:{value:t,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:o?new p$(o):null,enumerable:!0},recvStats:{value:s?new h$(s):null,enumerable:!0}})}return e}(),hS=v$,m$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),y$=hS,g$=function(e){m$(r,e);function r(t){return e.call(this,t)||this}return r}(y$),_$=g$,w$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),S$=hS,k$=function(e){w$(r,e);function r(t){return e.call(this,t)||this}return r}(S$),T$=k$,b$=_$,E$=T$,C$=function(){function e(r){var t=r.level,n=r.audio,i=r.video;Object.defineProperties(this,{level:{value:t,enumerable:!0},audio:{value:n?new b$(n):null,enumerable:!0},video:{value:i?new E$(i):null,enumerable:!0}})}return e}(),P$=C$,O$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R$=$n,x$=P$,L$={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},j$=function(e){O$(r,e);function r(){var t=e.call(this,"connecting",L$)||this;return Object.defineProperties(t,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),t}return Object.defineProperty(r.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),r.prototype.addTrack=function(t){return this.tracks.set(t.id||t.sid,t),this.emit("trackAdded",t),this},r.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},r.prototype.removeTrack=function(t){var n=this.tracks.get(t.id||t.sid);return this.tracks.delete(t.id||t.sid),n&&this.emit("trackRemoved",t),n||null},r.prototype.setNetworkQualityLevel=function(t,n){this._networkQualityLevel!==t&&(this._networkQualityLevel=t,this._networkQualityStats=n&&(n.audio||n.video)?new x$(n):null,this.emit("networkQualityLevelChanged"))},r.prototype.connect=function(t,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=t),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},r.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},r}(R$),jd=j$,A$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),D$=jd,I$=function(e){A$(r,e);function r(t,n){var i=e.call(this)||this;return i.connect(t,n),i}return r}(D$),M$=I$,N$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$$=Ne.EventEmitter,F$=function(e){N$(r,e);function r(t,n,i,o){var a=e.call(this)||this,s=null;return Object.defineProperties(a,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:o,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(c){s===null&&(s=c)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:t}}),a}return Object.defineProperty(r.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),r.prototype.disable=function(){return this.enable(!1)},r.prototype.enable=function(t){return t=typeof t=="boolean"?t:!0,this.isEnabled!==t&&(this._isEnabled=t,this.emit("updated")),this},r.prototype.setTrackTransceiver=function(t){return t=t||null,this.trackTransceiver!==t&&(this._trackTransceiver=t,this.emit("updated")),this},r.prototype.setSid=function(t){return this.sid===null&&(this._sid=t,this.emit("updated")),this},r}($$),vS=F$,U$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),V$=vS,B$=function(e){U$(r,e);function r(t,n,i,o,a,s){var c=e.call(this,n,i,o,a)||this;return Object.defineProperties(c,{_isSwitchedOff:{value:s,writable:!0}}),c.setSid(t),c}return Object.defineProperty(r.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),r.prototype.subscribeFailed=function(t){return this.error||(this._error=t,this.emit("updated")),this},r.prototype.setPriority=function(t){return this._priority!==t&&(this._priority=t,this.emit("updated")),this},r.prototype.setSwitchedOff=function(t){return this._isSwitchedOff!==t&&(this._isSwitchedOff=t,this.emit("updated")),this},r}(V$),z$=B$,W$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),H$=z$,Q$=function(e){W$(r,e);function r(t,n){return e.call(this,t.sid,t.name,t.kind,t.enabled,t.priority,n)||this}return r.prototype.update=function(t){return this.enable(t.enabled),this.setPriority(t.priority),this},r}(H$),q$=Q$,K$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G$=M$,Y$=q$,J$=function(e){K$(r,e);function r(t,n,i,o,a,s){var c=e.call(this,t.sid,t.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:Y$},s),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(u,l){return i(u,l)}},updateTrackRenderHint:{value:function(u,l){return o(u,l)}},clearTrackHint:{value:function(u){return a(u)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(t)}return r.prototype._getOrCreateTrack=function(t){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(t.sid);if(!i){var o=this._getInitialTrackSwitchOffState(t.sid);i=new n(t,o),this.addTrack(i)}return i},r.prototype.update=function(t){var n=this;if(this.revision!==null&&t.revision<=this.revision)return this;this._revision=t.revision;var i=new Set;switch(t.tracks.forEach(function(o){var a=n._getOrCreateTrack(o);a.update(o),i.add(a)}),this.tracks.forEach(function(o){i.has(o)||n.removeTrack(o)}),t.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},r}(G$),Z$=J$,X$=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eF=Vn,tF=function(e){X$(r,e);function r(t,n){var i=e.call(this,t,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(o){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(a){o.publish({type:"track_priority",track:a,subscribe:i._enqueuedPriorityUpdates.get(a)})})}),i}return r.prototype.sendTrackPriorityUpdate=function(t,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(t,i),this._transport&&this._transport.publish({type:"track_priority",track:t,subscribe:i})},r}(eF),rF=tF,nF=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iF=Vn,oF=function(e){nF(r,e);function r(t,n){var i=e.call(this,t,"track_switch_off",n)||this;return i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"track_switch_off":i._setTrackSwitchOffUpdates(a.off||[],a.on||[]);break}})}),i}return r.prototype._setTrackSwitchOffUpdates=function(t,n){this.emit("updated",t,n)},r}(iF),aF=oF,sF=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cF=Vn,uF=Wr,lF=U.isDeepEqual,jh=2e3,dF=1,fF=function(e){sF(r,e);function r(t,n){var i=e.call(this,t,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new uF(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},jh,!1)}}),i.on("ready",function(o){o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"render_hints":i._processHintResults(a&&a.subscriber&&a.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",a.type);break}}),i._sendAllHints()}),i}return r.prototype._sendAllHints=function(){var t=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=t._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},r.prototype._processHintResults=function(t){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(jh),t.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},r.prototype._sendHints=function(){var t=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(o){var a=t._trackSidsToRenderHints.get(o);if(a.isEnabledDirty||a.isDimensionDirty){var s={track:o};a.isEnabledDirty&&(s.enabled=a.enabled,a.isEnabledDirty=!1),a.isDimensionDirty&&(s.render_dimensions=a.renderDimensions,a.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:dF++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},r.prototype.setTrackHint=function(t,n){var i=this._trackSidsToRenderHints.get(t)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!lF(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(t,i),this._sendHints()},r.prototype.clearTrackHint=function(t){this._trackSidsToRenderHints.delete(t)},r}(cF),pF=fF,hF=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vF=Vn,mF=1,yF=function(e){hF(r,e);function r(t,n){var i=e.call(this,t,"publisher_hints",n)||this;return i.on("ready",function(o){i._log.debug("publisher_hints transport ready:",o),o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"publisher_hints":a.publisher&&a.publisher.hints&&a.publisher.id&&i._processPublisherHints(a.publisher.hints,a.publisher.id);break;default:i._log.warn("Unknown message type: ",a.type);break}})}),i}return r.prototype.sendTrackReplaced=function(t){var n=t.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:mF++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},r.prototype.sendHintResponse=function(t){var n=t.id,i=t.hints;if(this._transport){var o={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",o),this._transport.publish(o)}},r.prototype._processPublisherHints=function(t,n){try{this.emit("updated",t,n)}catch(i){this._log.error("error processing hints:",i)}},r}(vF),gF=yF,_F=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mS=m&&m.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},wF=CN,SF=g2,kF=O2,TF=I2,bF=fS,EF=Z$,CF=Nw,PF=rF,OF=aF,RF=pF,xF=gF,Hr=U,LF=Hr.constants.DEFAULT_SESSION_TIMEOUT_SEC,jF=Hr.createBandwidthProfilePayload,AF=Hr.defer,DF=Hr.difference,Pc=Hr.filterObject,Ad=Hr.flatMap,Ah=Hr.oncePerTick,Ia=mw,IF=V.createTwilioError,MF=1e4,NF=function(e){_F(r,e);function r(t,n,i,o,a){var s=this;n.options=Object.assign({session_timeout:LF},n.options),a=Object.assign({DominantSpeakerSignaling:wF,NetworkQualityMonitor:SF,NetworkQualitySignaling:kF,RecordingSignaling:TF,RemoteParticipantV2:EF,TrackPrioritySignaling:PF,TrackSwitchOffSignaling:OF,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:MF},a),t.setBandwidthProfile(a.bandwidthProfile);var c=n.options,u=c.signaling_region,l=c.audio_processors,d=l===void 0?[]:l;t.setSignalingRegion(u),d.includes("krisp")&&d.push("rnnoise"),t.setAudioProcessors(d),o.setIceReconnectTimeout(a.sessionTimeout),s=e.call(this,t,n.sid,n.name,a)||this;var f=function(v){return s._getTrackReceiver(v)},g=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:a.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:t.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:t.networkQualityConfiguration},_peerConnectionManager:{value:o},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:a.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new a.DominantSpeakerSignaling(f,{log:g})},_networkQualitySignaling:{value:new a.NetworkQualitySignaling(f,t.networkQualityConfiguration,{log:g})},_renderHintsSignaling:{value:new RF(f,{log:g})},_publisherHintsSignaling:{value:new xF(f,{log:g})},_trackPrioritySignaling:{value:new a.TrackPrioritySignaling(f,{log:g})},_trackSwitchOffSignaling:{value:new a.TrackSwitchOffSignaling(f,{log:g})},_pendingSwitchOffStates:{value:new Map},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),$F(s,t),FF(s,o),UF(s,i),VF(s,i,a.statsPublishIntervalMs),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(r.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),r.prototype._deleteTrackReceiverDeferred=function(t){return this._trackReceiverDeferreds.delete(t)},r.prototype._getOrCreateTrackReceiverDeferred=function(t){var n=this._trackReceiverDeferreds.get(t)||AF(),i=this._peerConnectionManager.getTrackReceivers(),o=i.find(function(a){return a.id===t&&a.readyState!=="ended"});return o?n.resolve(o):this._trackReceiverDeferreds.set(t,n),n},r.prototype._addTrackReceiver=function(t){var n=this._getOrCreateTrackReceiverDeferred(t.id);return n.resolve(t),this},r.prototype._disconnect=function(t){var n=e.prototype._disconnect.call(this,t);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(t||new Error("LocalParticipant disconnected"))}),n},r.prototype._getTrackReceiver=function(t){var n=this;return this._getOrCreateTrackReceiverDeferred(t).promise.then(function(i){return n._deleteTrackReceiverDeferred(t),i})},r.prototype._getInitialTrackSwitchOffState=function(t){var n=this._pendingSwitchOffStates.get(t)||!1;return this._pendingSwitchOffStates.delete(t),n&&this._log.warn("["+t+"] was initially switched off! "),n},r.prototype._getTrackSidsToTrackSignalings=function(){var t=Ad(this.participants,function(n){return Array.from(n.tracks)});return new Map(t)},r.prototype._getOrCreateRemoteParticipant=function(t){var n=this,i=this._RemoteParticipantV2,o=this.participants.get(t.sid),a=this;return o||(o=new i(t,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,c){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",c)},function(s,c){return n._renderHintsSignaling.setTrackHint(s,c)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),o.on("stateChanged",function s(c){c==="disconnected"&&(o.removeListener("stateChanged",s),a.participants.delete(o.sid),a._disconnectedParticipantRevisions.set(o.sid,o.revision))}),this.connectParticipant(o)),o},r.prototype._getState=function(){return{participant:this.localParticipant.getState()}},r.prototype._maybeAddBandwidthProfile=function(t){var n=this.localParticipant,i=n.bandwidthProfile,o=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<o?(this._lastBandwidthProfileRevision=o,Object.assign({bandwidth_profile:jF(i)},t)):t},r.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},r.prototype._publishPeerConnectionState=function(t){this._transport.publish(Object.assign({peer_connections:[t]},this._getState()))},r.prototype._update=function(t){var n=this;if(t.subscribed&&t.subscribed.revision>this._subscribedRevision){this._subscribedRevision=t.subscribed.revision,t.subscribed.tracks.forEach(function(a){a.id?(n._subscriptionFailures.delete(a.sid),n._subscribed.set(a.sid,a.id)):a.error&&!n._subscriptionFailures.has(a.sid)&&n._subscriptionFailures.set(a.sid,a.error)});var i=new Set(t.subscribed.tracks.filter(function(a){return!!a.id}).map(function(a){return a.sid}));this._subscribed.forEach(function(a,s){i.has(s)||n._subscribed.delete(s)})}var o=new Set;return(t.participants||[]).forEach(function(a){if(a.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(a.sid);if(!(s&&a.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(a.sid);var c=n._getOrCreateRemoteParticipant(a);c.update(a),o.add(c)}}}),t.type==="synced"&&this.participants.forEach(function(a){o.has(a)||a.disconnect()}),BF(this),t.peer_connections&&this._peerConnectionManager.update(t.peer_connections,t.type==="synced"),t.recording&&this.recording.update(t.recording),t.published&&t.published.revision>this._publishedRevision&&(this._publishedRevision=t.published.revision,t.published.tracks.forEach(function(a){a.sid&&n._published.set(a.id,a.sid)}),this.localParticipant.update(t.published)),t.participant&&this.localParticipant.connect(t.participant.sid,t.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(a){var s=a.channel;!a.isSetup&&t.media_signaling&&t.media_signaling[s]&&t.media_signaling[s].transport&&t.media_signaling[s].transport.type==="data-channel"&&a.setup(t.media_signaling[s].transport.label)}),t.type==="warning"&&t.states&&t.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=t.states.revision,this.localParticipant.updateMediaStates(t.states)),this},r.prototype._initPublisherHintSignaling=function(){var t=this;this._publisherHintsSignaling.on("updated",function(i,o){Promise.all(i.map(function(a){return t.localParticipant.setPublisherHint(a.track,a.encodings).then(function(s){return{track:a.track,result:s}})})).then(function(a){t._publisherHintsSignaling.sendHintResponse({id:o,hints:a})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){t._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},r.prototype._initTrackSwitchOffSignaling=function(){var t=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{t._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var o=new Map;i.forEach(function(a){return o.set(a,!0)}),n.forEach(function(a){o.get(a)&&t._log.warn(a+" is DUPLICATED in both tracksOff and tracksOn list"),o.set(a,!1)}),t.participants.forEach(function(a){a.tracks.forEach(function(s){var c=o.get(s.sid);typeof c<"u"&&(s.setSwitchedOff(!c),o.delete(s.sid))})}),o.forEach(function(a,s){return t._pendingSwitchOffStates.set(s,!a)})}catch(a){t._log.error("error processing track switch off:",a)}})},r.prototype._initDominantSpeakerSignaling=function(){var t=this;this._dominantSpeakerSignaling.on("updated",function(){return t.setDominantSpeaker(t._dominantSpeakerSignaling.loudestParticipantSid)})},r.prototype._initNetworkQualityMonitorSignaling=function(){var t=this;this._networkQualitySignaling.on("ready",function(){var n=new t._NetworkQualityMonitor(t._peerConnectionManager,t._networkQualitySignaling);t._networkQualityMonitor=n,n.on("updated",function(){t.iceConnectionState!=="failed"&&(t.localParticipant.setNetworkQualityLevel(n.level,n.levels),t.participants.forEach(function(i){var o=n.remoteLevels.get(i.sid);o&&i.setNetworkQualityLevel(o.level,o)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return t._teardownNetworkQualityMonitor()})},r.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},r.prototype.getStats=function(){var t=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var o=mS(i,2),a=o[0],s=o[1];return[a,Object.assign({},s,{localAudioTrackStats:Dh(t,s.localAudioTrackStats),localVideoTrackStats:Dh(t,s.localVideoTrackStats),remoteAudioTrackStats:Ih(t,s.remoteAudioTrackStats),remoteVideoTrackStats:Ih(t,s.remoteVideoTrackStats)})]}))})},r}(bF);function yS(e,r){return r.reduce(function(t,n){var i=e.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(t):t},[])}function Dh(e,r){return yS(e._published,r)}function Ih(e,r){var t=new Map(Array.from(e._subscribed.entries()).map(function(n){var i=mS(n,2),o=i[0],a=i[1];return[a,o]}));return yS(t,r)}function $F(e,r){var t=Ah(function(){e._publishNewLocalParticipantState()}),n=Ah(function(){var i=Ad(r.tracks,function(o){return o.trackTransceiver});e._peerConnectionManager.setTrackSenders(i)});r.on("trackAdded",n),r.on("trackRemoved",n),r.on("updated",t),e.on("stateChanged",function i(o){o==="disconnected"&&(r.removeListener("trackAdded",n),r.removeListener("trackRemoved",n),r.removeListener("updated",t),e.removeListener("stateChanged",i),r.disconnect())}),e.on("signalingConnectionStateChanged",function(){var i=e.localParticipant,o=e.signalingConnectionState,a=i.identity,s=i.sid;switch(o){case"connected":i.connect(s,a);break;case"reconnecting":i.reconnecting();break}})}function FF(e,r){r.on("description",function(n){e._publishPeerConnectionState(n)}),r.dequeue("description"),r.on("candidates",function(n){e._publishPeerConnectionState(n)}),r.dequeue("candidates"),r.on("trackAdded",e._addTrackReceiver.bind(e)),r.dequeue("trackAdded"),r.getTrackReceivers().forEach(e._addTrackReceiver,e),r.on("connectionStateChanged",function(){e.emit("connectionStateChanged")}),r.on("iceConnectionStateChanged",function(){e.emit("iceConnectionStateChanged"),e.iceConnectionState==="failed"&&(e.localParticipant.networkQualityLevel!==null&&e.localParticipant.setNetworkQualityLevel(0),e.participants.forEach(function(t){t.networkQualityLevel!==null&&t.setNetworkQualityLevel(0)}))})}function UF(e,r){r.on("message",e._update.bind(e)),r.on("stateChanged",function t(n,i){n==="disconnected"&&(e.state!=="disconnected"&&e._disconnect(i),r.removeListener("stateChanged",t)),e.emit("signalingConnectionStateChanged")})}function VF(e,r,t){var n=new Map,i=!1,o=setInterval(function(){e.getStats().then(function(a){i=!i,a.forEach(function(s,c){var u=new CF(c,s,!0);r.publishEvent("quality","stats-report","info",{audioTrackStats:u.remoteAudioTrackStats.map(function(g,v){return Nh(g,s.remoteAudioTrackStats[v],n)}),localAudioTrackStats:u.localAudioTrackStats.map(function(g,v){return Mh(g,s.localAudioTrackStats[v],n)}),localVideoTrackStats:u.localVideoTrackStats.map(function(g,v){return Mh(g,s.localVideoTrackStats[v],n)}),peerConnectionId:u.peerConnectionId,videoTrackStats:u.remoteVideoTrackStats.map(function(g,v){return Nh(g,s.remoteVideoTrackStats[v],n)})});var l=Ad(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(g){return u[g].map(function(v){var _=v.ssrc,w=v.trackSid;return w+"+"+_})}),d=DF(Array.from(n.keys()),l);if(d.forEach(function(g){return n.delete(g)}),i){var f=zF(s.activeIceCandidatePair,u.peerConnectionId);r.publishEvent("quality","active-ice-candidate-pair","info",f)}})},function(){})},t);e.on("stateChanged",function a(s){s==="disconnected"&&(clearInterval(o),e.removeListener("stateChanged",a))})}function BF(e){var r=e._getTrackSidsToTrackSignalings();e._subscriptionFailures.forEach(function(t,n){var i=r.get(n);i&&(e._subscriptionFailures.delete(n),i.subscribeFailed(IF(t.code,t.message)))}),r.forEach(function(t){var n=e._subscribed.get(t.sid);(!n||t.isSubscribed&&t.trackTransceiver.id!==n)&&t.setTrackTransceiver(null),n&&e._getTrackReceiver(n).then(function(i){return t.setTrackTransceiver(i)})})}function Mh(e,r,t){var n=r.framesEncoded,i=r.packetsSent,o=r.totalEncodeTime,a=r.totalPacketSendDelay,s=Object.assign({},e),c=e.trackSid+"+"+e.ssrc,u=t.get(c)||new Map;if(typeof o=="number"&&typeof n=="number"){var l=u.get("avgEncodeDelay")||new Ia;l.putSample(o*1e3,n),s.avgEncodeDelay=Math.round(l.get()),u.set("avgEncodeDelay",l)}if(typeof a=="number"&&typeof i=="number"){var d=u.get("avgPacketSendDelay")||new Ia;d.putSample(a*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),u.set("avgPacketSendDelay",d)}return t.set(c,u),s}function Nh(e,r,t){var n=r.estimatedPlayoutTimestamp,i=r.framesDecoded,o=r.jitterBufferDelay,a=r.jitterBufferEmittedCount,s=r.totalDecodeTime,c=Object.assign({},e),u=e.trackSid+"+"+e.ssrc,l=t.get(u)||new Map;if(typeof n=="number"&&(c.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=l.get("avgDecodeDelay")||new Ia;d.putSample(s*1e3,i),c.avgDecodeDelay=Math.round(d.get()),l.set("avgDecodeDelay",d)}if(typeof o=="number"&&typeof a=="number"){var f=l.get("avgJitterBufferDelay")||new Ia;f.putSample(o*1e3,a),c.avgJitterBufferDelay=Math.round(f.get()),l.set("avgJitterBufferDelay",f)}return t.set(u,l),c}function zF(e,r){return e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:r,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},Pc(e||{},null)),e.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},Pc(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},Pc(e.remoteCandidate||{},null)),e}var WF=NF,HF=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),QF=$n,gS=p_,qF=Fw,KF=se.reconnectBackoffConfig,GF=Wr,Dd=se,YF=Dd.SDK_NAME,JF=Dd.SDK_VERSION,ZF=Dd.SDP_FORMAT,Bn=U,XF=Bn.createBandwidthProfilePayload,e3=Bn.createMediaSignalingPayload,t3=Bn.createMediaWarningsPayload,r3=Bn.createSubscribePayload,n3=Bn.getUserAgent,i3=Bn.isNonArrayObject,Ss=V,o3=Ss.createTwilioError,Oc=Ss.RoomCompletedError,a3=Ss.SignalingConnectionError,s3=Ss.SignalingServerBusyError,c3=1,Rc=2,u3={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},l3=function(e){HF(r,e);function r(t,n,i,o,a,s){var c=this;return s=Object.assign({Backoff:qF,TwilioConnection:gS,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:n3()},s),c=e.call(this,"connecting",u3)||this,Object.defineProperties(c,{_accessToken:{value:n},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:t},_networkQuality:{value:i3(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:o},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(KF)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:a}}),f3(c),c}return r.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:Rc};var t={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:t,version:Rc};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:YF,sdk_version:JF,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=XF(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=t3(this._notifyWarnings)),n.media_signaling=e3(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),n.subscribe=r3(this._automaticSubscription),n.format=ZF,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},r.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:c3}},r.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var t=this._createConnectOrSyncOrDisconnectMessage();t&&this._twilioConnection.sendMessage(t)},r.prototype.disconnect=function(t){return this.state!=="disconnected"?(this.preempt("disconnected",null,[t]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},r.prototype.publish=function(t){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:Rc},t)),!0;case"connecting":case"syncing":return this._updatesToSend.push(t),!0;case"disconnected":default:return!1}},r.prototype.publishEvent=function(t,n,i,o){this._eventObserver.emit("event",{group:t,name:n,level:i,payload:o})},r.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},r.prototype._setSession=function(t,n){this._session=t,this._sessionTimeoutMS=n*1e3},r.prototype._getReconnectTimer=function(){var t=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new GF(function(){t._sessionTimer&&(t._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){t._reconnectBackoff.backoff(n)}))},r.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},r}(QF);function $h(e){return Array.from(e.reduce(function(r,t){var n=r.get(t.id)||t;return(!n.description&&t.description||n.description&&t.description&&t.description.revision>n.description.revision)&&(n.description=t.description),(!n.ice&&t.ice||n.ice&&t.ice&&t.ice.revision>n.ice.revision)&&(n.ice=t.ice),r.set(n.id,n),r},new Map).values())}function d3(e){return e.reduce(function(r,t){return(!r.participant&&t.participant||r.participant&&t.participant&&t.participant.revision>r.participant.revision)&&(r.participant=t.participant),!r.peer_connections&&t.peer_connections?r.peer_connections=$h(t.peer_connections):r.peer_connections&&t.peer_connections&&(r.peer_connections=$h(r.peer_connections.concat(t.peer_connections))),r},{})}function f3(e){function r(){if(e.state!=="disconnected"){e._twilioConnection&&e._twilioConnection.removeListener("message",n);var c=e._iceServersStatus,u=e._options,l=e._wsServer,d=e.state,f=u.TwilioConnection,g=new f(l,Object.assign({helloBody:d==="connecting"&&c==="acquire"?e._createIceMessage():e._createConnectOrSyncOrDisconnectMessage()},u));g.once("close",function(v){v===f.CloseReason.LOCAL?t():t(new Error(v))}),g.on("message",n),e._twilioConnection=g}}function t(c){if(e.state!=="disconnected"){if(!c){e.disconnect();return}var u=e._getReconnectTimer();if(!u){var l=c.message===gS.CloseReason.BUSY?new s3:new a3;e.disconnect(l);return}e.state==="connected"&&e.preempt("syncing"),u.then(r)}}function n(c){if(e.state!=="disconnected"){if(c.type==="error"){e.disconnect(o3(c.code,c.message));return}switch(e.state){case"connected":switch(c.type){case"connected":case"synced":case"update":case"warning":e.emit("message",c);return;case"disconnected":e.disconnect(c.status==="completed"?new Oc:null);return;default:return}case"connecting":switch(c.type){case"iced":e._options.onIced(c.ice_servers).then(function(){e._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":e._setSession(c.session,c.options.session_timeout),e.emit("connected",c),e.preempt("connected");return;case"synced":case"update":e._updatesReceived.push(c);return;case"disconnected":e.disconnect(c.status==="completed"?new Oc:null);return;default:return}case"syncing":switch(c.type){case"connected":case"update":e._updatesReceived.push(c);return;case"synced":e._clearReconnectTimer(),e.emit("message",c),e.preempt("connected");return;case"disconnected":e.disconnect(c.status==="completed"?new Oc:null);return;default:return}default:return}}}e.on("stateChanged",function c(u){switch(u){case"connected":{var l=e._updatesToSend.splice(0);l.length&&e.publish(d3(l)),e._updatesReceived.splice(0).forEach(function(d){return e.emit("message",d)});return}case"disconnected":e._twilioConnection.removeListener("message",n),e.removeListener("stateChanged",c);return;case"syncing":return;default:return}});var i=e._options,o=e._iceServersStatus,a=i.iceServers,s=i.onIced;o==="overrode"?s(a).then(r):r()}var p3=l3,h3=wd,v3=gN,m3=WF,y3=p3,_S=V,g3=_S.SignalingConnectionDisconnectedError,_3=_S.SignalingIncomingMessageInvalidError,wS=U,w3=wS.flatMap,S3=wS.createRoomConnectEventPayload;function k3(e,r,t,n,i,o){o=Object.assign({PeerConnectionManager:v3,RoomV2:m3,Transport:y3},o);var a=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=o.PeerConnectionManager,c=o.RoomV2,u=o.Transport,l=o.iceServers,d=o.log,f=new s(n,i,o),g=w3(t.tracks,function(y){return[y.trackTransceiver]});f.setTrackSenders(g);var v=new Error("Canceled"),_,w=new h3(function(y,p,h){var S=function(G){return h()?(p(v),Promise.reject(v)):(d.debug("Got ICE servers:",G),o.iceServers=G,f.setConfiguration(o),f.createAndOffer().then(function(){if(h())throw p(v),v;d.debug("createAndOffer() succeeded."),f.dequeue("description")}).catch(function(oe){throw d.error("createAndOffer() failed:",oe),p(oe),oe}))},T=o.automaticSubscription,b=o.bandwidthProfile,E=o.dominantSpeaker,C=o.environment,A=o.eventObserver,I=o.loggerName,Z=o.logLevel,L=o.name,$=o.networkMonitor,R=o.networkQuality,N=o.notifyWarnings,D=o.realm,q=o.sdpSemantics,x=!!b,M=!!b,B=!!b&&(o.clientTrackSwitchOffControl!=="disabled"||o.contentPreferencesMode!=="disabled"),K=Object.assign({adaptiveSimulcast:a,automaticSubscription:T,dominantSpeaker:E,environment:C,eventObserver:A,loggerName:I,logLevel:Z,networkMonitor:$,networkQuality:R,notifyWarnings:N,iceServers:l,onIced:S,realm:D,renderHints:B,sdpSemantics:q,trackPriority:x,trackSwitchOff:M},b?{bandwidthProfile:b}:{});_=new u(L,e,t,f,r,K);var Q=S3(o);A.emit("event",Q),_.once("connected",function(G){if(d.debug("Transport connected:",G),h()){p(v);return}var oe=G.participant;if(!oe){p(new _3);return}y(new c(t,G,_,f,o))}),_.once("stateChanged",function(G,oe){G==="disconnected"?(_=null,p(oe||new g3)):d.debug("Transport state changed:",G)})},function(){_&&(_.disconnect(),_=null)});return w.catch(function(){_&&(_.disconnect(),_=null),f.close()}),w}var T3=k3,b3=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E3=jd,C3=function(e){b3(r,e);function r(){var t=e.call(this)||this;return Object.defineProperties(t,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),t}return r.prototype.addTrack=function(t,n,i,o){o===void 0&&(o=null);var a=this._createLocalTrackPublicationSignaling(t,n,i,o);return this._trackSendersToPublications.set(t,a),this._publicationsToTrackSenders.set(a,t),e.prototype.addTrack.call(this,a),this},r.prototype.getPublication=function(t){return this._trackSendersToPublications.get(t)||null},r.prototype.getSender=function(t){return this._publicationsToTrackSenders.get(t)||null},r.prototype.removeTrack=function(t){var n=this._trackSendersToPublications.get(t);if(!n)return null;this._trackSendersToPublications.delete(t),this._publicationsToTrackSenders.delete(n);var i=e.prototype.removeTrack.call(this,n);return i&&n.stop(),n},r}(E3),P3=C3,O3=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R3=vS,x3=function(e){O3(r,e);function r(t,n,i){var o=this;t=t.clone();var a=t.kind==="data"?!0:t.track.enabled;return o=e.call(this,n,t.kind,a,i)||this,o.setTrackTransceiver(t),Object.defineProperties(o,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:t.id}}),o}return Object.defineProperty(r.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),r.prototype.enable=function(t){return t=typeof t=="boolean"?t:!0,this.trackTransceiver.track.enabled=t,e.prototype.enable.call(this,t)},r.prototype.publishFailed=function(t){return L3(this,t)&&this.emit("updated"),this},r.prototype.setPriority=function(t){return this._updatedPriority!==t&&(this._updatedPriority=t,this.emit("updated")),this},r.prototype.setSid=function(t){return this._error?this:e.prototype.setSid.call(this,t)},r.prototype.stop=function(){this.trackTransceiver.stop()},r}(R3);function L3(e,r){return e._sid!==null||e._error?!1:(e._error=r,!0)}var j3=x3,A3=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),D3=j3,I3=og,M3=V.createTwilioError,N3=function(e){A3(r,e);function r(t,n,i,o,a){var s=e.call(this,t,n,i)||this;return Object.defineProperties(s,{_log:{value:a.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:o}}),s}return r.prototype.getState=function(){var t={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(t.audio_processor=this._noiseCancellationVendor),t},r.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},r.prototype.update=function(t){switch(t.state){case"ready":this.setSid(t.sid);break;case"failed":{var n=t.error;this.publishFailed(M3(n.code,n.message));break}}return this},r.prototype.updateMediaStates=function(t){if(!t||!t.recordings||this._mediaStates.recordings===t.recordings)return this;switch(this._mediaStates.recordings=t.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",I3.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings);break}return this},r}(D3),$3=N3,F3=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U3=P3,V3=$3,B3=se.DEFAULT_LOG_LEVEL,z3=Ut,SS=U,W3=SS.buildLogLevels,H3=SS.isDeepEqual,Q3=function(e){F3(r,e);function r(t,n,i){var o=this;i=Object.assign({logLevel:B3,LocalTrackPublicationV2:V3},i),o=e.call(this)||this;var a=W3(i.logLevel);return Object.defineProperties(o,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:t},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",o):new z3("default",o,a,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),o}return r.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},r.prototype.setSignalingRegion=function(t){this._signalingRegion||(this._signalingRegion=t)},r.prototype.setBandwidthProfile=function(t){H3(this._bandwidthProfile,t)||(this._bandwidthProfile=JSON.parse(JSON.stringify(t)),this._bandwidthProfileRevision++,this.didUpdate())},r.prototype.setAudioProcessors=function(t){this.audioProcessors=t},r.prototype.getParameters=function(){return this._encodingParameters},r.prototype.setParameters=function(t){return this._encodingParameters.update(t),this},r.prototype.update=function(t){return this._publishedRevision>=t.revision?this:(this._publishedRevision=t.revision,t.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},r.prototype.updateMediaStates=function(t){return!t||!t.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=t.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},r.prototype._createLocalTrackPublicationSignaling=function(t,n,i,o){return new this._LocalTrackPublicationV2(t,n,i,o,{log:this._log})},r.prototype.addTrack=function(t,n,i,o){var a=this;e.prototype.addTrack.call(this,t,n,i,o);var s=this.getPublication(t),c=s.isEnabled,u=s.updatedPriority,l=function(){(c!==s.isEnabled||u!==s.updatedPriority)&&(a.didUpdate(),c=s.isEnabled,u=s.updatedPriority)};return s.on("updated",l),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",l)}),this.didUpdate(),this},r.prototype._removeListener=function(t){var n=this._removeListeners.get(t);n&&n()},r.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(t){return t.getState()})}},r.prototype.didUpdate=function(){this._revision++,this.emit("updated")},r.prototype.removeTrack=function(t){var n=e.prototype.removeTrack.call(this,t);return n&&(t.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},r.prototype.setNetworkQualityConfiguration=function(t){this.networkQualityConfiguration.update(t)},r.prototype.setPublisherHint=function(t,n){var i=Array.from(this.tracks.values()).find(function(o){return o.sid===t});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:"+t+" not found"),Promise.resolve("UNKNOWN_TRACK"))},r}(U3),q3=Q3,K3=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G3=jd,Y3=fS,J3=$n,Z3={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},X3=function(e){K3(r,e);function r(){return e.call(this,"closed",Z3)||this}return r.prototype._close=function(t){return this.transition("closing",t),this.transition("closed",t),Promise.resolve(this)},r.prototype._connect=function(t,n,i,o,a){t.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",c=Promise.resolve(new Y3(t,s,a));return c.cancel=function(){},c},r.prototype._open=function(t){return this.transition("opening",t),this.transition("open",t),Promise.resolve(this)},r.prototype.close=function(){var t=this;return this.bracket("close",function(n){switch(t.state){case"closed":return t;case"open":return t._close(n);default:throw new Error('Unexpected Signaling state "'+t.state+'"')}})},r.prototype.connect=function(t,n,i,o,a){var s=this;return this.bracket("connect",function c(u){switch(s.state){case"closed":return s._open(u).then(c.bind(null,u));case"open":return s.releaseLockCompletely(u),s._connect(t,n,i,o,a);default:throw new Error('Unexpected Signaling state "'+s.state+'"')}})},r.prototype.createLocalParticipantSignaling=function(){return new G3},r.prototype.open=function(){var t=this;return this.bracket("open",function(n){switch(t.state){case"closed":return t._open(n);case"open":return t;default:throw new Error('Unexpected Signaling state "'+t.state+'"')}})},r}(J3),eU=X3,tU=m&&m.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rU=T3,nU=q3,iU=eU,oU=function(e){tU(r,e);function r(t,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:rU},n),i=e.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:t}}),i}return r.prototype._connect=function(t,n,i,o,a){return a=Object.assign({},this._options,a),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,t,i,o,a)},r.prototype.createLocalParticipantSignaling=function(t,n){return new nU(t,n)},r}(iU),aU=oU,sU=Br.MediaStreamTrack,Id=ie,cU=Id.guessBrowser,uU=Id.guessBrowserVersion,lU=Id.isCodecSupported,dU=KL,fU=ZL,pU=rD,hU=_w,vU=iD,Md=wn,mU=Md.LocalAudioTrack,yU=Md.LocalDataTrack,gU=Md.LocalVideoTrack,_U=uD,wU=tI,SU=aU,ks=U,kU=ks.asLocalTrack,TU=ks.buildLogLevels,bU=ks.filterObject,Fh=ks.isNonArrayObject,Vt=se,EU=Vt.DEFAULT_ENVIRONMENT,CU=Vt.DEFAULT_LOG_LEVEL,PU=Vt.DEFAULT_LOGGER_NAME,OU=Vt.DEFAULT_REALM,RU=Vt.DEFAULT_REGION,xU=Vt.WS_SERVER,LU=Vt.SDK_NAME,jU=Vt.SDK_VERSION,Do=Vt.typeErrors,_r=wd,AU=yw,DU=Ut,IU=Xi.validateBandwidthProfile,xc=cU()==="safari"&&uU(),MU=0,Uh=!1,kS=!1;if(xc){var Vh=xc.major,NU=xc.minor;kS=Vh<12||Vh===12&&NU<1}var $U=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),FU=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function UU(e,r){if(typeof r>"u"&&(r={}),!Fh(r))return _r.reject(Do.INVALID_TYPE("options","object"));var t=r.Log||DU,n=r.loggerName||PU,i=r.logLevel||CU,o=TU(i),a="[connect #"+ ++MU+"]",s;try{s=new t("default",a,o,n)}catch(b){return _r.reject(b)}Bh(r,s,$U);var c=r.preferredVideoCodecs==="auto";if(c&&(r.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),r.maxVideoBitrate&&c)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),_r.reject(Do.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));r=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:EU,eventListener:null,insights:!0,LocalAudioTrack:mU,LocalDataTrack:yU,LocalParticipant:pU,LocalVideoTrack:gU,Log:t,MediaStreamTrack:sU,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:OU,region:RU,signaling:SU},bU(r));var u={};typeof r.wsServerInsights=="string"&&(u.gateway=r.wsServerInsights);var l=r.insights?hU:vU,d=new l(e,LU,jU,r.environment,r.realm,u),f=xU(r.environment,r.region),g=new AU(d,Date.now(),s,r.eventListener);if(r=Object.assign({eventObserver:g,wsServer:f},r),r.log=s,kS&&!Uh&&s.logLevel!=="error"&&s.logLevel!=="off"&&(Uh=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof e!="string")return _r.reject(Do.INVALID_TYPE("token","string"));var v=Object.assign({},r);if(delete v.name,"tracks"in r){if(!Array.isArray(r.tracks))return _r.reject(Do.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{r.tracks=r.tracks.map(function(b){return kU(b,v)})}catch(b){return _r.reject(b)}}var _=IU(r.bandwidthProfile);if(_)return _r.reject(_);r.clientTrackSwitchOffControl="disabled",r.contentPreferencesMode="disabled",r.bandwidthProfile&&(r.clientTrackSwitchOffControl="auto",r.contentPreferencesMode="auto",r.bandwidthProfile.video&&(Bh(r.bandwidthProfile.video,s,FU),"maxTracks"in r.bandwidthProfile.video?r.clientTrackSwitchOffControl="disabled":r.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?r.clientTrackSwitchOffControl="manual":r.clientTrackSwitchOffControl="auto","renderDimensions"in r.bandwidthProfile.video?r.contentPreferencesMode="disabled":r.bandwidthProfile.video.contentPreferencesMode==="manual"?r.contentPreferencesMode="manual":r.contentPreferencesMode="auto"));var w=r.signaling,y=new w(r.wsServer,r);s.info("Connecting to a Room"),s.debug("Options:",r);var p=new fU({maxAudioBitrate:r.maxAudioBitrate,maxVideoBitrate:r.maxVideoBitrate},c),h={audio:r.preferredAudioCodecs.map(zh),video:r.preferredVideoCodecs.map(zh)},S=new _U(Fh(r.networkQuality)?r.networkQuality:{});["audio","video"].forEach(function(b){return h[b].forEach(function(E){var C=E.codec;return lU(C,b).then(function(A){return!A&&s.warn("The preferred "+b+' codec "'+C+'" will be ignored as it is not supported by the browser.')})})});var T=dU(WU.bind(null,r),VU.bind(null,y,s,p,S,r),zU.bind(null,e,r,y,p,h),BU.bind(null,r));return T.then(function(b){return d.connect(b.sid,b.localParticipant.sid),s.info("Connected to Room:",b.toString()),s.info("Room name:",b.name),s.debug("Room:",b),b.once("disconnected",function(){return d.disconnect()}),b},function(b){d.disconnect(),T._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",b)}),T}function Bh(e,r,t){t.forEach(function(n){var i=n.didWarn,o=n.name,a=n.newName,s=n.shouldDelete;o in e&&typeof e[o]<"u"&&(a&&s&&(e[a]=e[o]),s&&delete e[o],!i&&!["error","off"].includes(r.level)&&(r.warn('The ConnectOptions "'+o+'" is '+(a?'deprecated and scheduled for removal. Please use "'+a+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))})}function VU(e,r,t,n,i,o){var a=e.createLocalParticipantSignaling(t,n);return r.debug("Creating a new LocalParticipant:",a),new i.LocalParticipant(a,o,i)}function BU(e,r,t){var n=new wU(r,t,e),i=e.log;return i.debug("Creating a new Room:",n),t.on("stateChanged",function o(a){a==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),t.removeListener("stateChanged",o))}),n}function zU(e,r,t,n,i,o){return r.log.debug("Creating a new RoomSignaling"),t.connect(o._signaling,e,n,i,r)}function WU(e,r){var t=e.log;return e.shouldStopLocalTracks=!e.tracks,e.shouldStopLocalTracks?t.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(t.info("Getting LocalTracks"),t.debug("Options:",e)),e.createLocalTracks(e).then(function(i){var o=r(i);return o.catch(function(){e.shouldStopLocalTracks&&(t.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),o})}function zh(e){var r=typeof e=="string"?{codec:e}:e;switch(r.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},r);case"vp8":return Object.assign({simulcast:!1},r);default:return r}}var HU=UU,TS=se,QU=TS.DEFAULT_LOG_LEVEL,qU=TS.DEFAULT_LOGGER_NAME;function bS(e,r){r=Object.assign({loggerName:qU,logLevel:QU},r);var t={};t.loggerName=r.loggerName,t.logLevel=r.logLevel,delete r.loggerName,delete r.logLevel;var n=r.createLocalTracks;return delete r.createLocalTracks,t[e]=Object.keys(r).length>0?r:!0,n(t).then(function(i){return i[0]})}function KU(e){return bS("audio",e)}function GU(e){return bS("video",e)}var Wh={audio:KU,video:GU},ES=ie,YU=ES.guessBrowser,JU=ES.support,ZU=qe.getSdpFormat,no=zr,XU=no.isAndroid,eV=no.isMobile,tV=no.isNonChromiumEdge,rV=no.rebrandedChromeBrowser,nV=no.mobileWebKitBrowser,iV=["crios","edg","edge","electron","headlesschrome"],oV=["chrome","firefox"],aV=["chrome","safari"],sV=[];function cV(){var e=YU();if(!e)return!1;var r=rV(e),t=nV(e),n=XU()?oV:aV;return!!e&&JU()&&ZU()==="unified"&&(!r||iV.includes(r))&&!tV(e)&&(!t||sV.includes(t))&&(!eV()||n.includes(e))}var uV=cV,lV=ed.exports,Bi=m&&m.__assign||function(){return Bi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bi.apply(this,arguments)};Object.defineProperty(lV,"__esModule",{value:!0});var Ts=is,dV=Rn,Bt={connect:HU,createLocalAudioTrack:Wh.audio,createLocalVideoTrack:Wh.video,isSupported:uV(),version:Gy.version,Logger:Ky,LocalAudioTrack:wn.LocalAudioTrack,LocalDataTrack:wn.LocalDataTrack,LocalVideoTrack:wn.LocalVideoTrack};function fV(e,r){var t=Bi({createLocalTracks:Ts.createLocalTracks},r);return Bt.connect(e,t)}function pV(e){var r=Bi({createLocalTracks:Ts.createLocalTracks},e);return Bt.createLocalAudioTrack(r)}function hV(e){var r=Bi({createLocalTracks:Ts.createLocalTracks},e);return Bt.createLocalVideoTrack(r)}var vV=Bt.isSupported,mV=Bt.version,yV=Bt.Logger,gV=Bt.LocalAudioTrack,_V=Bt.LocalVideoTrack,wV=Bt.LocalDataTrack;ed.exports={connect:fV,createLocalAudioTrack:pV,createLocalVideoTrack:hV,createLocalTracks:Ts.createLocalTracks,runPreflight:dV.runPreflight,isSupported:vV,version:mV,Logger:yV,LocalAudioTrack:gV,LocalVideoTrack:_V,LocalDataTrack:wV};var SV=ed.exports;const CS=({token:e,roomName:r,role:t})=>{const[n,i]=P.useState(null);return P.useEffect(()=>((async()=>{try{const a=await SV.connect(e,{name:r,region:"gll"});i(a),console.log("Connected to room:",a),t==="host"&&a.localParticipant.videoTracks.forEach(c=>{const u=c.track;document.getElementById("local-video").appendChild(u.attach())}),a.participants.forEach(s=>{s.on("trackSubscribed",c=>{document.getElementById("remote-video").appendChild(c.attach())})}),a.on("participantConnected",s=>{s.on("trackSubscribed",c=>{document.getElementById("remote-video").appendChild(c.attach())})}),a.on("participantDisconnected",s=>{console.log(`${s.identity} disconnected.`)})}catch(a){console.error("Error connecting to room:",a)}})(),()=>{n&&n.disconnect()}),[e,r,t]),k.jsxs("div",{id:"video-room",children:[k.jsxs("h2",{children:["Video Room: ",r]}),t==="host"&&k.jsx("div",{id:"local-video",children:"Local Video"}),k.jsx("div",{id:"remote-video",children:"Remote Video"})]})};var be=[];for(var Lc=0;Lc<256;++Lc)be.push((Lc+256).toString(16).slice(1));function kV(e,r=0){return(be[e[r+0]]+be[e[r+1]]+be[e[r+2]]+be[e[r+3]]+"-"+be[e[r+4]]+be[e[r+5]]+"-"+be[e[r+6]]+be[e[r+7]]+"-"+be[e[r+8]]+be[e[r+9]]+"-"+be[e[r+10]]+be[e[r+11]]+be[e[r+12]]+be[e[r+13]]+be[e[r+14]]+be[e[r+15]]).toLowerCase()}var Io,TV=new Uint8Array(16);function bV(){if(!Io&&(Io=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Io))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Io(TV)}var EV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Hh={randomUUID:EV};function CV(e,r,t){if(Hh.randomUUID&&!r&&!e)return Hh.randomUUID();e=e||{};var n=e.random||(e.rng||bV)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,kV(n)}const PV=()=>{const[e,r]=P.useState(localStorage.getItem("roomName")||""),[t,n]=P.useState(localStorage.getItem("token")||null),[i,o]=P.useState(!1),[a,s]=P.useState(""),c="http://localhost:5001",u=async()=>{const f=CV();r(f);try{const v=(await re.post(`${c}/api/room/join-room`,{roomName:f,role:"host"})).data.token;n(v),localStorage.setItem("roomName",f),localStorage.setItem("token",v)}catch(g){console.error("Error starting meeting:",g)}},l=async()=>{try{await re.post(`${c}/api/room/end-room`,{roomName:e}),r(""),n(null),o(!0),localStorage.removeItem("roomName"),localStorage.removeItem("token")}catch(f){console.error("Error ending meeting:",f)}},d=()=>{e?navigator.clipboard.writeText(e).then(()=>{s("Room ID copied to clipboard!")}).catch(f=>{console.error("Failed to copy: ",f),s("Failed to copy Room ID")}):s("Room ID is not available.")};return P.useEffect(()=>{e&&t&&o(!1)},[e,t]),k.jsxs("div",{children:[k.jsx("h1",{children:"Welcome to AutismSense"}),t?k.jsxs("div",{children:[k.jsx(CS,{token:t,roomName:e,role:"host"}),k.jsxs("p",{children:["Video Room: ",e]}),k.jsx("button",{onClick:d,children:"Copy Room ID"}),a&&k.jsx("p",{style:{color:"green"},children:a})," ",k.jsx("button",{onClick:l,children:"End Room"}),i&&k.jsx("p",{style:{color:"red"},children:"The meeting has ended."})]}):k.jsx("button",{onClick:u,children:"Start Meeting"})]})},OV=()=>{const[e,r]=P.useState(""),[t,n]=P.useState(null),[i,o]=P.useState(!1),[a,s]=P.useState(""),c="http://localhost:5001",u=async()=>{try{const d=(await re.post(`${c}/api/room/join-room`,{roomName:e,role:"guest"})).data.token;n(d),o(!0),s("")}catch(l){l.response&&l.response.status===404?s("Room does not exist. Please check the room name."):(console.error("Error joining meeting:",l),s("An error occurred. Please try again."))}};return k.jsxs("div",{children:[k.jsx("h1",{children:"Join Meeting"}),t?k.jsx(CS,{token:t,roomName:e,role:"guest"}):k.jsxs(k.Fragment,{children:[k.jsx("input",{type:"text",value:e,onChange:l=>r(l.target.value),placeholder:"Enter Room Name"}),k.jsx("button",{onClick:u,children:"Join Meeting"}),a&&k.jsx("p",{style:{color:"red"},children:a})," "]}),i&&k.jsxs("div",{children:[k.jsx("div",{id:"emoji-icon",children:"😊"}),k.jsx("div",{id:"controls"}),k.jsx("button",{onClick:()=>console.log("Help button clicked"),children:"Help"}),k.jsx("button",{onClick:()=>console.log("Game button clicked"),children:"Game"})]})]})};function RV(){return k.jsx(Y0,{children:k.jsxs(z0,{children:[k.jsx(je,{path:"/",element:k.jsx(WE,{})}),k.jsx(je,{path:"/sign-up",element:k.jsx(zE,{})}),k.jsx(je,{path:"/login",element:k.jsx(HE,{})}),k.jsx(je,{path:"/home",element:k.jsx(qE,{})}),k.jsx(je,{path:"/about-us",element:k.jsx(KE,{})}),k.jsx(je,{path:"/forget-password",element:k.jsx(GE,{})})," ",k.jsx(je,{path:"/child-profile/:childId",element:k.jsx(YE,{})})," ",k.jsx(je,{path:"/detect-emotion",element:k.jsx(ZE,{})})," ",k.jsx(je,{path:"/reset-password/:token",element:k.jsx(XE,{})}),k.jsx(je,{path:"/create-meeting",element:k.jsx(eC,{})}),k.jsx(je,{path:"/meetings",element:k.jsx(tC,{})}),k.jsx(je,{path:"/linkpage",element:k.jsx(rC,{})}),k.jsx(je,{path:"/host",element:k.jsx(PV,{})}),k.jsx(je,{path:"/gust",element:k.jsx(OV,{})})]})})}jc.createRoot(document.getElementById("root")).render(k.jsx(jt.StrictMode,{children:k.jsx(RV,{})}));
